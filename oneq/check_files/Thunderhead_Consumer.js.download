/* Marketing Rules version: 2265 */
//Rule: Thunderhead_Consumer
//ATTUID: ml916s+rc207r

/*! @copyright (c) Thunderhead ONE Ltd | https://www.thunderhead.com */!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([,function(e,t){e.exports=null},function(e,t,n){"use strict";n.r(t),t.default=function(customerApi,defaults){console.log("TH CONSUMER");
var sessStg = JSON.parse(sessionStorage.getItem('loginPageLoadAnalyticsIDSE'));
var trackers=[],tlbtnName,btnName,thPath,ip_URL,keysSent=[],listenArr=[], buttonArr=[], alreadyTracked={};
defaults.interaction = window.location.href.replace('/#/', '/');
var variableSaved = {},variableSent = {},config = {attributes: true,childList: true,subtree: true,characterData: true};
var previousPath = location.pathname;

(new MutationObserver(checkPathsMutation)).observe(document.body, config);
(new MutationObserver(handleButtonMutation)).observe(document.body, config);

if (sessionStorage.getItem('angularMyATTSession')) {
var myAttObj = JSON.parse(sessionStorage.getItem('angularMyATTSession')).current;
if (myAttObj.selectedAccountInfo.SubscriberNumber) {
  defaults.properties.phone_number = cleanPN(myAttObj.selectedAccountInfo.SubscriberNumber);
}
if (myAttObj.selectedAccountInfo.AccountFirstName) {
  defaults.properties.fname = myAttObj.selectedAccountInfo.AccountFirstName;
}
if (myAttObj.selectedAccountInfo.AccountLastName) {
  defaults.properties.lname = myAttObj.selectedAccountInfo.AccountLastName;
}
}
var cookieArr = document.cookie.split(";");
if (cookieArr) {
cookieArr.forEach(function(cookie) {
  if (cookie.split("=")[0].trim() === "UUID") {
	defaults.properties.uuid = cookie.split("=")[1].trim();
  }
});
}
callONE();

function handleButtonMutation() {
  var newArr = buttonArr;
  buttonArr.forEach(function(track, i){
	if(document.querySelector(track.path)){
	  document.querySelector(track.path).addEventListener('click', function(){
		defaults.properties[track.id] =true;
		customerApi.sendProperties(defaults.interaction, defaults.properties);
	  });
	  newArr.splice(i, 1);
	}
  });
  buttonArr = newArr;
}

function checkPathsMutation() {
	if (previousPath !== location.pathname) {
		previousPath = location.pathname;
		callONE(location.pathname);
	}
}

function cleanPN(phoneIn) {
  var phoneOut = phoneIn.replace('(', '').replace(')', '').replace('-', '').replace(' ', '').replace('.', '').replace('.', '');
  return phoneOut;
}

function cleanResponse(response){
  var newArray=[];
  for (var i = 0; i < response.trackers.length; i++) {
	  if (response.trackers[i].path.substring(0,12) === "listenBut---"){
		  response.trackers[i].path = response.trackers[i].path.substring(12);
		  buttonArr.push(response.trackers[i]);
	  }else{
		  newArray.push(response.trackers[i]);
	  }
  }
  response.trackers = newArray;
  newArray = [];
  return response;
}

function callONE(url) {
	customerApi.sendInteraction(url || defaults.interaction, defaults.properties)
	  .then(function (response) {
		  customerApi.processResponse(cleanResponse(response), true, 0);
	  });
}}},function(e,t,n){"use strict";n.r(t);var r=function(e,t,n){e.addEventListener&&e.addEventListener(t,n)},o=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=[],r=0;r<e.length;r+=1)n.push(t(e[r],r));return n},i=function(){o.apply(void 0,arguments)},u=function(e){return e.replace(/%(?![2-9a-f]{1}[0-9a-f]{1})/gi,"%25")},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(Object.keys(e),(function(t){var n=void 0===e[t]||null===e[t]?"":e[t];return encodeURIComponent(t)+"="+encodeURIComponent(n)})).join("&")},a=function(e,t){return[e].concat(c(t)||[]).join("?")},s=function(e){for(var t=Object(e),n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return i(r,(function(e){i(Object.keys(e),(function(n){t[n]=e[n]}))})),t},f=function(e){return decodeURIComponent(o(atob(e).split(""),(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))},d={host:'https://na5.thunderhead.com',interaction:"/"+window.location.pathname.replace(/^\//,""),interactionMap:{"https://m\\.att\\.com(?::\\d{1,5})?":["/my/makePaymentConfirmation/?","/my/makePaymentReview/?","/my/makePayment/arrangeLatePayment/?"],"http.*://www\\.att\\.com(?::\\d{1,5})?":["/storeappointment/virtual/modifylocation/?","/acctmgmt/wireless/plandetails/modal/?","/my/wirelessConfirmation/?","/buy/line-selection/?","/acctmgmt/myplandetails/?","/buy/accessories/browse/speakers-smart-home/?","/buy/connected-devices-and-more/recently-viewed/?","/plans/phone-upgrade/?","/buy/postpaid/phones/offerdetails/modal/?","/buy/screen-protectors/offer-details/modal/?","/acctmgmt/wirelessinfo/plandetails/modal/?","/buy/wireless/devicelegal/modal/?","/buy/wireless/howtotradein/modal/?","/my/makePayment/?","/buy/phones/offer-details/modal/?","/my/autoPayPaperlessDashboard/?","/buy/checkout/checkoutview/?","/acctmgmt/registration/accountRegistered/?","/buy/wireless/planlegal/modal/?","/buy/phones/browse/10-and-under/recently-viewed/?","/storeappointment/location/?","/buy/postpaid/additionaloffers/?","/my/virtual/passthrough/makepayment/arrangelatepayment/?","/buy/prepaid-phones/sort/modal/?","/buy/wireless/deviceconfig/devices/?","/buy/phones/browse/change-zip/modal/?","/buy/postpaid/tablets/details/?","/buy/wireless/insurance/declineconfirm/modal/?","/buy/tablets/browse/5g/recently-viewed/?","/buy/postpaid/upsell-offer-interstitial/?","/acctmgmt/wireless/changeplan/review/?","/acctmgmt/passthrough/makepayment/?","/buy/wireless/prepaid/?","/buy/checkout/errorcto/?","/cart/virtual/checkinstoreavailability/?","/buy/all/offer-details/modal/?","/buy/prepaid-phones/browse/prepaid-cards/recently-viewed/?","/buy/wearables/browse/apple_used/recently-viewed/?","/buy/wearables/browse/apple_watchos/recently-viewed/?","/buy/tablets/recently-viewed/?","/acctmgmt/arrangelatepayment/?","/storeappointment/virtual/modifydateandtime/?","/acctmgmt/wireless/changeplan/compareplans/modal/?","/buy/phones/store/availability/modal/?","/buy/wearables/?","/buy/wearables/details/?","/buy/prepaid-phones/browse/lg_samsung_hasdeals/recently-viewed/?","/buy/wearables/sort/modal/?","/storeappointment/virtual/modifyappointmenttype/?","/buy/tablets/browse/new_storepickup/recently-viewed/?","/buy/gadgets-gaming/offer-details/modal/?","/buy/login/?","/mras/virtual/appointment/confirmation/?","/buy/wireless/prepaid/plans/?","/buy/wearables/browse/apple_value/recently-viewed/?","/support/.*/?","/buy/wireless/upsell-offer-interstitial/?","/buy/accessories/browse/cases/?","/buy/wearables/browse/apple_new/recently-viewed/?","/my/login/?","/my/virtual/installmentplanhistory/?","/buy/checkout/deliveryinfo/expresseedetails/modal/?","/buy/wireless/phones/?","/buy/checkout/terms/modal/?","/buy/postpaid/tradeindetail/modal/?","/buy/wearables/browse/new_apple_watchos/recently-viewed/?","/buy/wireless/fanbenefits/?","/buy/prepaid-phones/recently-viewed/?","/buy/tablets/browse/used/recently-viewed/?","/buywireless/upgrade-eligibility/?","/checkmyorder/omhub\\.rt/?","/buy/wireless/upgradeoptions/accessoryconfig/?","/techbuzz/buying-guides/best-tablet-for-my-kid/?","/buy/tablets/sort/modal/?","/acctmgmt/passthrough/dtvnbillpayments/?","/virtual/paymentmethod\\.html/?","/buy/wearables/price-details/modal/?","/buy/tablets/browse/samsung/recently-viewed/?","/buy/connected-devices-and-more/?","/my/virtual/passthrough/makepaymentreview/?","/myattapp/virtual/buy/wireless/insurance/deductibles/modal/?","/buy/wearables/browse/used/recently-viewed/?","/buy/wearables/browse/samsung_apple/recently-viewed/?","/buy/prepaid-phones/browse/samsung_storepickup/recently-viewed/?","/buy/phones/details/?","/my/virtual/makepayment/?","/buy/checkout/tradein/?","/buy/wireless/sure,%20take%20your%20time%20to%20add%20the%20info%20at%20the%20check%20out%20steps%20so%20you%20can%20continue%20jne/?","/buy/upgrade-eligibility/?","/acctmgmt/editscheduledpayment/?","/buy/tablets/browse/samsung_apple/recently-viewed/?","/acctmgmt/profile/overview/?","/buy/checkout/devicetradein/?","/mras/virtual/appointment/storesearchresults/?","/buy/wearables/browse/samsung/recently-viewed/?","/support/topic/my-account/topic_billingpayments1-topic_viewpaybill-topic_viewbill0/?","/buy/phones/browse/samsung/?","/buy/postpaid/deviceconfig/?","/acctmgmt/makepayment/?","/buy/phones/browse/5g/?","/buy/postpaid/insurance-details/modal/?","/storeappointment/appointmenttype/?","/buy/wearables/browse/right-to-you/modal/?","/support/topic/my-account/topic_billingpayments1-topic_feeschargesrefundsd6-topic_feeschargesdisputes/?","/buy/cart/?","/buy/tablets/price-details/modal/?","/buy/wearables/browse/apple_samsung/recently-viewed/?","/buy/wireless/devices/upgrade-eligibility/?","/buy/checkout/deliveryinfo/timeselection/modal/?","/buy/wearables/browse/apple_color-black/recently-viewed/?","/buy/phones/samsung-galaxy-z-fold3-5g-256gb-phantom-black\\.html/?","/acctmgmt/passthrough/wireless/?","/buy/prepaid-phones/browse/storepickup/recently-viewed/?","/buy/postpaid/phones/pricedetails/modal/?","/buy/accessories/browse/chargers/?","/buy/prepaid-phones/browse/hasdeals/recently-viewed/?","/buy/wireless/cto/modal/?","/buy/phones/.*\\.html/?","/buy/bundles/bb/?","/buy/postpaid/tablets/config/?","/buy/phones/browse/5g_apple/recently-viewed/?","/plans/connected-car\\.html/?","/buy/wireless/insurancedetails/?","/buy/wireless/tradein/?","/buy/wireless/offerlegal/upgrade-eligibility/?","/buy/wireless/devices/?","/device-compare/?","/my/mmdfcategory/?","/buy/wireless/upgradeoptions/upgradeoptions/modal/?","/my/virtual/installmentplannextupdetails/?","/buy/tablets/browse/apple/recently-viewed/?","/buy/wireless/devicedetails/modal/?","/buy/wireless/deviceconfig/offerlegal/deviceconfig/?","/buy/wireless/upgrade-eligibility/tradeindetails/modal/?","/buy/phones/browse/samsung_5g/recently-viewed/?","/my/virtual/suspendrestore/?","/buy/tablets/browse/lenovo/?","/buy/accessories/browse/cases/apple/?","/support/topic/my-account/?","/buy/accessories/?","/buy/prepaid-phones/browse/samsung/recently-viewed/?","/buy/wireless/prepaid/plan/?","/buy/phones/browse/apple/recently-viewed/?","/wireless/?","/buy/accessories/details/?","/acctmgmt/makepayment/paymentabandonment/modal/?","/buy/postpaid/phones/config/?","/myattapp/virtual/buy/wireless/deviceconfig/?","/buy/prepaid-phones/?","/buy/wireless/deviceconfig/accessories/?","/buy/phones/browse/kyocera_wifi-calling/recently-viewed/?","/activate/?","/buy/wireless/offer-interstitial/?","/my/accountOverview/?","/support/contact-us/?","/buy/wireless/upgradeoptions/upgrade-eligibility/?","/techbuzz/buying-guides/the-best-affordable-cell-phone-plans-and-cell-phones-for-kids/?","/buy/tablets/?","/acctmgmt/registration/welcome/?","/buy/wireless/byod/byod/?","/acctmgmt/makepayment/review/cancel/modal/?","/buy/checkout/deliveryinfo/verifyaddress/modal/?","/my/virtual/installmentplanpaymentconfirmation/?","/buy/thankyou/?","/storeappointment/confirmation/?","/buy/wireless/intent/modal/?","/buy/wireless/null/?","/buy/postpaid/tphones/?","/buy/speakers-smart-home/offer-details/modal/?","/buy/tablets/browse/samsung_storepickup/recently-viewed/?","/buy/wireless/byod/?","/acctmgmt/wireless/myplandetails/?","/buy/bundles/dtvnow/?","/myattapp/virtual/buy/wireless/devicelegal/modal/?","/myatt/index-native\\.htmlvirtual/changemyplanindctn/?","/storeappointment/pendingappointments/?","/buy/checkout/cartview/?","/buy/wireless/deviceconfig/upgrade-eligibility/?","/support/topic/wireless/?","/buy/accessories/browse/all/att_deals/?","/buy/accessories/browse/all/apple/?","/acctmgmt/wireless/mydevices/tradeindetails/modal/?","/acctmgmt/registration/selectServices/?","/buy/accessories/browse/screen-protectors/?","/buy/wireless/?","/search/tradein\\.att\\.com/?","/storeappointment/virtual/viewnearbylocationsmodal\\.html/?","/buy/wireless/upgrade-eligibility/?","/buy/accessories/browse/all/deals/?","/buy/tablets/browse/apple/?","/buy/checkout/numberselections/?","/shop/xpress/upgrade-eligibility-payment\\.html/?","/acctmgmt/passthrough/arrangelatepayment/?","/mras/virtual/appointment/reschedule/storesearchresults/?","/acctmgmt/makepayment/editscheduledpayment/?","/buy/tablets/browse/value/recently-viewed/?","/offers/your-online-store/?","/buy/postpaid/hotspots%20&%20more/?","/buy/checkout/.*/?","/?","/cart/summary\\.html/?","/acctmgmt/wirelessinfo/manageplansdevices-group1/?","/buy/wireless/compatibledevice/modal/?","/my/makepaymentconfirmation/?","/buy/wireless/prepaid/devices/?","/buy/postpaid/wearables/details/?","/my/virtual/installmentplanpayment/?","/buy/cases/offer-details/modal/?","/plans/connected-car/chevrolet/?","/acctmgmt/planconfigurator/?","/buy/wireless/buy/wireless/?","/buy/wireless/wireless/deviceconfig/?","/buy/myatt/?","/buy/bundles/mdu-address/modal/?","/storeappointment/dateandtime/?","/storeappointment/customerinfo/?","/buy/tablets/browse/apple_ios_value_color-gold_right-to-you_storepickup/recently-viewed/?","/my/?","/acctmgmt/profile/communications/?","/prepaid/plans/?","/buy/recently-viewed/?","/buy/wireless/joingroup/cto/?","/my/virtual/suspendrestoreerror/?","/buy/cart/seedetailsduetoday/modal/?","/buy/prepaid-phones/browse/used/recently-viewed/?","/support/article/my-account/KM1051879/?","/buy/wireless/insurance/declineconfirm/upgrade-eligibility/?","/acctmgmt/profile/addAuthorizedUser/?","/buy/bundles/check-availability/modal/?","/my/virtual/passthrough/makepayment/?","/plans/next/?","/buy/accessories/browse/headphones/samsung/?","/acctmgmt/makepayment/arrangelatepayment/confirmation/?","/buy/accessories/browse/headphones/samsung_beats/?","/buy/orderabandon/modal/?","/shop/checkout/contractpayment\\.html/?","/buy/wearables/browse/right-to-you/recently-viewed/?","/buy/upsell/offers/modal/?","/buy/accessories/browse/all/samsung/?","/buy/phones/browse/new_storepickup/?","/buy/postpaid/tablet/?","/storeappointment/virtual/appointmentcancelmodal\\.html/?","/buy/tablets/details/?","/buy/tradeindetail/modal/?","/buy/wearables/browse/apple/recently-viewed/?","/buy/wireless/plans/?","/techbuzz/buying-guides/att-trade-in-deals-for-a-new-smartphone-how-it-works/?","/buy/tablets/browse/apple_new/recently-viewed/?","/acctmgmt/profile/addSecondaryUser/?","/techbuzz/buying-guides/choosing-your-perfect-smartwatch/?","/buy/wearables/browse/value_10-and-under_price-range-10-25/recently-viewed/?","/my/virtual/installmentplandetails/?","/buy/phones/?","/buy/tablets/browse/apple_storepickup/recently-viewed/?","/buy/wireless/upgradeoptions/modal/?","/buy/wearables/browse/apple_storepickup/recently-viewed/?","/deals/?","/techbuzz/device-how-tos/how-to-activate-wireless-service-on-a-new-phone-with-att/?","/buy/phones/price-details/modal/?","/storeappointment/?","/storeappointment/location\\.aspx/?","/buy/phones/browse/android/recently-viewed/?","/buy/wireless/insurance/?","/buy/checkout/deliveryinfo/?","/acctmgmt/billandpay/?","/buy/wireless/deviceconfig/accessory/?","/buy/wireless/insurancelegal/modal/?","/buy/prepaid-phones/browse/apple/?","/buy/postpaid/phones/error/?","/storeappointment/virtual/modifyconfirmation/?","/support/topic/wireless/topic_intlplans/?","/buy/cart/tradeinoffer/modal/?","/buy/accessories/browse/headphones/airpods/?","/buy/phones/browse/apple/?","/buy/wireless/accessoryconfig/?","/buy/cart/removeallitems/modal/?","/support/article/wireless/KM1009257/?","/buy/wireless/prepaid/plandetails/?","/buy/phones/sort/modal/?","/buy/accessories/store/availability/modal/?","/my/makePaymentReview/?","/my/virtual/managebillingandpayment/?","/buy/tablets/browse/change-zip/modal/?","/buy/wireless/accessories/?","/my/virtual/passthrough/makepaymentconfirmation/?","/acctmgmt/wireless/changeplan/planconfigurator/?","/es-us/buy/wireless/buy/wireless/?","/buy/phones/tradeincreditsinfo/modal/?","/buy/prepaid-phones/browse/your-store/modal/?","/buy/accessories/sort/modal/?","/buy/accessories/browse/internet-tv-equipment/?","/myattapp/virtual/buy/wireless/devicedetails/?","/buy/hub/?","/deals/phone-trade-in/?","/buy/wireless/hardstop/?","/buy/checkout/pet/sendpin/modal/?","/buy/connected-devices-and-more/browse/change-zip/modal/?","/my/virtual/payments/?","/shop/virtual/desktop/storesearch\\.html/?","/acctmgmt/fastpay/makepayment/?","/buy/wearables/browse/samsung/?","/cart/virtual/savecart\\.html/?","/buy/phones/browse/android/?","/buy/checkout/creditVerification/?","/my/ftrDetail/?","/my/virtual/paymenthistory/?","/buy/wireless/deviceplanchange/upgrade-eligibility/?","/acctmgmt/passthrough/atvbillpayments/?","/cart/virtual/emptycart\\.html/?","/support/topic/wireless/topic_intlplans-topic_internationalusagean/?","/buy/checkout/carterror/modal/?","/buy/wireless/deviceplanchange/modal/?","/acctmgmt/registration/opr/choosePassword/?","/cart/mycart\\.html/?","/buy/checkout/deliveryinfo/checkavailability/modal/?","/buy/checkout/accountinfo/?","/buy/wireless/byod/upgrade-eligibility/?","/acctmgmt/atvbillpayments/myupcomingcharges/?","/buy/wireless/insert%20link%20here/?","/buy/tablets/browse/samsung/?","/buy/checkout/payment/?","/buy/upgradeoptions/modal/?","/virtual/easyactivate/insurance/hardstop\\.html/?","/buy/wireless/wireless/upgrade-eligibility/?","/buy/wireless/prepaid/deviceconfig/?","/buy/wireless/select-plans/?","/acctmgmt/accountoverview/?","/acctmgmt/passthrough/accountoverview/?","/buy/wearables/browse/storepickup/recently-viewed/?","/acctmgmt/makepayment/txt2pay/manage/?","/my/viewBill/?","/olam/displaygroupchangerateplan\\.myworld/?","/buy/connected-devices-and-more/browse/right-to-you/modal/?","/plans/wireless/?","/buy/wearables/recently-viewed/?","/acctmgmt/makepayment/confirmation/?","/acctmgmt/internet/confirmation/?","/buy/wearables/browse/apple-watch-series-3/recently-viewed/?","/buy/wearables/browse/apple_used_storepickup/recently-viewed/?","/myattapp/virtual/buy/wireless/insurance/legal/modal/?","/acctmgmt/passthrough/editscheduledpayment/?","/plans/unlimited-data-plans/?","/prepaid/activations/rate-plan\\.html/?","/buy/wearables/browse/apple/?","/buy/wireless/insurancelegal/upgrade-eligibility/?","/acctmgmt/internet/plan-details/?","/shop/wireless/plans/voice/sku7270510\\.html/?","/.*/?","/buy/tablets/browse/apple_5g/recently-viewed/?","/buy/multiaddress/modal/?","/buy/tablets/browse/your-store/modal/?","/acctmgmt/registration/opr/chooseID/?","/checkmyorder/orderSummary\\.rt/?","/stores/?","/buy/connected-devices-and-more/browse/netgear/recently-viewed/?","/buy/prepaid-phones/browse/5g/recently-viewed/?","/myattapp/virtual/buy/wireless/phonedetails/?","/buy/prepaid-phones/browse/lg/recently-viewed/?","/buy/checkout/pet/validatepin/modal/?","/buy/tablets/config/?","/home-phone/plans/?","/dynamic/iamLRR/LrrController/?","/buy/checkout/deliveryinfo/enjoyaddress/modal/?","/buy/upsell/product/modal/?","/buy/tablets/browse/storepickup/recently-viewed/?","/wireless/delivery-and-shipping-options/?","/plans/wireless\\.html/?","/buy/prepaid-phones/browse/change-zip/modal/?","/buy/wearables/browse/samsung_storepickup/recently-viewed/?","/acctmgmt/wireless/changeplan/notificationmessage/modal/?","/buy/tablets/browse/android/recently-viewed/?","/plans/add-a-line/?","/buy/checkout/terms/?","/myorders/orderdetails/updatepayment/modal/?","/buy/prepaid-phones/details/?","/my/virtual/passthrough/makepayment/extendedpaymentarrangement/status/?","/buy/postpaid/tablets/?","/buy/wireless/filteroptions/upgrade-eligibility/?","/plans/tethering/?","/buy/wireless/upgradeoptions/deviceconfig/?","/my/virtual/editfuturepayment/?","/buy/phones/browse/new/?","/buy/wearables/browse/apple-watch-series-5/recently-viewed/?","/checkmyorder/activations/virtual/activatelookingupmodal\\.html/?","/acctmgmt/wireless/changeplan/plandetails/modal/?","/wireless/byod/?","/buy/postpaid/addtionaloffers/?","/buy/checkout/cartviewgoogle\\.com/?","/acctmgnt/makepayment/arrangelatepayment/?","/buy/wireless/storelist/modal/?","/storeappointment/appointmentsearch/?","/buy/phone-grips/offer-details/modal/?","/shop/wireless/plans/planconfigurator\\.html/?","/my/wirelessReview/?","/cart/virtual/checkinstoreavailability\\.html/?","/support/article/my-account/KM1045610/?","/buy/wearables/browse/your-store/zip-no-results/modal/?","/shop/wireless/plans/joingroup\\.html/?","/acctmgmt/atvbillpayments/?","/buy/phones/universal-sim-card-bring-your-own-phone\\.html/?","/acctmgmt/wireless/changeplan/confirmation/?","/buy/postpaid/phones/?","/buy/wireless/devicelegal/devices/?","/my/accountUsers/?","/acctmgmt/registration/opr/secureAccount/?","/buy/postpaid/phones/details/?","/acctmgmt/registration/opr/confirmation/?","/buy/cart/changecolorcapacity/modal/?","/deals/cell-phone-deals/?","/buy/browse/right-to-you/modal/?","/myattapp/virtual/buy/wireless/upgrade-eligibilty/?","/myorders/tradein/?","/buy/devices/?","/buy/phones/browse/apple_new_ios_5g/recently-viewed/?","/buy/bundles/?","/buy/wireless/upgrade-eligibility/accessory/?","/support/?","/buy/phones/recently-viewed/?","/checkout/deliveryinfo/contactinfo/modal/?","/support/topic/wireless/topic_intlplans-topic_internationalpackage/?","/acctmgmt/fastpay/confirmpayment/?","/buy/wireless/filteroptions/modal/?","/buy/wearables/browse/value/recently-viewed/?","/buy/wireless/upgrade-eligibility/deviceconfig/?","/support/topic/my-account/topic_billingpayments1-topic_feeschargesrefundsd6-topic_refundscredits5/?","/acctmgmt/profile/peoplePermissions/?","/buy/wireless/prepaid/cto/modal/?","/buy/wearables/browse/change-zip/modal/?","/buy/wireless/upgrade-eligibility/devices/?","/acctmgmt/registration/preQualification/?","/buy/checkout/billinginfo/?","/buy/wireless/devicecondition/modal/?","/buy/wireless/upgrade-eligibility/upgrade-eligibility/?","/buy/wireless/accessory/?","/olam/displaychangedataplan\\.myworld/?","/buy/tablets/browse/your-store/zip-no-results/modal/?","/plantogglev2-lineselector/modal/?","/buy/chargers/offer-details/modal/?","/buy/checkout/errorcto/modal/?","/checkmyorder/activations/activatewireless\\.rt/?","/support/topic/my-account/topic_billingpayments1-topic_feeschargesrefundsd6/?","/buy/tablets/browse/10-and-under/recently-viewed/?","/buy/prepaid-phones/browse/apple/recently-viewed/?","/mras/virtual/appointment/storesearch/?","/checkmyorder/activations/activatedevice\\.rt/?","/buy/phones/config/.*\\.html/?","/buy/wireless/deviceconfig/?","/buy/connected-devices-and-more/browse/att/recently-viewed/?","/buy/wireless/tradeinofferdetails/modal/?","/shop/xpress/virtual/upgrade-ineligible-tradein\\.html/?","/buy/tablets/browse/samsung_5g/recently-viewed/?","/buy/wearables/universal-sim-card-bring-your-own-wearable\\.html/?","/support/insurancewarranty/activatereplacementdevice/modal/?","/buy/wireless/deviceconfig/accessoryconfig/?","/buy/hub/planfirstbrokenintent/modal/?","/buy/wireless/prepaid/byod/?","/esupport/?","/buy/bundles/hsiaplans/?","/buy/bundles/learn/?","/buy/wearables/browse/your-store/modal/?","/buy/accessories/browse/headphones/?","/buy/wireless/porting/modal/?","/buy/accessories/browse/all/?","/buy/accessoryconfig/?","/buy/prepaid-phones/browse/samsung_new_android_over-100_storepickup/recently-viewed/?","/buy/postpaid/wlsfi/?","/buy/postpaid/wearables/?","/buy/tablets/browse/lenovo/recently-viewed/?","/buy/tablets/browse/right-to-you/modal/?","/buy/wireless/deviceconfig/modal/?","/buy/phones/browse/samsung/recently-viewed/?","/support/topic/wireless/topic_planfeature/?","/acctmgmt/activatewatchtv/?","/buy/wireless/deviceconfig/deviceconfig/?","/buy/wireless/genericlearntradein/modal/?","/acctmgmt/dtvnbillpayments/?","/buy/cart/newprice/modal/?","/acctmgmt/login/?","/buy/postpaid/wearables/config/?","/buy/prepaid-phones/att-fusion-z-prepaid\\.html/?","/buy/wireless/att\\.com/tc/?","/buy/wireless/devicelegal/upgrade-eligibility/?"],"https://tradein\\.att\\.com(?::\\d{1,5})?":["/start-trade/shipping/.*/type/?","/start-trade/shipping/.*/details/?","/start-trade/find/devices/?","/start-trade/search/models/?","/start-trade/device-info/question/.*/?","/?","/contact-us/?","/how-it-works/?","/start-trade/search/capacity/?"]},properties:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={},n=e.substring(1).split("&");return i(n,(function(e){var n=e.split("=");n[1]&&(t[decodeURIComponent(u(n[0]))]=decodeURIComponent(u(n[1])))})),t}(window.location.search),pv:'',sk:'ONE-G8V3SQCVEX-2062',touchpoint:window.location.protocol+"//"+window.location.host,version:"2.0"},l=function(){return(new Date).getTime()},p=function(e){var t=RegExp("; ".concat(e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),"=([^;]*)")).exec("; ".concat(document.cookie||""));if(t)return t[1].replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)},m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.expires&&(n.expires=new Date(l()+864e5*n.expires).toUTCString());var r="".concat(e,"=").concat(t);return i(Object.keys(n),(function(e){r+="; "+e+"="+n[e]})),document.cookie=r};n(1);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var h=function(e){return"function"==typeof e},y=function(e){return e&&"object"===v(e)};function g(e){if(!(this instanceof g))throw new Error("Promise not called with new");if(!h(e))throw new TypeError("Promise not provided a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],S(e,this)}function b(e,t){for(;3===e._state;)e=e._value;var n;0!==e._state?(e._handled=!0,n=function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void T(t.promise,e)}w(t.promise,r)}else(1===e._state?w:T)(t.promise,e._value)},window.setImmediate?window.setImmediate(n):setTimeout(n,0)):e._deferreds.push(t)}function w(e,t){try{if(t===e)throw new Error("Promise cannot resolve itself");if(y(t)||h(t)){var n=t.then;if(t instanceof g)return e._state=3,e._value=t,void E(e);if(h(n))return void S(function(e,t){return function(){e.apply(t,arguments)}}(n,t),e)}e._state=1,e._value=t,E(e)}catch(t){T(e,t)}}function T(e,t){e._state=2,e._value=t,E(e)}function E(e){for(var t=0,n=e._deferreds.length;t<n;t++)b(e,e._deferreds[t]);e._deferreds=null}function N(e,t,n){this.onFulfilled=h(e)?e:null,this.onRejected=h(t)?t:null,this.promise=n}function S(e,t){var n=!1;try{e((function(e){n||(n=!0,w(t,e))}),(function(e){n||(n=!0,T(t,e))}))}catch(e){n=!0,T(t,e)}}g.prototype.catch=function(e){return this.then(null,e)},g.prototype.then=function(e,t){var n=new this.constructor((function(){}));return b(this,new N(e,t,n)),n},g.resolve=function(e){return y(e)&&e.constructor===g?e:new g((function(t){t(e)}))},g.reject=function(e){return new g((function(t,n){n(e)}))};var O=g,_=function(e,t){return window.Promise?new window.Promise(e,t):new O(e,t)},C=function(e){return(window.Promise||O).resolve(e)},P=function(e){return(window.Promise||O).reject(e)},j=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},A=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},x=function e(t,n){return"BODY"===t.nodeName?null:n(t)?t:e(t.parentNode,n)},I=function(e){return!(!e||(r=e.protocol,!r||"http"!==r.substring(0,4))||(n=e.getAttribute("href"),!n||"#"===n.substring(0,1))||(t=e.getAttribute("target"),t&&"_self"!==t&&"_top"!==t&&"_parent"!==t));var t,n,r},R=function(e){return!!e&&!!e.form&&!!e.form.action&&"submit"===e.type};function k(e){var t=function(t){return _((function(n,r){e(t).then(n).catch(r),setTimeout(n,1e3)}))};return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.event,n=e.target||e.srcElement;return!!n._one||(I(x(n,(function(e){return"A"===e.nodeName})))||R(x(n,(function(e){var t=e.nodeName;return"BUTTON"===t||"INPUT"===t})))?(A(e),j(e),n._one=t(n).catch((function(e){return e})).then((function(){return n.click()})).then((function(){return n._one=!1})),!1):(n._one=t(n).catch((function(e){return e})).then((function(){return n._one=!1})),!0))}}function U(e){try{return document.querySelector(function(e){return e.replace(/:eq\((\d*)\)/g,(function(e,t){return":nth-of-type(".concat(Number(t)+1,")")}))}(e))}catch(t){try{return document.evaluate(e,document).iterateNext()}catch(e){return null}}}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=function(e){return null!=e&&""!==e},q=function(e){return"COOKIE"===e.captureType},B=function(e){return"INPUT"===e.nodeName},$=function(e){return function(t){return B(t)&&t.type===e}},F=$("radio"),V=$("checkbox"),J=$("button"),z=function(e){var t=e.nodeName;return B({nodeName:t})||"SELECT"===t||"TEXTAREA"===t},G=function(e){return e.name&&(F(e)||J(e)||"BUTTON"===e.nodeName)};function X(e){return function(t){var n=function(e){return{error:e,point:t}},o=q(t)?p(t.path):U(t.path);if(null==o)return n(1);if("password"===o.type)return n(7);var u,c,a,s=(u=t.captureDelay,(c={}).promise=_((function(e,t){var n=setTimeout(e,u);c.reject=function(e){return clearTimeout(n),t(e)}})),c),f=function(e){return e?q(t)?p(e):"ATTRIBUTE"===t.captureType?e.getAttribute(t.attribute):"TEXT"===t.captureType?J(e)?e.value:F(e)||V(e)?(document.querySelector('[for="'.concat(e.id,'"]'))||e).innerText:e.innerText:V(e)?e.checked:z(e)||G(e)?e.value:e.innerText:null},l=function(){return q(t)?t.path:"SELECT"===o.nodeName&&"VALUE"!==t.captureType?o.options[o.selectedIndex]:G(o)?F(o)?document.querySelector('[name="'.concat(o.name,'"]:checked')):document.querySelector('[name="'.concat(o.name,'"]:focus')):o},m=function(n){return e(D(D({},d.properties),{},H({},t.id,n)))},v=function(){var e=f(l());return L(e)?(m(e),n(0)):n(6)};if(!q(t)){var h=function(){s.reject(20);var e=f(l());return L(e)?m(e):P(6)};G(o)?i(document.getElementsByName(o.name),(function(e){r(e,"click",h)})):!z(a=o)||F(a)||V(a)||J(a)?r(o,"click",k(h)):r(o,"change",h)}if(t.captureDelay>0)return s.promise.then(v).catch(n);try{return v()}catch(e){return n(e)}}}var Y=function(e,t){return _((function(n,r){var o=new XMLHttpRequest;"withCredentials"in o?(o.onreadystatechange=function(){4===o.readyState&&n({response:o.response,status:o.status})},o.open("GET",e,!0),o.withCredentials=!0,o.setRequestHeader("Accept",t),o.send()):r()}))},K=document.getElementsByTagName("head")[0],Q=function(e){return"THX_IP"+(e?" "+e:"")},Z=function(e,t){if("#text"!==e.nodeName){var n=t.getAttribute("width"),r=t.getAttribute("height");e.style.cssText=(t.style.cssText||"")+(n?"width:".concat(n,"px;"):"")+(r?"height:".concat(r,"px;"):"")+(e.style.cssText||""),e.className=Q(t.className+" "+e.className)}return t.parentNode.replaceChild(e,t),0},W=function(e,t){return t.appendChild(e),0},ee=function(e,t){return t.className=Q(t.className),t.innerHTML="",W(e,t)},te=function(e,t,n){return"#text"===e.nodeName?10:(e.className=Q(e.className),t.insertBefore(e,n),0)},ne=function(e,t){switch(e.nodeName){case t.nodeName:case"DIV":case"P":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":return Z(e,t);case"A":if(function e(t){switch(t.parentNode.nodeName){case"BODY":return!1;case"A":return!0;default:return e(t.parentNode)}}(t))return 11;case"SPAN":return"DIV"===t.nodeName||"P"===t.nodeName||"H1"===t.nodeName||"H2"===t.nodeName||"H3"===t.nodeName||"H4"===t.nodeName||"H5"===t.nodeName||"H6"===t.nodeName?ee(e,t):Z(e,t);case"IMG":return"DIV"===t.nodeName||"P"===t.nodeName?ee(e,t):Z(e,t);case"#text":return"OBJECT"!==(r=t.nodeName)&&/\>\<\//.test(document.createElement(r).outerHTML)?ee(e,t):Z((n=e,document.createElement("span").appendChild(n).parentNode),t);default:return 12}var n,r};function re(e,t,n){switch(e.substring(0,1)){case"H":return W(t,K);case"A":return te(t,n.parentNode,n.nextSibling);case"B":return te(t,n.parentNode,n);case"R":return ne(t,n)}}function oe(e){return function(e){if(Array.isArray(e))return ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ie(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ue=function(e){var t,n="<"!==(t=e.split(" ")[0]).substring(0,1)?"":t.substring(1).trim(),r=function(e){switch(e){case"thead":case"tbody":case"tfoot":case"caption":case"colgroup":return["table"];case"col":return["table","colgroup"];case"th":return["table","thead","tr"];case"tr":return["table","tbody"];case"td":return["table","tbody","tr"];default:return null}}(n),i=document.createElement("div"),u=null;return r?(i.innerHTML="<".concat(r.join("><"),">").concat(e),u=i.getElementsByTagName(n)[0]):(i.innerHTML="<br>".concat(e),i.removeChild(i.firstChild),u=function(e){for(var t=0;t<e.childNodes.length;t+=1){var n=e.childNodes[t];if(o=void 0,"SCRIPT"!==(o=n.nodeName)&&"STYLE"!==o&&"LINK"!==o&&("#text"!==(r=n).nodeName||r.nodeValue.trim()))return n}var r,o;return null}(i)),{asset:u,head:o(i.querySelectorAll("script, style, link"),(function(e){return e.parentNode.removeChild(e),"SCRIPT"===e.nodeName?(t=e,(n=document.createElement("script")).type="text/javascript",n.charset="UTF-8",t.src?n.src=t.src:n.text=t.text,n):e;var t,n}))}};function ce(e){return function(t){var n=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{error:e,injections:n,point:t}},u=t.data.actions;if(!u||!u.length)return n(2);var c=u[0].asset;if(!c)return n(3);var a="application/x-thunderhead-control"===c.mimeType;if(!a&&!c.content)return n(3);var s=c.content.trim();if(!a&&!s)return n(4);var f=c.responses;if(!f||!f.length)return n(5);var d=U(t.path);if(!d)return n(1);var l={};i(f,(function(e){l[e.sentiment]=e.code}));var p=function(t,n){n&&r(t,"click",k((function(){return e(n)})))},m=function(e,t){var n=e.querySelectorAll("[".concat("one-asset-response","]"));n.length?i(n,(function(e){p(e,l[e.getAttribute("one-asset-response")])})):p(t||e,l.positive)},v=function(e){for(var r=ue(e),i=r.asset,u=function(e,n){var r=o(n,(function(e){return["HEAD",e]})),i=[t.directives||"REPLACE",e,d];return e?[i].concat(r):r}(i,r.head),c=0;c<u.length;c+=1){var a=re.apply(void 0,oe(u[c]));if(0!==a)return n(a,u)}return i&&m(i.parentNode,"#text"===i.nodeName?i.parentNode:i),n(0,u)};if(a)return m(d),n(0,[["CTRL",c,d]]);if("application/x-thunderhead-external-url"===c.mimeType)return Y(s,"text/html").then((function(e){var t=e.response,n=e.status;return 200===n?t:P(n)})).then(v).catch(n);try{return v(s)}catch(e){return n(e)}}}function ae(e){return function(t){var n=function(e){return{error:e,point:t}},o=U(t.path);if(!o)return n(1);try{return r(o,"click",k((function(){return e((n={},r=t.id,o="",r in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n));var n,r,o}))),n(0)}catch(e){return n(e)}}}var se=function(e,t,n){var r=[];return i(e,(function(e){var o=e.error,i=e.point;1===o&&r.push({error:n(i),retry:t.bind(null,i)})})),r};var fe=_((function(e){"complete"!==document.readyState&&"interactive"!==document.readyState&&document.addEventListener?document.addEventListener("DOMContentLoaded",(function(){e(l())})):e(l())}));var de='_one_MjIxMDAw',le=function(){try{return p(de)||localStorage.getItem(de)||null}catch(e){return null}};function pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var u,c=e[Symbol.iterator]();!(r=(u=c.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return me(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ve=function(e){return t=encodeURIComponent(JSON.stringify(e)),btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))})));var t},he=function(e){return decodeURIComponent(e).replace(/ /g,"%20")},ye=function(e,t){return _((function(n,r){var o=a(e,s({},t,{_:l()})),i=document.createElement("img");i.setAttribute("src",o),i.onload=n,i.onerror=function(){return r({message:"ONE failed to load: ".concat(o),name:"IMAGE Error"})}}))};var ge,be,we,Te,Ee,Ne,Se,Oe,_e,Ce,Pe,je=!d.pv&&p("_one_user_block_tag"),Ae=!!window[d.sk];if(!(je?1:Ae?2:0)){if(window[d.sk]=function(e){var t,n=(t={},{emit:function(e){if(t[e]){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(var i=0;i<t[e].length;i+=1)"function"==typeof t[e][i]&&t[e][i].apply(this,r)}},on:function(e,n){t[e]=t[e]||[];var r=t[e].push(n);return function(){t[e][r-1]=null}}}),r=e.customerApi({tid:le()}),u={},c=function(e,t){var o,c,a,f,d,l,p,m;return u[e]||(u[e]=(o=function(e){return function(t){delete u[e];var o={};return i(t,(function(e){s(o,e)})),r.sendProperties(e,o).then((function(t){return n.emit("propertiesSent",{interaction:e,properties:o,response:t}),t}))}}(e),c=50,l=[],p=_((function(e,t){f=e,a=t})),m=function(){C(o(l)).then(f).catch(a),l.length=0},function(e){return l.push(e),d&&clearTimeout(d),d=setTimeout(m,c),p})),u[e](t)},a=function(e,t){return r.sendResponseCode(e,t).then((function(r){return n.emit("responseCodeSent",{properties:t,response:r,responseCode:e}),r}))},d=function(e,t){return r.sendError(e,t).then((function(r){return n.emit("errorSent",{errorData:t,errorType:e,response:r}),r}))},p=function(e,t){var n=t.sendError,r=t.sendProperties,i=t.sendResponseCode,u=function(t){return _((function(r){var i=[];setTimeout(function t(u,c){return function(){var a=!1,s=3===u,f=o(c,(function(e){var t=e.retry?e.retry():e;return 1===t.error&&u<900?(s&&i.push(e.error),a=!0,e):t}));s&&i.length&&n("DOM_FAILURE",i),a?(e("pointsReprocessed",{results:c,retryCount:u,retryResults:f,tryAgain:a}),setTimeout(t(++u,f),1e3)):r(f)}}(1,t),1e3)}))},c=function(e){return e.data.actions[0].asset.responses[0].code?"_OP_"+f(e.data.actions[0].asset.responses[0].code).match(/op=([^,]*)/)[0].substring(3):null};return{processPoints:function(e,t,u,a){return function(s){var f=t-s,d=ce(i),l=X(r.bind(null,e.interaction)),p=ae(r.bind(null,e.interaction)),m=!a&&u&&f>u?n("TIMEOUT",f/1e3)&&!1:o(e.optimizations,d),v=o(e.captures,l),h=o(e.trackers,p);return{captures:v,domFailures:se(m||[],d,c).concat(se(v,l,(function(e){return e.id}))).concat(se(h,p,(function(e){return e.id}))),optimizations:m,response:e,timeMS:f,trackers:h}}},reprocessPoints:function(e){return function(t){return s(t,{retries:e?u(t.domFailures):P("NO_RETRY")})}}}}(n.emit,{sendError:d,sendProperties:c,sendResponseCode:a}),v=p.processPoints,h=p.reprocessPoints;return s(n,{generatePixelUrl:function(){return r.generatePixelUrl.apply(r,arguments)},getTid:function(){return r.getTid()},processResponse:function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1050;return fe.then(v(t,l(),o,e.getConfig("pv"))).then(h(r)).then((function(e){return n.emit("pointsProcessed",{doRetry:r,response:t,results:e,timeout:o}),e}))},sendError:d,sendInteraction:function(t,o){return r.sendInteraction(t,o).then((function(r){return r.tid&&function(e,t){m(de,e,{domain:t,expires:729,path:"/"});try{localStorage.setItem(de,e)}catch(e){}}(r.tid,r.cookieDomain),0===r.statusCode?n.emit("interactionSkipped",{interaction:t,interactionMap:e.getConfig("interactionMap"),response:r,touchpoint:e.getConfig("touchpoint")}):n.emit("interactionSent",{interaction:t,properties:o,response:r}),r}))},sendProperties:c,sendResponseCode:a})}((Ee=(Te=d).host,Ne=Te.interactionMap,Se=Te.sk,Oe=Te.pv,_e="".concat(Ee,"/one/rt/web/v1/").concat(encodeURIComponent(Se)),Ce=Object.keys(Ne),Pe=function(e){var t=pe(e.match(/^(https?:\/\/[^\/]*)(.*)/i)||[],3),n=t[1],r=t[2];if(!n)return!1;for(var o=0;o<Ce.length;o+=1){var i=Ce[o];if(RegExp("^".concat(i,"$")).test(n))for(var u=0;u<Ne[i].length;u+=1)if(RegExp("^".concat(Ne[i][u],"$")).test(r))return!1}return!0},ge={sendError:function(e,t,n,r){var o=e.tid,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},u=a(r,i),c={errors:n,type:t,uri:u};return ye("".concat(_e,"/error"),{errorrequest:ve(c),pv:Oe,tid:o})},sendInteraction:function(e,t){var n=e.tid,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Pe(he(t)))return C({captures:[],optimizations:[],statusCode:0,statusMessage:"Skipped",trackers:[]});var o=a(t,r),i=a(_e,{flash:!0,pv:Oe,tid:n,uri:o});return Y(i,"application/json").then((function(e){var t=e.response,n=e.status;try{return 200===n?JSON.parse(t):P(JSON.parse(t))}catch(e){return P({error:e})}}))},sendProperties:function(e,t){var n=e.tid,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o(Object.keys(r),(function(e){return{name:e,value:r[e]}}));if(i.length){var u=ve({properties:i,uri:t});return ye("".concat(_e,"/__props.gif"),{apirequest:u,pv:Oe,tid:n})}return P("PROPERTIES_REQUIRED")},sendResponseCode:function(e,t){var n=e.tid,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ye("".concat(Ee,"/one/rt/web/v1/__req.gif"),s({},r,{rid:t,tid:n}))}},be=d,we=function(e){return/:\/\//.test(e)?e:be.touchpoint+e},{customerApi:function(e){var t=function(){return e.tid||null},n=function(e){i(e,(function(e){try{e.data=JSON.parse(f(e.data))}catch(t){e.data={}}}))};return{generatePixelUrl:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=c({pv:be.pv,tid:t(),uri:a(we(e),n)});return"".concat(be.host,"/one/rt/track/").concat(be.sk,"/pixel?").concat(r)},getTid:t,sendError:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return ge.sendError(e,t,n,we(be.interaction),be.properties)},sendInteraction:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=we(t),ge.sendInteraction(e,t,r).then((function(r){return e.tid=r.tid,n(r.optimizations),s(r,{interaction:t})}))},sendProperties:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ge.sendProperties(e,we(t),n)},sendResponseCode:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ge.sendResponseCode(e,t,n)}}},getConfig:function(e){return be[e]}})),"function"==typeof CustomEvent)document.dispatchEvent(new CustomEvent(d.sk));else if(document.createEvent){var xe=document.createEvent("Event");xe.initEvent(d.sk,!0,!0),document.dispatchEvent(xe)}try{n(2).default.call(window,window[d.sk],d)}catch(e){window[d.sk].emit("error",e),window[d.sk].sendError("CUSTOM_TAG")}}}]);