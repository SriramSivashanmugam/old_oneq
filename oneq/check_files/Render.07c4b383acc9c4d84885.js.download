(window.klaviyoOnsiteJSONP=window.klaviyoOnsiteJSONP||[]).push([[7],{"../forms/src/Client/Components/FormComponents/FormComponent/typeToComponentMapping.tsx":function(e,t,o){"use strict";o.d(t,"a",(function(){return ee}));var n=o("../forms/src/Constants/components.ts"),r=o("../../node_modules/preact/compat/dist/compat.module.js"),s=o("../forms/node_modules/react-redux/es/index.js"),i=o("../forms/src/ClientStore/index.ts"),l=o("../../node_modules/@babel/runtime/helpers/extends.js"),a=o.n(l),d=o("../../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js"),c=o.n(d);o("../forms/src/Client/Components/FormComponents/RichText/editorCSS.scss");const m=["html"];var u=e=>{let{html:t}=e,o=c()(e,m);return r.default.createElement("div",a()({},t?{dangerouslySetInnerHTML:{__html:t}}:{},{style:{width:"100%"},className:`${n.o} ${n.l}`},o))},p=o("../forms/src/Constants/quill.ts");var f=({itemId:e,parentType:t=p.a})=>{const o=Object(s.c)(o=>t===p.b?i.y.getTeaserQuillHTML(o,e):i.i.getComponentQuillHTML(o,e));return o?r.default.createElement(u,{html:o}):null},b=o("../forms/src/Client/Components/ResetElements/index.tsx"),g=(o("../../node_modules/core-js/modules/es6.array.iterator.js"),o("../../node_modules/core-js/modules/web.dom.iterable.js"),o("../forms/src/Client/formActions/formActions.ts")),h=o("../forms/src/Constants/actions.ts");const y=["children","actionId","formVersionCId"];var C=e=>{let{children:t,actionId:o,formVersionCId:n}=e,l=c()(e,y);const[a,d]=Object(r.useState)(!1),m=Object(s.c)(e=>o?i.b.getAriaPropsFromFormAction(e,o):{});return t(Object.assign({onClick:o?()=>{if(o){const e=Object(g.a)({actionId:o,formVersionCId:n}),t=new e({actionId:o,formVersionCId:n});h.c.has(e.formActionType)&&d(!0),t.runAction().catch(()=>{d(!1);const e=document.querySelector(`.klaviyo-form-version-cid_${n} [aria-invalid="true"]`);e&&e.focus()})}}:void 0,handlingFormAction:a,ariaProps:m},l))};const x=()=>null;var I=({formVersionCId:e,componentId:t})=>{const o=Object(s.c)(i.e.isDesignWorkflow),n=Object(s.c)(e=>i.i.getComponentStyling(e,t)),l=Object(s.c)(e=>i.i.getComponentImage(e,t)),d=Object(s.c)(e=>i.i.getComponentAltText(e,t)),c=Object(s.c)(e=>i.i.getComponentActionId(e,t)),m=c?b.d:b.e,u=n.width||100;return r.default.createElement(b.b,{style:{display:"flex",alignItems:"center",width:"100%",height:"auto"}},o&&!l?r.default.createElement(x,null):l&&r.default.createElement(C,{actionId:c,formVersionCId:e},({onClick:e,handlingFormAction:t,ariaProps:n})=>r.default.createElement(b.b,{className:t?"klaviyo-spinner":"",style:{position:"relative",display:"flex",alignItems:"center",width:"100%",height:"auto"},onClick:e},r.default.createElement(m,a()({style:{maxWidth:"100%",width:u,height:"auto",cursor:e?"pointer":"initial"},src:l.url,alt:d,tabIndex:o||!c?-1:0},n)))))},v=(o("../../node_modules/core-js/modules/es6.regexp.replace.js"),o("../../node_modules/lodash-es/uniqueId.js")),j=o("../../node_modules/goober/dist/goober.esm.js"),O=o("../forms/src/Utils/onsiteApi/learnq.ts"),S=o("../forms/src/Client/Components/ResetElements/CleaveInput.tsx"),w=o("../forms/src/Client/Components/FormComponents/Label.tsx"),E=o("../forms/src/Client/Components/FormComponents/ValidationMessage.tsx");let k,T=e=>e;var V=({formVersionCId:e,componentId:t,theme:o})=>{var l;const a=Object(s.c)(i.e.isDesignWorkflow),d=Object(s.c)(o=>i.u.getOpenFormVersionComponentInstance(o,e,t)),c=Object(s.c)(e=>i.i.getComponentLabel(e,t)),m=Object(s.c)(e=>i.i.getComponentPlaceholder(e,t)),u=Object(s.c)(e=>i.i.getComponentType(e,t)),p=Object(s.c)(e=>i.i.getComponentFormat(e,t)),f=Object(s.c)(e=>i.i.getComponentDelimiter(e,t)),g=Object(s.c)(e=>i.i.getComponentPrefill(e,t)),h=Object(s.b)(),{current:y}=Object(r.useRef)(Object(v.a)("klaviyo_ariaid_")),[C,x]=Object(r.useState)(!1),[I,V]=Object(r.useState)(!1),[_,$]=Object(r.useState)(),F=({value:o,validate:r,hasChangedSinceLastValidation:s})=>{var l;const a=void 0!==o?o:"";$(a),x(!1),V(!!s),h(i.u.validateOpenFormVersionComponent({formVersionCId:e,componentId:t,value:u===n.c?null==(l=n.e.find(({value:e})=>JSON.stringify(e)===JSON.stringify(p)))?void 0:l.convertValue(a,f):a,validate:r}))};Object(r.useEffect)(()=>{const e=Object(O.b)();if(g&&e&&u===n.g&&!a){const{$email:t}=e;F({value:t,validate:!1})}},[]);const A=I||!1==!a||!d||void 0===d.valid||d.valid,z=u!==n.c||m&&!C?m:null==(l=n.e.find(({value:e})=>JSON.stringify(e)===JSON.stringify(p)))?void 0:l.label.replace(/ /g,f),D=u===n.c?S.a:b.f;return r.default.createElement(b.b,{style:{display:"flex",flexGrow:1,flexDirection:"column",alignSelf:"flex-end"}},r.default.createElement(w.a,{theme:o},c),r.default.createElement(D,{className:Object(j.a)(k||(k=T`
&& {
          &&& {
            &::placeholder {
              color: ${0};
              font-family: ${0};
              font-size: ${0};
              font-weight: ${0};
              letter-spacing: ${0}px;
            }
            &::-moz-placeholder {
              line-height: ${0}px;
            }
            &:hover {
              border-color: ${0} !important;
            }
          }
        }
`),o.inputStyles.textStyles.placeholderColor,o.inputStyles.textStyles.fontFamily,o.inputStyles.textStyles.fontSize,o.inputStyles.textStyles.fontWeight,o.inputStyles.textStyles.letterSpacing,o.inputStyles.textStyles.height,o.inputStyles.border.activeColor),style:Object.assign({boxSizing:"border-box",borderRadius:2,paddingLeft:16,paddingRight:0,paddingTop:0,paddingBottom:0,height:o.inputStyles.textStyles.height,textAlign:"left",color:o.inputStyles.textStyles.formInputTextColor,fontFamily:o.inputStyles.textStyles.fontFamily,fontSize:o.inputStyles.textStyles.fontSize,fontWeight:o.inputStyles.textStyles.fontWeight,letterSpacing:o.inputStyles.textStyles.letterSpacing,backgroundColor:o.inputStyles.inputBackgroundColor,border:"1px solid",borderColor:o.inputStyles.border[A?"defaultColor":"errorColor"]},C?{borderColor:o.inputStyles.border[A?"activeColor":"errorColor"],boxShadow:"0 0 5px "+o.focusColor}:{}),type:(e=>{switch(e){case n.g:return"email";case n.k:return"tel";default:return"text"}})(u),name:u===n.g?"email":void 0,tabIndex:a?-1:0,placeholder:z,"aria-label":(()=>{let e;return e=u===n.c?"date":u===n.g?"email":"text",c||m||e})(),"aria-invalid":!A,"aria-describedby":A?void 0:y,onBlur:e=>F({value:e.target.value,validate:!0,hasChangedSinceLastValidation:!1}),onChange:e=>F({value:e.target.value,validate:!1,hasChangedSinceLastValidation:!0}),onFocus:()=>x(!0),options:u===n.c?{date:!0,datePattern:p,delimiter:f}:{delimiter:""},value:_||""}),!a&&!I&&r.default.createElement(E.a,{theme:o,formVersionCId:e,componentAriaID:y,componentInstance:d}))},_=o("../forms/src/Constants/defaultTheme/button.ts");let $,F=e=>e;const{THEME_KEY:A}=_.a;var z=({componentId:e,formVersionCId:t,theme:o})=>{const n=Object(s.c)(t=>i.i.componentSelectById(t,e)),l=Object(s.c)(t=>i.i.getComponentActionId(t,e)),a=Object(s.c)(i.e.isDesignWorkflow),d=Object(j.a)($||($=F`
&& {
    &&& {
      &:focus {
        box-shadow: 0 0 5px ${0};
      }
      ${0}
    }
  }
`),o.focusColor,!1!==o[A].specifyHoverBackgroundColor?`\n      &:hover {\n        background-color: ${o[A].hoverBackgroundColor} !important;\n        ${o[A].hoverTextColor||o[A].textColor?`color: ${o[A].hoverTextColor||o[A].textColor} !important;`:""}\n      }`:"");return r.default.createElement(C,{formVersionCId:t,actionId:l},({onClick:e,handlingFormAction:t})=>r.default.createElement(b.a,{className:t?"klaviyo-spinner "+d:d,style:Object.assign({background:o[A].backgroundColor,borderRadius:o[A].borderRadius,borderStyle:o[A].borderStyle,borderColor:o[A].borderColor,borderWidth:o[A].borderWidth,color:o[A].textStyles.color,fontFamily:o[A].textStyles.fontFamily,fontSize:o[A].textStyles.fontSize,fontWeight:o[A].textStyles.fontWeight,letterSpacing:o[A].textStyles.letterSpacing,lineHeight:1,whiteSpace:"normal",paddingTop:11,paddingBottom:11,textAlign:"center",wordBreak:"break-word",alignSelf:"flex-end",cursor:"pointer"},o[A].fullWidth?{width:"100%"}:{paddingLeft:10,paddingRight:10}),type:"button",onClick:e,tabIndex:a?-1:0},n.data.content))};o("../../node_modules/core-js/modules/es6.regexp.to-string.js");const D=["selectorType","fillColor","formVersionCId"],M=({fillColor:e})=>r.default.createElement("g",{id:"checkboxInner",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.default.createElement("g",{id:"checkbox_on",transform:"translate(3.000000, 4.000000)",fill:"#303B43"},r.default.createElement("polygon",{id:"Shape",fill:e,points:"4.45454545 9.20149254 1.11363636 5.75373134 0 6.90298507 4.45454545 11.5 14 1.64925373 12.8863636 0.5"}))),R=({fillColor:e})=>r.default.createElement("g",{id:"radioInner",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.default.createElement("g",{id:"Group-17-Copy",transform:"translate(4.000000, 4.000000)",fill:"#303B43"},r.default.createElement("circle",{fill:e,id:"Oval-Copy",cx:"6",cy:"6",r:"5.55555556"})));var N=e=>{let{selectorType:t,fillColor:o}=e,n=c()(e,D);return r.default.createElement("svg",a()({style:{cursor:"pointer",display:"none",position:"absolute",margin:0},width:"20px",height:"20px",viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},n),r.default.createElement("defs",null),"radio"===t?r.default.createElement(R,{fillColor:o}):r.default.createElement(M,{fillColor:o}))};let W,P=e=>e;const B=["selectorType","valid","theme","formVersionCId"],H=({backgroundColor:e})=>r.default.createElement("g",null,r.default.createElement("g",null,r.default.createElement("rect",{strokeWidth:"1",x:"0.5",y:"0.5",width:"19",height:"19",rx:"2.22222222",fill:e}))),L=({backgroundColor:e})=>r.default.createElement("g",null,r.default.createElement("g",null,r.default.createElement("circle",{strokeWidth:"1",cx:"10",cy:"10",r:"9.5",fill:e})));var q=e=>{let{selectorType:t,valid:o,theme:n}=e,s=c()(e,B);return r.default.createElement("svg",a()({className:Object(j.a)(W||(W=P`
&& {
        &&& {
          input:focus + label + label > * {
            filter: drop-shadow(0px 0px 2px ${0});
            stroke: ${0};
          }
        }
      }
`),n.focusColor,n.inputStyles.border.activeColor),style:{stroke:o?n.inputStyles.border.defaultColor:n.inputStyles.border.errorColor,marginRight:8,minWidth:20,width:"auto",height:"auto"},width:"20px",height:"20px",viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},s),"radio"===t?r.default.createElement(L,{backgroundColor:n.inputStyles.inputBackgroundColor}):r.default.createElement(H,{backgroundColor:n.inputStyles.inputBackgroundColor}))};var U=({name:e,label:t,isValid:o,componentAriaID:s,componentType:i,onChange:l,tabIndex:a,theme:d,formVersionCId:c})=>{const{current:m}=Object(r.useRef)(Object(v.a)(e+"__")),u=i===n.m?"radio":"checkbox";return r.default.createElement(r.default.Fragment,null,r.default.createElement(b.f,{style:{position:"absolute",width:0,opacity:0},tabIndex:a,type:u,id:m,name:e,onChange:l,"aria-invalid":!o,"aria-label":t,"aria-describedby":s}),r.default.createElement(b.g,{style:{display:"flex",alignItems:"center",flex:d.inputStyles.arrangement===n.a?" 1 0 100%":" 0 0 auto",paddingBottom:8,wordBreak:"break-word",maxWidth:"100%",cursor:"pointer"},htmlFor:m},r.default.createElement(q,{valid:o,selectorType:u,"aria-hidden":"true",theme:d,formVersionCId:c}),r.default.createElement(N,{selectorType:u,"aria-hidden":"true",formVersionCId:c,fillColor:d.inputStyles.textStyles.formInputTextColor}),r.default.createElement(b.b,{style:{cursor:"pointer",color:d.inputStyles.textStyles.color,fontFamily:d.inputStyles.textStyles.fontFamily,fontSize:d.inputStyles.textStyles.fontSize,fontWeight:d.inputStyles.textStyles.fontWeight,letterSpacing:d.inputStyles.textStyles.letterSpacing,marginRight:24,display:"flex",position:"relative",top:1}},t)))};let K,Y=e=>e;const J=["selected","id","label"],G=({options:e,componentType:t,toggledOptionIndex:o})=>e.reduce((e,r,s)=>{let{selected:i,id:l,label:a}=r,d=c()(r,J),m=t!==n.m&&i;return o===s&&(m=!m),e.push(Object.assign({selected:m,label:a,id:l||Object(v.a)(a+"__")},d)),e},[]);var X=({formVersionCId:e,componentId:t,theme:o})=>{const l=Object(s.c)(i.e.isDesignWorkflow),a=Object(s.c)(o=>i.u.getOpenFormVersionComponentInstance(o,e,t)),d=Object(s.c)(e=>i.i.getComponentType(e,t)),c=Object(s.c)(e=>i.i.getComponentDropdownOptions(e,t)),m=Object(s.c)(e=>i.i.getComponentFieldId(e,t)),u=Object(s.c)(e=>i.i.getComponentLabel(e,t)),p=Object(s.b)(),[f,g]=Object(r.useState)([]);Object(r.useEffect)(()=>{g(G({options:c,componentType:d}))},[c]);const{inputName:h,labelId:y}=Object(r.useMemo)(()=>{const e=Object(v.a)(m+"__");return{inputName:e,labelId:`kl_${e}_label`}},[]),C=l||!a||void 0===a.valid||a.valid;return r.default.createElement(b.b,{className:Object(j.a)(K||(K=Y`
&& {
        &&& {
          input:focus + label > svg circle,
          input:focus + label > svg rect {
            stroke: ${0};
          }
        }
      }
`),o.inputStyles.border.activeColor),style:Object.assign({alignSelf:"flex-end"},o.inputStyles.arrangement===n.a?{display:"block"}:{flexDirection:"column",flexWrap:"wrap"})},r.default.createElement(w.a,{id:y,theme:o,style:{marginRight:8,marginBottom:8}},u),r.default.createElement(b.b,{style:Object.assign({},o.inputStyles.arrangement===n.a?{display:"block"}:{display:"inline-flex",justifyContent:"flex-start",flexWrap:"wrap"}),role:d===n.m?"radiogroup":"group","aria-labelledby":y},f.map(({label:s,id:a},c)=>r.default.createElement(U,{key:a,formVersionCId:e,theme:o,name:h,label:s,isValid:C,componentType:d,componentAriaID:y,onChange:()=>(o=>{const r=G({options:f,componentType:d,toggledOptionIndex:o});g(r);const s=(e=>e.filter(({selected:e})=>e).map(e=>e.value||e.label))(r);p(i.u.validateOpenFormVersionComponent({formVersionCId:e,componentId:t,value:d===n.m?s.toString():s}))})(c),tabIndex:l?-1:0}))),!l&&r.default.createElement(E.a,{theme:o,formVersionCId:e,componentAriaID:y,componentInstance:a}))};var Q=(e,t=(()=>r.default.createElement(r.default.Fragment,null)))=>{function o(o){const[n,s]=r.default.useState(0),i=r.default.useCallback(()=>s(e=>e<5?e+1:e),[]),l=r.default.useMemo(()=>r.default.lazy(()=>e().catch(()=>({default:()=>(i(),r.default.createElement(r.default.Fragment,null))}))),[e,n]);return r.default.createElement(r.default.Suspense,{fallback:r.default.createElement(t,null)},r.default.createElement(l,o))}return o.displayName="LazyLoader",o};const Z=f,ee={[n.h]:I,[n.p]:Z,[n.q]:V,[n.g]:V,[n.k]:Q(()=>Promise.all([o.e(3),o.e(14),o.e(6)]).then(o.bind(null,"../forms/src/Client/Components/FormComponents/PhoneNumberInput/index.ts"))),[n.b]:z,[n.j]:X,[n.m]:X,[n.c]:V,[n.f]:Q(()=>Promise.all([o.e(3),o.e(5)]).then(o.bind(null,"../forms/src/Client/Components/FormComponents/Dropdown/index.ts")))}},"../forms/src/Client/Components/FormComponents/Label.tsx":function(e,t,o){"use strict";var n=o("../../node_modules/@babel/runtime/helpers/extends.js"),r=o.n(n),s=o("../../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js"),i=o.n(s),l=o("../../node_modules/preact/compat/dist/compat.module.js"),a=o("../forms/src/Client/Components/ResetElements/index.tsx");const d=["children","theme","style"];t.a=e=>{let{children:t,theme:o,style:n}=e,s=i()(e,d);return t?l.default.createElement(a.g,r()({style:Object.assign({color:o.inputStyles.textStyles.color,fontFamily:o.inputStyles.textStyles.fontFamily,fontSize:o.inputStyles.textStyles.fontSize,fontWeight:o.inputStyles.textStyles.labelFontWeight,letterSpacing:o.inputStyles.textStyles.letterSpacing,paddingBottom:6},n)},s),t):null}},"../forms/src/Client/Components/FormComponents/ValidationMessage.tsx":function(e,t,o){"use strict";o("../../node_modules/core-js/modules/es6.regexp.replace.js");var n=o("../../node_modules/preact/compat/dist/compat.module.js"),r=o("../forms/node_modules/react-redux/es/index.js"),s=o("../../node_modules/goober/dist/goober.esm.js"),i=o("../forms/src/Client/Components/ResetElements/index.tsx"),l=o("../forms/src/Client/formValidation/isRequired.ts"),a=o("../forms/src/Client/formValidation/email.ts"),d=o("../forms/src/Client/formValidation/date.ts"),c=o("../forms/src/Client/formValidation/phoneNumber.ts"),m=o("../forms/src/Constants/components.ts"),u=o("../forms/src/ClientStore/index.ts");let p,f=e=>e;t.a=({formVersionCId:e,componentInstance:t,componentAriaID:o,theme:b})=>{const g=Object(r.c)(t=>u.q.getFormVersionFormTypeDirection(t,u.u.getOpenFormVersionFormVersionId(t,e))),h=!(null==g||!g.startsWith("BOTTOM")),y=b.inputStyles.textStyles.errorColor;return n.default.createElement(i.b,{style:{width:"100%",position:"relative"}},(null==t?void 0:t.validationErrorType)&&n.default.createElement(i.b,{style:Object.assign({backgroundColor:"white",position:"absolute",zIndex:1,right:0,borderRadius:4,animation:"klaviyo-fadein 0.4s"},h?{bottom:47}:{top:9})},n.default.createElement(i.b,{className:Object(s.a)(p||(p=f`
&& {
              &&& {
                &::after {
                  content: '';
                  display: block;
                  position: absolute;
                  width: 0;
                  height: 0;
                  border-style: solid;
                  left: 8px;
                  border-width: 8px;
                  ${0}
                }
                &::before {
                  content: '';
                  display: block;
                  position: absolute;
                  width: 0;
                  height: 0;
                  border-style: solid;
                  border-width: 9px;
                  left: 7px;
                  ${0};
                }
              }
            }
`),h?"bottom: -15px;\n                  border-color: rgb(248, 236, 233) transparent transparent transparent;":"top: -15px;\n                  border-color: transparent transparent rgb(248, 236, 233) transparent;",h?`bottom: -17px;\n                    border-color: ${y} transparent transparent transparent;`:`top: -17px;\n                    border-color: transparent transparent ${y} transparent;`),style:{borderRadius:4,boxShadow:"1px 1px 4px 0 rgba(0, 0, 0, 0.26)",border:"1px solid "+b.inputStyles.textStyles.errorColor,backgroundColor:"rgb(248, 236, 233)"}},n.default.createElement(i.i,{style:{fontSize:14,padding:8,fontFamily:b.inputStyles.textStyles.fontFamily,color:b.inputStyles.textStyles.errorColor},role:"alert",id:o},(({validationErrorType:e,metadata:t})=>{var o;switch(e){case l.b:return"This field is required";case a.b:return"Please enter a valid email address";case d.b:return`Please enter a valid date format (${null==(o=m.e.find(({value:e})=>JSON.stringify(e)===JSON.stringify(null==t?void 0:t.format)))?void 0:o.label.replace(/ /g,(null==t?void 0:t.delimiter)||"/")})`;case c.b:return"Please enter a valid phone number";default:return""}})(t)))))}},"../forms/src/Client/Components/Modal/Modal.tsx":function(e,t,o){"use strict";o.r(t);o("../../node_modules/core-js/modules/es6.regexp.to-string.js"),o("../../node_modules/core-js/modules/es6.array.iterator.js"),o("../../node_modules/core-js/modules/web.dom.iterable.js");var n=o("../../node_modules/preact/compat/dist/compat.module.js"),r=o("../forms/node_modules/react-redux/es/index.js"),s=o("../forms/src/Constants/defaultTheme/view.ts"),i=o("../forms/src/Constants/formTypes.ts"),l=o("../forms/src/Constants/designer.ts"),a=o("../forms/src/Constants/views.ts"),d=o("../forms/src/Constants/modal.ts"),c=o("../../node_modules/lodash-es/uniqueId.js"),m=o("../../node_modules/goober/dist/goober.esm.js"),u=o("../forms/src/Client/Components/View/index.ts"),p=o("../forms/src/Client/Components/View/Canned/ErrorView.tsx"),f=o("../../node_modules/@babel/runtime/helpers/extends.js"),b=o.n(f),g=o("../../node_modules/lodash-es/merge.js"),h=o("../forms/src/ClientStore/index.ts"),y=o("../forms/src/Client/Components/ResetElements/index.tsx"),C=o("../forms/src/Constants/defaultTheme/clientThemeConstants.ts");const x=()=>null;var I=({formVersionId:e,onClick:t})=>{var o;const s=Object(r.b)(),[i,a]=Object(n.useState)(!1),d=!!Object(r.c)(h.n.getXButtonActive),c=Object(r.c)(h.e.isDesignWorkflow),m=C.a.dismiss,u=null==(o=Object(r.c)(t=>h.q.getFormVersionDataStyling(t,e)))?void 0:o.dismissButtonStyles,p=Object(g.a)({},m,u),f=p.size,I=i||d;return n.default.createElement(n.default.Fragment,null,I&&n.default.createElement(x,{size:f,isSelected:d,$margin:p.margin}),n.default.createElement(y.k,b()({width:f,height:f,tabIndex:0,alt:"Close form",style:{right:0,top:0,position:"absolute",zIndex:6,cursor:"pointer",height:f+"px",width:f+"px",marginRight:p.margin.right+"px",marginTop:p.margin.top+"px"},className:c?"":"klaviyo-close-form",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:t,"aria-describedby":"close-form"},c&&{onClick:()=>{s(h.n.slice.actions.setActiveSidebar({type:l.d}))},onMouseOver:()=>{a(!0)},onMouseLeave:()=>a(!1)}),n.default.createElement("title",{id:"close-form"},"Close form"),n.default.createElement("circle",{style:{cursor:"pointer"},cx:"10",cy:"10",r:"9.5",fill:p.backgroundColor,stroke:p.borderColor}),n.default.createElement("path",{style:{cursor:"pointer"},d:"M6 6L14 14M6 14L14 6L6 14Z",stroke:p.xColor,strokeWidth:p.xStroke,strokeLinecap:"round",strokeLinejoin:"round"})))},v=o("../../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js"),j=o.n(v);const O=["formType","formTypeDirection"],S={LEFT:"slideinleft",TOP_CENTER:"slideinup",BOTTOM_CENTER:"slideindown",RIGHT:"slideinright"},w=({formType:e,formTypeDirection:t})=>{const o=e===i.j?"fadein":S[Object.keys(S).find(e=>t&&t.endsWith(e))];return{animationDuration:e===i.j?"0.5s":"1.5s",animationName:"klaviyo-"+o,animationTimingFunction:"ease",animationPlayState:"running",animationDelay:"0s",animationIterationCount:1,animationDirection:"normal",animationFillMode:"none"}},E=({formTypeDirection:e,modalScale:t})=>{const o={TOP:{top:0},CENTER:{top:"50%",transform:`scale(${t}) translateY(-50%)`,marginTop:"auto",marginBottom:"auto"},BOTTOM:{bottom:0}},n={LEFT:{left:0},CENTER:{left:"50%",transform:`scale(${t}) translateX(-50%)`,marginLeft:"auto",marginRight:"auto"},RIGHT:{right:0}};return Object.assign({},o[Object.keys(o).find(t=>e&&e.startsWith(t))],n[Object.keys(n).find(t=>e&&e.endsWith(t))])},k=e=>{let{formType:t,formTypeDirection:o}=e,r=j()(e,O);return n.default.createElement(y.b,b()({},r,{style:w({formType:t,formTypeDirection:o})}))};var T=o("../forms/src/Utils/isMobile.ts");var V=()=>window.matchMedia("(orientation: landscape)").matches;var _=(e,t)=>{var o,n;let r=e.formType===i.i&&[i.g,i.f].includes(null==(o=e.data)||null==(n=o.flyoutOptions)?void 0:n.docking);Object(T.a)()&&V()&&(r=!1);let s=e.formTypeDirection||null;var l,a;r&&t&&(s=(null==(l=e.data)||null==(a=l.flyoutOptions)?void 0:a.docking)===i.g?i.k:i.a);return{isDocked:r&&t,evaluatedFormTypeDirection:s}};let $,F=e=>e;var A=({closePortal:e,formVersionCId:t,style:o})=>{var a,d;const f=Object(r.c)(e=>h.u.openFormVersionSelectById(e,t)),b=Object(r.c)(e=>h.q.formVersionSelectById(e,f.formVersionId)),g=Object(r.c)(e=>h.q.getFormVersionDismissalConfig(e,b.formVersionId)),C=Object(r.c)(h.n.getMobileDesktopType),x=Object(r.c)(h.e.isDesignWorkflow),v=Object(r.c)(h.u.getTopModalCId),j=Object(r.c)(e=>h.C.getViewDataStylingBorderRadius(e,f.currentViewId)),O=Object(r.c)(e=>h.C.getViewDataStylingDropShadow(e,f.currentViewId)),[S,w]=Object(n.useState)(),E=Object(n.useRef)(null);Object(n.useEffect)(()=>{w(Object(c.a)("modal_animation_key"))},[b.formType,b.formTypeDirection,C]),Object(n.useEffect)(()=>{const o=o=>{var n,r,s;null!=(n=E.current)&&n.contains(o.target)||x||t!==v||null===e||(r=b.formType,void 0!==(s=g)&&r===i.j&&(Object(T.a)()?!0===(null==s?void 0:s.mobile):!0===(null==s?void 0:s.desktop)))||e()};return document.addEventListener("mousedown",o),document.addEventListener("touchstart",o),()=>{document.removeEventListener("mousedown",o),document.removeEventListener("touchstart",o)}},[x,t,v,e,g]);const{isDocked:V,evaluatedFormTypeDirection:A}=_(b,x?C===l.e:Object(T.a)()),z=null==(a=b.data)||null==(d=a.styling)?void 0:d.margin;return S?n.default.createElement(y.b,{ref:E,style:Object.assign({},o,{borderRadius:(j||s.a.theme.borderRadius)+"px",position:"relative",outline:0,display:"flex",justifyContent:"center",flex:"0 0 auto"},b.formType===i.j?{alignSelf:"center"}:{}),"data-testid":C},n.default.createElement(n.Suspense,{fallback:n.default.createElement(y.b,null)},n.default.createElement(k,{key:S,formType:b.formType,formTypeDirection:A,"data-testid":b.formType},(D=n.default.createElement(y.b,{style:Object.assign({},O&&O.enabled?{boxShadow:`0px 0px ${O.blur}px ${O.color}`}:{},j?{borderRadius:j+"px"}:{})},n.default.createElement(y.b,{style:{position:"relative",display:"flex"}},n.default.createElement(I,{formVersionId:f.formVersionId,onClick:e}),f.showErrorView?n.default.createElement(p.a,null):n.default.createElement(u.a,{formVersionCId:t,formVersionId:f.formVersionId,viewId:f.currentViewId,isDocked:V,formTypeDirection:A}))),V?D:n.default.createElement(y.b,{className:Object(m.a)($||($=F`
&& {
            &&& {
              &::before {
                content: '';
                display: block;
                height: ${0}px;
                width: 100%;
              }
              &::after {
                content: '';
                display: block;
                height: ${0}px;
                width: 100%;
              }
            }
          }
`),(null==z?void 0:z.top)||0,(null==z?void 0:z.bottom)||0),style:{position:"relative",flexDirection:"column",display:"flex",marginLeft:null==z?void 0:z.left,marginRight:null==z?void 0:z.right}},D))))):null;var D},z=o("../forms/src/Utils/calculateSideImageSize.ts");t.default=({formVersionCId:e,closePortal:t,className:o})=>{var c,m,u,p;const f=Object(r.c)(t=>h.u.openFormVersionSelectById(t,e)),b=Object(r.c)(e=>h.q.formVersionSelectById(e,f.formVersionId));let g=Object(r.c)(e=>h.C.getViewDataStylingSize(e,f.currentViewId))||s.a.theme.size;const C=Object(r.c)(e=>h.q.getFormVersionSideImage(e,f.formVersionId)),x=null==C||null==(c=C.data)||null==(m=c.styling)?void 0:m.sizeMultiplier,I=x?Object(z.a)(x,g):0,v=Object(r.c)(h.e.isDesignWorkflow),j=Object(r.c)(h.n.getMobileDesktopType),O=j===l.e&&v,{isDocked:S,evaluatedFormTypeDirection:w}=_(b,v?j===l.e:Object(T.a)());(Object(T.a)()||O)&&C&&!C.displayOnMobile&&(g-=I);const k=null==(u=b.data)||null==(p=u.styling)?void 0:p.margin,V=S?0:(null==k?void 0:k.left)||0,$=S?0:(null==k?void 0:k.right)||0,F=Math.max(Math.min(parseInt(g.toString(),10),a.a),a.b)+$+V,D=Object(r.c)(e=>h.C.getViewDataStylingOverlayColor(e,f.currentViewId))||s.a.theme.overlayColor,M=Object(r.c)(e=>{var t;return null==(t=h.C.getViewDataStyling(e,f.currentViewId))?void 0:t.mobileOverlay})||s.a.theme.mobileOverlay,R=Object(r.c)(h.e.isFetchingForms),[N,W]=Object(n.useState)(1);Object(n.useEffect)(()=>{const e=()=>{const e=O?l.f:window.innerWidth,t=S?e/F:Math.min(e/F,1);W(t)};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}},[F,j]);let P={display:"flex",zIndex:v?0:d.a};var B,H;P=j===l.e&&v?Object.assign({},P,{position:"relative",justifyContent:"center",alignItems:(B=b.formType,H=w,B===i.i&&H?H.startsWith("BOTTOM")?"flex-end":H.startsWith("CENTER")?"center":"flex-start":"center"),backgroundColor:b.formType===i.i?(null==M?void 0:M.enabled)&&(null==M?void 0:M.color)||"transparent":D,alignSelf:"center",height:"100%",width:"100%"}):b.formType===i.i?Object.assign({},P,Object.assign({maxHeight:v?"100%":100/N+"%",position:v?"absolute":"fixed",transform:`scale(${N})`,transformOrigin:`${w&&w.endsWith("RIGHT")?"right":"left"} ${w&&w.startsWith("BOTTOM")?"bottom":"top"}`,overflow:v?"initial":"visible"},E({formTypeDirection:w,modalScale:N}))):Object.assign({},P,{position:v?"initial":"fixed",left:0,top:0,width:"100%",height:"100%",justifyContent:"center",alignItems:v?"flex-start":"center",overflow:"auto",backgroundColor:D});let L={};j===l.e&&v?L=Object.assign({position:"absolute",transform:`scale(${N})`,transformOrigin:b.formType===i.i&&w?""+(w.startsWith("BOTTOM")?"bottom":"top"):"center",maxHeight:v?"100%":100/N+"%"},b.formType!==i.i||S||1!==N?{}:E({formTypeDirection:w,modalScale:N})):b.formType===i.j&&(L={overflow:v?"initial":"visible",transform:`scale(${N})`,transformOrigin:"center",maxHeight:v?"100%":100/N+"%"});return q=b.formType===i.i&&Object(T.a)()&&(null==M?void 0:M.enabled),U=n.default.createElement(y.b,{className:o||"",style:P},R?n.default.createElement(y.h,null,"Loading..."):n.default.createElement(A,{closePortal:t,formVersionCId:e,style:L})),q?n.default.createElement(y.b,{style:M&&M.enabled?{backgroundColor:null==M?void 0:M.color,height:"100%",width:"100%",left:0,top:0,position:"fixed",zIndex:d.a}:{}},U):U;var q,U}},"../forms/src/Client/Components/ResetElements/CleaveInput.tsx":function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var n=o("../../node_modules/@babel/runtime/helpers/extends.js"),r=o.n(n),s=o("../../node_modules/preact/compat/dist/compat.module.js"),i=o("../forms/src/Constants/components.ts");const l=s.default.lazy(()=>o.e(16).then(o.t.bind(null,"../../node_modules/cleave.js/react.js",7))),a=e=>s.default.createElement(s.Suspense,{fallback:s.default.createElement("div",null)},s.default.createElement(l,r()({},e,{className:`needsclick ${e.className} ${i.o}`})))},"../forms/src/Client/Components/ResetElements/index.tsx":function(e,t,o){"use strict";o.d(t,"b",(function(){return m})),o.d(t,"c",(function(){return u})),o.d(t,"a",(function(){return p})),o.d(t,"h",(function(){return f})),o.d(t,"e",(function(){return b})),o.d(t,"i",(function(){return g})),o.d(t,"j",(function(){return h})),o.d(t,"f",(function(){return y})),o.d(t,"d",(function(){return C})),o.d(t,"k",(function(){return x})),o.d(t,"g",(function(){return I}));var n=o("../../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js"),r=o.n(n),s=o("../../node_modules/@babel/runtime/helpers/extends.js"),i=o.n(s),l=o("../../node_modules/preact/compat/dist/compat.module.js"),a=o("../forms/src/Constants/components.ts");o("../forms/src/Client/client.scss");const d=["tabIndex","className","alt"],c=["tabIndex","className","style","alt"],m=l.default.forwardRef((e,t)=>l.default.createElement("div",i()({ref:t},e,{className:`needsclick ${e.className||""} ${a.o}`}))),u=l.default.forwardRef((e,t)=>l.default.createElement("form",i()({ref:t},e,{className:`needsclick ${e.className||""} ${a.o}`}))),p=l.default.forwardRef((e,t)=>l.default.createElement("button",i()({ref:t},e,{className:`needsclick ${e.className||""} ${a.o}`}),e.children)),f=l.default.forwardRef((e,t)=>l.default.createElement("p",i()({ref:t},e,{className:`needsclick ${e.className||""} ${a.o}`}))),b=l.default.forwardRef((e,t)=>l.default.createElement("img",i()({ref:t},e,{className:`needsclick ${e.className||""} ${a.o}`}))),g=l.default.forwardRef((e,t)=>l.default.createElement("span",i()({ref:t},e,{className:`needsclick ${e.className||""} ${a.o}`}))),h=l.default.forwardRef((e,t)=>l.default.createElement("svg",i()({ref:t},e,{className:`needsclick ${e.className||""} ${a.o}`}))),y=l.default.forwardRef((e,t)=>l.default.createElement("input",i()({ref:t},e,{className:`needsclick ${e.className||""} ${a.o}`}))),C=e=>{let{tabIndex:t,className:o,alt:n}=e,s=r()(e,d);return l.default.createElement(p,{type:"button",tabIndex:t,className:o},l.default.createElement(b,i()({alt:n},s)))},x=e=>{let{tabIndex:t,className:o,style:n}=e,s=r()(e,c);return l.default.createElement(p,{tabIndex:t,className:o,style:n},l.default.createElement(h,i()({role:"img"},s),s.children))},I=l.default.forwardRef((e,t)=>l.default.createElement("label",i()({ref:t},e,{className:`needsclick ${e.className||""} ${a.o}`})))},"../forms/src/Client/Components/Teaser/Teaser.tsx":function(e,t,o){"use strict";o.r(t);var n=o("../../node_modules/preact/compat/dist/compat.module.js"),r=o("../forms/node_modules/react-redux/es/index.js"),s=(o("../../node_modules/core-js/modules/es6.array.iterator.js"),o("../../node_modules/core-js/modules/web.dom.iterable.js"),o("../../node_modules/lodash-es/uniqueId.js")),i=o("../forms/src/Constants/formTypes.ts"),l=o("../forms/src/ClientStore/index.ts"),a=o("../forms/src/Utils/isMobile.ts"),d=o("../forms/src/Client/Components/ResetElements/index.tsx"),c=o("../forms/src/Client/Components/FormComponents/FormComponent/typeToComponentMapping.tsx"),m=o("../forms/src/Constants/quill.ts");var u=({closePortal:e,formVersionCId:t})=>{const o=Object(r.c)(e=>l.u.openFormVersionSelectById(e,t)),u=Object(r.c)(e=>l.q.formVersionSelectById(e,o.formVersionId)),p=Object(r.c)(e=>l.q.getFormVersionDismissalConfig(e,u.formVersionId)),f=Object(r.c)(l.n.getMobileDesktopType),b=Object(r.c)(l.e.isDesignWorkflow),g=Object(r.c)(l.u.getTopModalCId),h=Object(r.c)(e=>l.y.teasersByFormVersion(e,u.formVersionId))[0],[y,C]=Object(n.useState)(),x=Object(n.useRef)(null);Object(n.useEffect)(()=>{C(Object(s.a)("modal_animation_key"))},[u.formType,u.formTypeDirection,f]),Object(n.useEffect)(()=>{const o=o=>{var n,r,s;null!=(n=x.current)&&n.contains(o.target)||b||t!==g||null===e||(r=u.formType,void 0!==(s=p)&&r===i.j&&(Object(a.a)()?!0===(null==s?void 0:s.mobile):!0===(null==s?void 0:s.desktop)))||e()};return document.addEventListener("mousedown",o),document.addEventListener("touchstart",o),()=>{document.removeEventListener("mousedown",o),document.removeEventListener("touchstart",o)}},[b,t,g,e,p]);const I=c.a.TEXT;return y?n.default.createElement(d.b,null,n.default.createElement(n.Suspense,{fallback:n.default.createElement(d.b,null)},n.default.createElement(I,{itemId:h.teaserId,parentType:m.b}))):null},p=o("../forms/src/Constants/designer.ts"),f=o("../forms/src/Constants/modal.ts"),b=o("../forms/src/Constants/teasers.ts");const g={[b.e]:{[i.l]:{},[i.k]:{},[i.m]:{},[i.d]:{},[i.e]:{},[i.b]:{},[i.a]:{},[i.c]:{}},[b.a]:{[i.l]:{},[i.k]:{},[i.m]:{},[i.d]:{},[i.e]:{},[i.b]:{},[i.a]:{},[i.c]:{}},[b.b]:{[i.l]:{clipPath:"polygon(100% 0, 0 100%, 0 0)"},[i.m]:{clipPath:"polygon(100% 100%, 0 0, 100% 0)"},[i.b]:{clipPath:"polygon(0 0, 0 100%, 100% 100%)"},[i.c]:{clipPath:"polygon(100% 100%, 0 100%, 100% 0)"}}},h=({theme:e,type:t,direction:o})=>{const n=Math.sqrt(e.size*e.size*2)/2,r=Math.sqrt(e.size*e.size-n*n);return{[b.e]:{[i.k]:{},[i.d]:{writingMode:"vertical-lr",transform:"rotate(180deg)"},[i.e]:{writingMode:"vertical-lr"},[i.a]:{}},[b.a]:{[i.d]:{width:e.size-16},[i.e]:{width:e.size-16}},[b.b]:{[i.l]:{width:Math.sqrt(e.size*e.size*2),transform:"rotate(-45deg)",transformOrigin:"top left",top:e.size/2,left:-1*e.size/2,position:"relative",height:r,display:"flex",flexDirection:"column-reverse",alignItems:"center"},[i.m]:{width:Math.sqrt(e.size*e.size*2),transform:"rotate(45deg)",transformOrigin:"top left",top:-1*e.size/2,left:e.size/2,position:"relative",height:r,display:"flex",flexDirection:"column-reverse",alignItems:"center"},[i.b]:{height:e.size-16,width:Math.sqrt(e.size*e.size*2),transform:"rotate(45deg)",transformOrigin:"top left"},[i.c]:{height:e.size-16,width:Math.sqrt(e.size*e.size*2),position:"relative",top:e.size,left:0,transform:"rotate(-45deg)",transformOrigin:"top left"}}}[t][o]||{}};t.default=({formVersionCId:e,closePortal:t,className:o})=>{var s,c;const m=Object(r.c)(l.e.isDesignWorkflow),y=Object(r.c)(t=>l.u.openFormVersionSelectById(t,e)),C=Object(r.c)(e=>l.q.formVersionSelectById(e,y.formVersionId)),x=Object(r.c)(l.n.getMobileDesktopType)===p.e||Object(a.a)(),I=Object(r.c)(e=>l.y.teasersByFormVersion(e,C.formVersionId))[0],v=Object(r.c)(e=>l.y.getTeaserTheme(e,I.teaserId)),j=Object(r.b)(),O=I.type===b.e&&((null==(s=I.direction)?void 0:s.includes("TOP"))||(null==(c=I.direction)?void 0:c.includes("BOTTOM")))&&x,S={theme:v,type:I.type,direction:I.direction},w=Object.assign({zIndex:m?0:f.a,position:"absolute",overflow:"hidden",filter:`drop-shadow(0px 0px ${v.dropShadow.blur}px ${v.dropShadow.color})`},(({theme:e,type:t,direction:o})=>{const n=e.margin.left,r=e.margin.top;return{[b.e]:{[i.l]:{top:0,left:0,margin:`${r}px ${n}px`},[i.k]:{top:0,left:"50%",transform:`translate(calc(-50% - ${n}px))`,margin:`${r}px ${n}px`},[i.m]:{top:0,right:0,margin:`${r}px ${n}px`},[i.d]:{left:0,margin:`${n}px ${r}px`,top:`calc(50% - ${n}px)`,transform:"translateY(-50%)"},[i.e]:{right:0,margin:`${n}px ${r}px`,top:`calc(50% - ${n}px)`,transform:"translateY(-50%)"},[i.b]:{bottom:0,left:0,margin:`${r}px ${n}px`},[i.a]:{bottom:0,left:"50%",transform:`translate(calc(-50% - ${n}px))`,margin:`${r}px ${n}px`},[i.c]:{bottom:0,right:0,margin:`${r}px ${n}px`}},[b.a]:{[i.l]:{top:0,left:0,margin:`${r}px ${n}px`},[i.k]:{top:0,left:"50%",transform:`translate(calc(-50% - ${n}px))`,margin:`${r}px ${n}px`},[i.m]:{top:0,right:0,margin:`${r}px ${n}px`},[i.d]:{left:0,margin:`${n}px ${r}px`,top:`calc(50% - ${n}px)`,transform:"translateY(-50%)"},[i.e]:{right:0,margin:`${n}px ${r}px`,top:`calc(50% - ${n}px)`,transform:"translateY(-50%)"},[i.b]:{bottom:0,left:0,margin:`${r}px ${n}px`},[i.a]:{bottom:0,left:"50%",transform:`translate(calc(-50% - ${n}px))`,margin:`${r}px ${n}px`},[i.c]:{bottom:0,right:0,margin:`${r}px ${n}px`}},[b.b]:{[i.l]:{top:0,left:0,height:e.size,width:e.size,margin:`${r}px ${n}px`},[i.m]:{top:0,right:0,height:e.size,width:e.size,margin:`${r}px ${n}px`},[i.b]:{bottom:0,left:0,height:e.size,width:e.size,margin:`${r}px ${n}px`},[i.c]:{bottom:0,right:0,height:e.size,width:e.size,margin:`${r}px ${n}px`}}}[t][o]})(S),(({theme:e,type:t,direction:o})=>({[b.e]:{[i.l]:{maxHeight:64,width:e.size-16},[i.k]:{maxHeight:64,width:e.size-16},[i.m]:{maxHeight:64,width:e.size-16},[i.d]:{maxWidth:64,height:e.size-16},[i.e]:{maxWidth:64,height:e.size-16},[i.b]:{maxHeight:64,width:e.size-16},[i.a]:{maxHeight:64,width:e.size-16},[i.c]:{maxHeight:64,width:e.size-16}},[b.a]:{[i.l]:{height:e.size-16,width:e.size-16},[i.k]:{height:e.size-16,width:e.size-16},[i.m]:{height:e.size-16,width:e.size-16},[i.d]:{width:e.size-16,height:e.size-16},[i.e]:{width:e.size-16,height:e.size-16},[i.b]:{height:e.size-16,width:e.size-16},[i.a]:{height:e.size-16,width:e.size-16},[i.c]:{height:e.size-16,width:e.size-16}},[b.b]:{[i.l]:{},[i.m]:{},[i.b]:{},[i.c]:{}}}[t][o]||{}))(S),((e,t,o)=>{const n={};switch(t){case b.e:n.borderRadius=((e,t)=>{const o=e.margin.top,n=e.margin.left;let[r,s,i,l]=[e.borderRadius,e.borderRadius,e.borderRadius,e.borderRadius];return null!=t&&t.includes("BOTTOM")&&0===o&&(i=0,l=0),null!=t&&t.includes("TOP")&&0===o&&(s=0,r=0),null!=t&&t.includes("LEFT")&&0===n&&(r=0,l=0),null!=t&&t.includes("RIGHT")&&0===n&&(s=0,i=0),null!=t&&t.includes("CENTER")&&null!=t&&t.includes("LEFT")&&0===o&&(r=0,l=0),null!=t&&t.includes("CENTER")&&null!=t&&t.includes("RIGHT")&&0===o&&(s=0,i=0),`${r}px ${s}px ${i}px ${l}px`})(e,o);break;case b.a:n.borderRadius="50%"}return n})(v,I.type,I.direction),O?{width:`calc(100% - ${2*v.margin.left}px)`}:{}),E=Object.assign({},g[I.type][I.direction]||{},(k=v,Object.assign({backgroundColor:k.backgroundColor},k.backgroundImage?{backgroundImage:k.backgroundImage&&`url(${k.backgroundImage.url})`,backgroundRepeat:"no-repeat",backgroundSize:k.backgroundImage&&("custom"===k.backgroundImage.position?k.backgroundImage.customWidth+"px":k.backgroundImage.position),backgroundPositionX:k.backgroundImage&&k.backgroundImage.alignment,backgroundPositionY:(null==(T=k.backgroundImage)?void 0:T.verticalAlignment)||"center"}:{})),b.e===I.type||b.a===I.type?{height:"calc(100% - 16px)",padding:8}:{height:"100%"},I.type===b.b?{display:"block"}:{display:"flex",flexDirection:"column",justifyContent:"center"});var k,T;return I?n.default.createElement(d.b,{className:`kl-teaser-${C.formId} ${o}`,style:w,onClick:()=>m?null:j(l.u.updateCurrentTeaser({id:e,changes:{currentTeaserId:null}}))},n.default.createElement(d.i,{style:E},n.default.createElement(d.b,{style:h(S)},n.default.createElement(u,{closePortal:t,formVersionCId:e})))):null}},"../forms/src/Client/Components/View/Canned/ErrorView.tsx":function(e,t,o){"use strict";var n=o("../../node_modules/preact/compat/dist/compat.module.js"),r=o("../forms/src/Client/Components/ResetElements/index.tsx");t.a=({isEmbed:e=!1})=>n.default.createElement(r.b,{style:{width:e?"100%":450,height:165,display:"flex",justifyContent:"center",alignItems:"center",background:"#ffffff"}},n.default.createElement(r.b,{style:{textAlign:"center",width:300}},"An error occured when submitting. Please try again later."))},"../forms/src/Client/Components/View/index.ts":function(e,t,o){"use strict";o("../../node_modules/core-js/modules/es6.array.sort.js");var n=o("../../node_modules/preact/compat/dist/compat.module.js"),r=o("../forms/node_modules/react-redux/es/index.js"),s=o("../forms/src/Client/formActions/formActions.ts"),i=o("../forms/src/Constants/designer.ts"),l=o("../forms/src/Constants/formTypes.ts"),a=o("../forms/src/Constants/views.ts"),d=o("../../node_modules/@babel/runtime/helpers/extends.js"),c=o.n(d);o("../../node_modules/core-js/modules/es6.array.iterator.js"),o("../../node_modules/core-js/modules/web.dom.iterable.js");var m=o("../../node_modules/lodash-es/merge.js"),u=o("../forms/src/Constants/defaultTheme/formComponent.ts"),p=o("../forms/src/ClientStore/index.ts"),f=o("../forms/src/Client/Components/FormComponents/FormComponent/typeToComponentMapping.tsx"),b=o("../forms/src/Client/Components/ResetElements/index.tsx");const g=({children:e})=>e,h={outer:{right:"0 0 0 auto",left:"0 auto 0 0",center:"0 auto"},inner:{right:"flex-end",left:"flex-start",center:"center"}};var y=({componentId:e,componentPosition:t,formVersionCId:o,rowDroppableHover:s,setDragState:l,dragFinished:a})=>{const[d,y]=Object(n.useState)(!1),C=Object(n.useRef)(null),x=Object(r.b)(),I=Object(r.c)(t=>p.i.componentSelectById(t,e),(e,t)=>JSON.stringify(e)===JSON.stringify(t)),v=Object(r.c)(p.e.isDesignWorkflow),j=Object(r.c)(p.n.getActiveComponentId),{currentViewId:O}=Object(r.c)(e=>p.u.openFormVersionSelectById(e,o)),S=Object(r.c)(t=>p.i.getComponentTheme(t,e,O),(e,t)=>JSON.stringify(e)===JSON.stringify(t)),w=Object(r.c)(e=>p.C.getViewTheme(e,O)),E=Object(n.useMemo)(()=>Object(m.a)({},w,S,{[u.a.THEME_KEY]:I.data.styling}),[w,S,I.data.styling]),k=f.a[I.componentType],T=j===I.componentId,V=Object.assign({component:I},v?{onClick:()=>{x(p.n.slice.actions.setActiveSidebar({type:i.b,key:e}))},onMouseOver:()=>{a?l(!1):y(!0)},onMouseLeave:()=>y(!1),onDragStart:()=>y(!1),onDragEnd:()=>{l(!0)},ref:C}:{});return n.default.createElement(b.b,c()({style:Object.assign({display:"flex",justifyContent:h.inner[I.data.styling.innerAlignment]||"flex-start",padding:`${E[u.a.THEME_KEY].padding.top||0}px ${E[u.a.THEME_KEY].padding.right||0}px ${E[u.a.THEME_KEY].padding.bottom||0}px ${E[u.a.THEME_KEY].padding.left||0}px`,position:"relative"},E[u.a.THEME_KEY].blockBackgroundColor?{backgroundColor:E[u.a.THEME_KEY].blockBackgroundColor}:{},d?{cursor:"pointer"}:{},{flex:!1!==I.data.styling.fullWidth?"1 0 0":"0 1 auto"},!1===I.data.styling.fullWidth&&I.data.styling.alignment?{margin:h.outer[I.data.styling.alignment]}:{})},V,{"data-testid":"form-component",className:void 0}),v?n.default.createElement(g,{theme:E,active:T,componentId:e,componentPosition:t,componentRef:C.current,formVersionCId:o,isHovering:d,rowDroppableHover:s,setIsHovering:y},n.default.createElement(k,{theme:E,componentId:e,formVersionCId:o,itemId:e})):n.default.createElement(k,{theme:E,componentId:e,formVersionCId:o,itemId:e}))};var C=({rowId:e,formVersionCId:t})=>{const o=Object(r.c)(t=>p.w.getRowComponentIds(t,e)),[s,i]=Object(n.useState)(!1),[l,a]=Object(n.useState)(!1),[d,c]=Object(n.useState)(!1),m=(s?"top":l&&"bottom")||!1;return o.length?n.default.createElement(b.b,{"data-testid":"form-row",style:Object.assign({display:"flex",flexDirection:"row",alignItems:"stretch",position:"relative"},m?Object.assign({},"bottom"===m?{borderBottom:"2px",borderBottomStyle:"solid",borderBottomColor:"#2B98D3",marginBottom:"-2px"}:{borderTop:"2px",borderTopStyle:"solid",borderTopColor:"#2B98D3",marginTop:"-2px"}):{})},o.map((e,o)=>n.default.createElement(y,{key:e,componentId:e,componentPosition:o,formVersionCId:t,rowDroppableHover:(e,t)=>{"top"===e?i(t):a(t)},setDragState:e=>c(e),dragFinished:d})),null):null},x=o("../forms/src/Utils/isMobile.ts");const I=({children:e})=>e;var v=({columnId:e,formVersionCId:t,formVersionId:o,viewId:s,sideImageExistsAndHidden:l})=>{var a,d,m,u,f,g,h,y;const v=Object(r.b)(),j=Object(n.useRef)(null),[O,S]=Object(n.useState)(!1),w=Object(r.c)(p.e.isDesignWorkflow),E=Object(r.c)(e=>p.q.getFormVersionSideImage(e,o)),k=Object(r.c)(t=>p.g.getColumnRowIds(t,e)),T=Object(r.c)(t=>p.g.columnSelectById(t,e)),V=Object(r.c)(e=>p.C.getViewTheme(e,s)),_=Object(r.c)(e=>p.n.getActiveColumnId(e)),{padding:$,minimumHeight:F}=V,A=void 0!==(null==(a=T.data)||null==(d=a.styling)?void 0:d.sizeMultiplier)&&0===T.rows.length,{columnMargin:z,columnPadding:D}=((e,t,o,n)=>{const r={top:0,left:0,right:0,bottom:0},s={top:0,left:0,right:0,bottom:0};return n||void 0!==o&&(e?(r.top=t&&t.top?-1*t.top:0,r.bottom=t&&t.bottom?-1*t.bottom:0,0===o?r.left=t&&t.left?-1*t.left:0:1===o&&(r.right=t&&t.right?-1*t.right:0)):0===o?s.left=(null==t?void 0:t.left)||0:1===o&&(s.right=(null==t?void 0:t.right)||0)),{columnMargin:r,columnPadding:s}})(A,$,null==E?void 0:E.position,l),M=null==T||null==(m=T.data)||null==(u=m.styling)?void 0:u.sizeMultiplier,R=null==V?void 0:V.size,N=M&&R?((e,t,o)=>{const n=e/(e+1)*t;return o?n:t-n})(M,R,A):0,W=_===T.columnId,P=(null==V?void 0:V.borderStyle)&&"none"!==(null==V?void 0:V.borderStyle)&&(null==V?void 0:V.borderWidth)||0,B=null==T||null==(f=T.data)||null==(g=f.styling)?void 0:g.backgroundImage,H=null==T||null==(h=T.data)||null==(y=h.styling)?void 0:y.backgroundColor,L=Object.assign({},w&&A?{onClick:()=>{v(p.n.slice.actions.setActiveSidebar({type:i.a,key:e}))},onMouseOver:()=>{S(!0)},onMouseLeave:()=>S(!1),ref:j}:{}),q=Object(r.c)(e=>p.n.getMobileDesktopType(e))===i.e;return((e,t,o,n)=>{var r,s,i,l,a;const d=(null==(r=e.rows)?void 0:r.length)>0,c=(null==e||null==(s=e.data)||null==(i=s.styling)?void 0:i.backgroundImage)||(null==e||null==(l=e.data)||null==(a=l.styling)?void 0:a.backgroundColor);return!!d||(o?!n||t:!!c&&(!Object(x.a)()||t))})(T,(null==E?void 0:E.displayOnMobile)||!1,w,q)?n.default.createElement(n.default.Fragment,null,n.default.createElement(b.b,c()({style:Object.assign({display:"flex",flexDirection:"column",width:N?N+"px":"100%",marginTop:z.top+"px",marginBottom:z.bottom+"px",marginLeft:z.left+"px",marginRight:z.right+"px",paddingTop:D.top+"px",paddingBottom:D.bottom+"px",paddingLeft:D.left+"px",paddingRight:D.right+"px",backgroundColor:H},O?{cursor:"pointer"}:{},N?{minWidth:N+"px"}:{},B?{backgroundImage:`url(${B.url})`,backgroundRepeat:"no-repeat",backgroundSize:"custom"===B.position?B.customWidth+"px":B.position,backgroundPositionX:B.alignment,backgroundPositionY:B.verticalAlignment||"center"}:{},void 0!==F?{minHeight:F+"px"}:{},A?{}:{justifyContent:"center"})},null!=B&&B.altText?{title:null==B?void 0:B.altText}:{},L),n.default.createElement(I,{backgroundColorExists:!!H,backgroundImageExists:!!B,calculatedWidth:N,column:T,isDesignWorkflow:w,isHovering:O,isSelected:W,isSideImageColumn:A,viewBorderWidth:P,viewSize:R},null==k?void 0:k.map(e=>n.default.createElement(C,{key:e,rowId:e,formVersionCId:t}))))):null},j=o("../forms/src/Utils/calculateSideImageSize.ts");const O={left:{float:"left"},center:{margin:"0 auto"},right:{float:"right"}},S=(e,t,o)=>t?null!=o&&o.includes("BOTTOM")?`${e}px ${e}px 0 0`:`0 0 ${e}px ${e}px`:e+"px";var w=({viewId:e,isEmbed:t,formVersionId:o,formVersionCId:d,isDocked:c,formTypeDirection:m})=>{var u,f,g;const h=Object(r.c)(e=>p.q.formVersionSelectById(e,o)),y=Object(r.c)(t=>p.C.getViewColumnIds(t,e)),C=Object(r.c)(e=>p.g.columnSelectAll(e)).filter(e=>y.includes(e.columnId)).sort((e,t)=>e.position-t.position),I=Object(r.c)(t=>p.i.getSubmitFormActionsFromView(t,e)),w=Object(r.c)(t=>p.C.getViewTheme(t,e)),E=Object(r.c)(e=>p.q.getFormVersionSideImage(e,o)),k=null==E||null==(u=E.data)||null==(f=u.styling)?void 0:f.sizeMultiplier,T=k?Object(j.a)(k,w.size):0,V=Object(r.c)(t=>p.g.getViewColumns(t,e)).find(e=>e.position===(null==E?void 0:E.position)),_=Object(r.c)(p.e.isDesignWorkflow),$=Object(r.c)(e=>p.n.getMobileDesktopType(e))===i.e,F=((e,t,o,n,r)=>{var s,i,l,a;const d=!o&&(Object(x.a)()&&!t||t&&r),c=!t&&e&&!(null!=n&&null!=(s=n.data)&&null!=(i=s.styling)&&i.backgroundImage||null!=n&&null!=(l=n.data)&&null!=(a=l.styling)&&a.backgroundColor);return d||c})(!!E,_,null==E?void 0:E.displayOnMobile,V,$),A=F?w.size-T:void 0,z=Object(n.useRef)(null);return Object(n.useEffect)(()=>{const e=z.current;h.formType===l.j&&e&&e.focus()},[z]),n.default.createElement(b.c,{style:Object.assign({display:"flex",flexDirection:"row",boxSizing:"border-box"},t?Object.assign({width:"100%",overflow:"visible"},w.isMaxWidth?{maxWidth:w.size+"px"}:{},w.embedAlignment?O[w.embedAlignment]:{}):{overflow:"hidden",width:(A||w.size)+"px",minWidth:a.b+"px",maxWidth:a.a+"px"},{borderRadius:""+S(w.borderRadius,c,m),borderStyle:w.borderStyle,borderWidth:(w.borderWidth||0)+"px",borderColor:w.borderColor,backgroundColor:w.backgroundColor,backgroundImage:w.backgroundImage&&`url(${w.backgroundImage.url})`,backgroundRepeat:"no-repeat",backgroundSize:w.backgroundImage&&("custom"===w.backgroundImage.position?w.backgroundImage.customWidth+"px":w.backgroundImage.position),backgroundPositionX:w.backgroundImage&&w.backgroundImage.alignment,backgroundPositionY:(null==(g=w.backgroundImage)?void 0:g.verticalAlignment)||"center",paddingTop:w.padding.top+"px",paddingRight:w.padding.right+"px",paddingBottom:w.padding.bottom+"px",paddingLeft:w.padding.left+"px"}),className:"klaviyo-form klaviyo-form-version-cid_"+d,"data-testid":"klaviyo-form-"+h.formId,noValidate:!0,ref:z,tabIndex:-1,onSubmit:async e=>{if(e.preventDefault(),1!==I.length)return!1;const{actionId:t}=I[0],o=Object(s.a)({actionId:t,formVersionCId:d});return await new o({actionId:t,formVersionCId:d}).runAction(),!0}},C.map(t=>n.default.createElement(v,{key:t.columnId,columnId:t.columnId,formVersionCId:d,formVersionId:o,viewId:e,sideImageExistsAndHidden:F})),n.default.createElement("input",{style:{display:"none"},type:"submit",tabIndex:-1,value:"Submit"}))};t.a=w},"../forms/src/Client/Render.tsx":function(e,t,o){"use strict";o.r(t);var n=o("../../node_modules/preact/compat/dist/compat.module.js"),r=o("../forms/node_modules/react-redux/es/index.js"),s=o("../../node_modules/preact/dist/preact.module.js"),i=o("../../node_modules/goober/dist/goober.esm.js"),l=o("../forms/src/ClientStore/store.ts"),a=o("../../node_modules/@babel/runtime/helpers/extends.js"),d=o.n(a),c=o("../../node_modules/react-portal/es/PortalWithState.js");var m=o("../forms/src/Client/Components/Modal/Modal.tsx").default,u=o("../forms/src/ClientStore/index.ts");var p=o("../forms/src/Client/Components/Teaser/Teaser.tsx").default,f=o("../forms/src/Constants/teasers.ts");var b=({formVersionCId:e,node:t})=>{const o=Object(r.b)(),s=Object(r.c)(u.e.isDesignWorkflow),i=Object(r.c)(t=>u.u.selectById(t,e)),l=Object(r.c)(e=>u.x.teasersByFormVersion(e,null==i?void 0:i.formVersionId)),a=l.length>0?l[0]:null,d=Object(r.c)(e=>u.C.getSuccessViewIdFromFormVersion(e,null==i?void 0:i.formVersionId))===(null==i?void 0:i.currentViewId);if(s&&null===t)return null;return n.default.createElement(c.a,{key:e,defaultOpen:!0,onClose:()=>o(u.u.closeForm({formVersionCId:e})),closeOnEsc:!s,node:s?t:void 0},({closePortal:t,portal:r})=>[r(n.default.createElement(n.default.Fragment,null,null!=i&&i.currentTeaserId?n.default.createElement(p,{formVersionCId:e,closePortal:s?()=>{}:t}):n.default.createElement(m,{formVersionCId:e,closePortal:s?()=>{}:()=>(t=>{d||!a||a.displayOrder!==f.c&&a.displayOrder!==f.d?t():o(u.u.updateCurrentTeaser({id:e,changes:{currentTeaserId:a.teaserId}}))})(t)})))])},g=o("../forms/src/Client/Components/View/index.ts"),h=o("../forms/src/Client/Components/View/Canned/ErrorView.tsx"),y=o("../forms/src/Client/Components/ResetElements/index.tsx");var C=({node:e,formVersionCId:t})=>{const o=Object(r.c)(e=>u.u.openFormVersionSelectById(e,t)),s=e||document.querySelector(`div.klaviyo-form-${o.formId}.form-version-cid-${t}`);return s?Object(n.createPortal)(o.currentViewId?n.default.createElement(n.default.Fragment,null,o.showErrorView?n.default.createElement(h.a,{isEmbed:!0}):n.default.createElement(y.b,{style:{transform:"translate(0, 0)"}},n.default.createElement(g.a,{formVersionCId:t,formVersionId:o.formVersionId,viewId:o.currentViewId,isEmbed:!0,key:t}))):null,s):null};var x=()=>{const e=Object(r.c)(u.u.openFormVersionSelectIds),t=Object(r.c)(u.u.getOpenEmbedFormVersionIds);return n.default.createElement(n.Suspense,{fallback:n.default.createElement("div",null)},e.map(e=>{const o={formVersionCId:e};return t.includes(e)?n.default.createElement(C,d()({key:e},o)):n.default.createElement(b,d()({key:e},o))}))};Object(i.b)(s.g);t.default=()=>{const e=document.createElement("div");e.setAttribute("id","dynamic-react-root"),document.body.appendChild(e),Object(n.render)(n.default.createElement(r.a,{store:l.a},n.default.createElement(x,null)),e)}},"../forms/src/Client/formActions/formActions.ts":function(e,t,o){"use strict";o.d(t,"a",(function(){return L}));var n=o("../forms/src/ClientStore/store.ts"),r=o("../forms/src/ClientStore/index.ts"),s=o("../../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js"),i=o.n(s),l=o("../forms/src/Constants/actions.ts"),a=(o("../../node_modules/core-js/modules/es6.regexp.to-string.js"),o("../forms/src/Utils/debug.ts"));class d{constructor({formVersionCId:e,actionId:t}){this.currentHandlerStep="INSTANTIATED",this.formActionType=void 0,this.actionId=void 0,this.formVersionCId=void 0,this.formAction=void 0,this.formId=void 0,this.companyId=void 0,this.actionId=t,this.formVersionCId=e,this.formAction=r.b.actionSelectById(n.a.getState(),t);const o=n.a.getState();this.formId=r.u.getOpenFormVersionFormId(o,e),this.companyId=r.e.getKlaviyoCompanyId(o)}runAction(){return this.currentHandlerStep="PREHANDLER",new Promise(e=>e()).then(e=>this.__preHandler(e)).then(e=>(this.currentHandlerStep="HANDLER",e)).then(e=>this.__handler(e)).then(e=>(this.currentHandlerStep="POSTHANDLER",e)).then(e=>this.__postHandler(e)).catch(e=>this.__errorHandler(e))}__preHandler(e){}__handler(e){}__postHandler(e){}__errorHandler(e){Object(a.a)(e.toString(),{formActionType:this.formActionType,currentHandlerStep:this.currentHandlerStep})}}const c=["isSubmit"];class m extends d{constructor(e){let{isSubmit:t}=e;super(i()(e,c)),this.isSubmit=void 0,this.isSubmit=t,this.formActionType=l.a}__handler(){return n.a.dispatch(r.u.closeForm({formVersionCId:this.formVersionCId,logMetric:!this.isSubmit}))}}m.formActionType=l.a;var u=m,p=o("../forms/src/Utils/errorTypes.ts"),f=o("../forms/src/Utils/promise.ts"),b=o("../forms/src/Utils/onsiteApi/learnq.ts"),g=o("../forms/src/ClientStore/logMetricAsync/actions.ts");o("../../node_modules/preact/compat/dist/compat.module.js");var h=o("../forms/src/Constants/metrics.ts"),y=o("../../node_modules/unfetch/dist/unfetch.mjs"),C=o("../config/lib/client.json");const x=`${C.API.url}${C.API.submitToListPath}`;var I=o("../../node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),v=o("../forms/src/Sentry.tsx"),j=o("../forms/src/Utils/camelizeKeys.ts");const O=C.API.url+"/ajax/sms/subscribe_unique_id";var S=class extends d{constructor(e){super(e),this.hiddenFieldsComponentId=void 0,this.composedFields=void 0;const t=n.a.getState();this.hiddenFieldsComponentId=r.i.getComponentIdByActionId(t,e.actionId),this.composedFields=r.u.getComposedFields(t,this.formVersionCId,this.hiddenFieldsComponentId)}async __preHandler(){const e=await n.a.dispatch(r.u.validateOpenFormVersion({formVersionCId:this.formVersionCId}));if(Object(I.e)(e)){const{components:t}=e.payload;if(t.some(({valid:e})=>!e))throw new p.c({type:"form"})}return!0}__requestUniqueID(){(e=>{const t={method:"POST",headers:{"content-type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify(Object(j.b)(e))};return Object(y.a)(O,t).then(e=>{if(e.status>=500)throw Error("Error sending request: "+e.url);return e}).then(e=>e.json()).then(e=>Object(j.a)(e))})({companyId:this.companyId,form_id:this.formId,email:this.composedFields.$email}).then(({data:{uniqueId:e}})=>{void 0!==e&&n.a.dispatch(r.e.slice.actions.setSmsSubscriptionUniqueId(e))}).catch(()=>{})}__errorHandler(e){const{composedFields:t,formId:o,companyId:s,formAction:i}=this;if(d.prototype.__errorHandler.call(this,e),(e=>[p.a,p.c].some(t=>e instanceof t))(e))throw e;n.a.dispatch(r.u.updateCurrentView({id:this.formVersionCId,changes:{showErrorView:!0}})),n.a.dispatch(Object(g.a)({metric:h.c,formId:o,companyId:s,submittedFields:t,listId:null==i?void 0:i.listId})),v.a.captureException(e,{tags:{onSubmit:!0},extra:{submitAction:!0,formId:this.formId,companyId:this.companyId}})}};var w=class extends S{__handler(){const e=n.a.getState();Object(b.a)(this.composedFields);const t=r.u.getSubscriptionOnlyComponentData(e,this.formVersionCId);return this.composedFields=Object.assign({},this.composedFields,t||{}),r.i.anyComponentHasSubscribeToSMSAction(e,r.u.getOpenFormVersionFormVersionId(e,this.formVersionCId))&&this.__requestUniqueID(),this.__submitToList()}__submitHandlerCheck({success:e,errors:t=[]}){const{composedFields:o,formId:s,companyId:i,formAction:l}=this;if(!e&&"List does not exist."!==t[0])throw n.a.dispatch(r.u.updateCurrentView({id:this.formVersionCId,changes:{showErrorView:!0}})),n.a.dispatch(Object(g.a)({metric:h.c,formId:s,companyId:i,submittedFields:o,listId:l.listId})),new p.a(t.join(" | "))}__submitToList(){const{composedFields:e,formId:t,companyId:o}=this;return(e=>Object(y.a)(x,{method:"POST",headers:{"Access-Control-Allow-Headers":"*","Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},body:e.toString()}))(this.__makePOSTBody({composedFields:e})).then(e=>e.json()).then(s=>s.success&&this.formAction.actionType?(n.a.dispatch(r.l.slice.actions.successForm({formId:t,successActionType:this.formAction.actionType})),Object(f.b)(200,n.a.dispatch(Object(g.a)({metric:h.h,logCustomEvent:!0,formId:t,companyId:o,submittedFields:e,action_type:"Submit Form"}))).then(()=>s).catch(()=>s)):s)}__makePOSTBody({composedFields:e}){const t=new Date,o=Object.assign({},e,"object"==typeof window.Shopify&&window.Shopify.shop?{services:JSON.stringify({shopify:{source:"form"}})}:{}),{$exchange_id:n}=Object(b.c)(),r=Object.assign({g:this.formAction.listId,$fields:Object.keys(o).toString(),$list_fields:Object.keys(o).filter(e=>Array.isArray(o[e])).toString(),$timezone_offset:-t.getTimezoneOffset()/60},o,n?{$exchange_id:n}:{}),s=new URLSearchParams;return Object.keys(r).forEach(e=>{const t=r[e];return Array.isArray(t)?t.forEach(t=>s.append(e,t)):s.set(e,t)}),s}};class E extends w{__postHandler({success:e,errors:t=[]}){return r.u.openFormVersionSelectIds(n.a.getState()).includes(this.formVersionCId)&&this.formAction.viewId?(this.__submitHandlerCheck({success:e,errors:t}),n.a.dispatch(r.u.updateCurrentView({id:this.formVersionCId,changes:{currentViewId:this.formAction.viewId}}))):null}}E.formActionType=l.f;var k=E;o("../../node_modules/core-js/modules/es6.regexp.replace.js");const T=["isSubmit"];class V extends d{constructor(e){var t,o;let{isSubmit:n}=e;super(i()(e,T)),this.redirectUrl=void 0,this.newWindow=void 0,this.isSubmit=void 0,this.redirectUrl=(null==(t=this.formAction.data)?void 0:t.redirectUrl)||"about:blank",this.newWindow=!(null==(o=this.formAction.data)||!o.newWindow)&&this.formAction.actionType===l.b,this.isSubmit=!!n,this.formActionType=l.b}__redirectUrl(){const e=this.redirectUrl.replace(/^javascript:/,"");if(this.newWindow&&this.formAction.actionType===l.b){const t=window.open(e,"_blank");null==t||t.focus()}else window.location.assign(e)}__handler(){const{formId:e,newWindow:t,formVersionCId:o}=this;this.formAction.actionType===l.b&&n.a.dispatch(r.l.slice.actions.successForm({formId:e,successActionType:l.b}));const s=r.u.getOpenFormVersionSentSubmitMetric(n.a.getState(),o),i=n.a.dispatch(Object(g.a)({metric:h.g,logTelemetric:!this.isSubmit&&!s,logCustomEvent:!0,formId:this.formId,companyId:this.companyId,action_type:"Go to URL",destination_url:this.redirectUrl}));return t?(this.__redirectUrl(),i):Object(f.b)(200,i).then(()=>this.__redirectUrl()).catch(()=>this.__redirectUrl())}}V.formActionType=l.b;var _=V;class $ extends w{__postHandler({success:e,errors:t=[]}){this.__submitHandlerCheck({success:e,errors:t});const{formVersionCId:o,actionId:n}=this;return new _({formVersionCId:o,actionId:n,isSubmit:!0}).runAction()}}$.formActionType=l.e;var F=$;class A extends w{__postHandler({success:e,errors:t=[]}){this.__submitHandlerCheck({success:e,errors:t});const{formVersionCId:o,actionId:n}=this;return new u({formVersionCId:o,actionId:n,isSubmit:!0}).runAction()}}A.formActionType=l.d;var z=A;const D=e=>"This form is now set to display on Mobile devices only and subscribers will be routed to the list set on the "+e.toLowerCase()+" keyword.",M=e=>e+" Keyword",R=e=>e+" Message";D("Opt-in"),M("Opt-in"),R("Opt-in"),D("Subscribe"),M("Subscribe"),R("Subscribe");class N extends d{constructor(e){var t,o,n;super(e),this.toPhoneNumber=void 0,this.optInMessage=void 0,this.optInKeyword=void 0,this.toPhoneNumber=null==(t=this.formAction.data)?void 0:t.toPhoneNumber,this.optInMessage=(null==(o=this.formAction.data)?void 0:o.optInMessage)||"Send this text to subscribe to SMS updates!",this.optInKeyword=(null==(n=this.formAction.data)?void 0:n.optInKeyword)||"JOIN",this.formActionType=l.g}__handler(){const e=r.e.getSmsSubscriptionUniqueId(n.a.getState()),t=function(e){return e&&6===e.length}(e)?`${this.optInKeyword}:${e}`:this.optInKeyword,o=`sms:${this.toPhoneNumber}?&body=${encodeURIComponent(`${this.optInMessage} (ref:${t})`)}`;n.a.dispatch(r.u.closeForm({formVersionCId:this.formVersionCId}));const s=n.a.dispatch(Object(g.a)({metric:h.i,logCustomEvent:!0,formId:this.formId,companyId:this.companyId,action_type:"Subscribe Via SMS",sms_keyword:this.optInKeyword,destination_url:o}));return Object(f.b)(200,s).then(()=>window.location.assign(o)).catch(()=>window.location.assign(o))}}N.formActionType=l.g;var W=N;class P extends S{__handler(){const{formVersionCId:e,formAction:t,composedFields:o,formId:s,companyId:i}=this,l=n.a.getState();if(!r.u.openFormVersionSelectIds(l).includes(e)||null==t||!t.viewId)return null;Object(b.a)(o);const a=r.u.getOpenFormVersionFormVersionId(l,e);r.i.anyComponentHasSubscribeToSMSAction(l,a)&&this.__requestUniqueID();return!!Object.keys(r.u.getInputComponentFields(l,e)).length&&r.i.shouldTriggerProfileSubmitMetric(l,a)&&n.a.dispatch(Object(g.a)({metric:h.h,logCustomEvent:!0,formId:s,companyId:i,submittedFields:o,action_type:"Submit Form"})),n.a.dispatch(r.u.updateCurrentView({id:e,changes:{currentViewId:t.viewId}}))}}P.formActionType=l.h;var B=P;const H={[u.formActionType]:u,[k.formActionType]:k,[B.formActionType]:B,[_.formActionType]:_,[z.formActionType]:z,[F.formActionType]:F,[W.formActionType]:W},L=({actionId:e,formVersionCId:t})=>{const o=n.a.getState(),s=r.b.getActionType(o,e),i=r.u.getInputComponentFields(o,t),l=i.$email||i.$phone_number;return s!==k.formActionType||l?H[s]:B}},"../forms/src/Constants/modal.ts":function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));const n=9e4},"../forms/src/Constants/quill.ts":function(e,t,o){"use strict";o.d(t,"b",(function(){return n})),o.d(t,"a",(function(){return r}));const n="teaser",r="component"},"../forms/src/Constants/views.ts":function(e,t,o){"use strict";o.d(t,"a",(function(){return n})),o.d(t,"b",(function(){return r}));const n=1e3,r=200},"../forms/src/Utils/calculateSideImageSize.ts":function(e,t,o){"use strict";t.a=(e,t)=>e/(e+1)*t}}]);
