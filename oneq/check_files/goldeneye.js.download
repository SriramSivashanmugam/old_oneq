!function(e){function o(){}function t(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(e,this)}function n(e,o){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(o):(e._handled=!0,void t._immediateFn(function(){var t=1===e._state?o.onFulfilled:o.onRejected;if(null!==t){var n;try{n=t(e._value)}catch(e){return void r(o.promise,e)}i(o.promise,n)}else(1===e._state?i:r)(o.promise,e._value)}))}function i(e,o){try{if(o===e)throw new TypeError("A promise cannot be resolved with itself.");if(o&&("object"==typeof o||"function"==typeof o)){var n=o.then;if(o instanceof t)return e._state=3,e._value=o,void a(e);if("function"==typeof n)return void l(function(e,o){return function(){e.apply(o,arguments)}}(n,o),e)}e._state=1,e._value=o,a(e)}catch(o){r(e,o)}}function r(e,o){e._state=2,e._value=o,a(e)}function a(e){2===e._state&&0===e._deferreds.length&&t._immediateFn(function(){e._handled||t._unhandledRejectionFn(e._value)});for(var o=0,i=e._deferreds.length;o<i;o++)n(e,e._deferreds[o]);e._deferreds=null}function s(e,o,t){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof o?o:null,this.promise=t}function l(e,o){var t=!1;try{e(function(e){t||(t=!0,i(o,e))},function(e){t||(t=!0,r(o,e))})}catch(e){if(t)return;t=!0,r(o,e)}}var c=setTimeout;t.prototype.catch=function(e){return this.then(null,e)},t.prototype.then=function(e,t){var i=new this.constructor(o);return n(this,new s(e,t,i)),i},t.all=function(e){var o=Array.prototype.slice.call(e);return new t(function(e,t){function n(r,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){n(r,e)},t)}o[r]=a,0==--i&&e(o)}catch(e){t(e)}}if(0===o.length)return e([]);for(var i=o.length,r=0;r<o.length;r++)n(r,o[r])})},t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===t?e:new t(function(o){o(e)})},t.reject=function(e){return new t(function(o,t){t(e)})},t.race=function(e){return new t(function(o,t){for(var n=0,i=e.length;n<i;n++)e[n].then(o,t)})},t._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){c(e,0)},t._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},t._setImmediateFn=function(e){t._immediateFn=e},t._setUnhandledRejectionFn=function(e){t._unhandledRejectionFn=e},"undefined"!=typeof module&&module.exports?module.exports=t:e.Promise||(e.Promise=t)}(this);var z,acctOverviewSlid=[],prodconfig={version:"1.9.0",geTimesLoaded:(prodconfig&&prodconfig.geTimesLoaded||0)+1,geLoadingInitiated:!!prodconfig&&prodconfig.geLoadingInitiated,loadAtBottom:!0,gedebug:localStorage.getItem("ge-debug-overwrite")||!1,timeoutval:1500,retryCount:3,crossdomain:!0,attDomain:"https://www.att.com",xddomains:["https://www.att.com","https://www.directv.com"],attLoad:!1,moonrakerPath:"/msapi/uuid",loginPages:["/myatt/#/accountOverview","/my/#/accountOverview","/acctmgmt/accountoverview"],domainRegexes:{attRegexDomain:/(m|www)+.att.com/,dtvRegexDomain:/(m|www)+.directv.com/,dtvNowRegexDomain:/(m|www)+.atttvnow.com/,engageDtvRegexDomain:/beta.directvnow.com|vid.att.com/},eventsFlag:!0,eventsServiceURL:"/msapi/personalization/v1/event/update",pushNotifyEventsFlag:!0,userEnteredZipEventFlag:!0,checkAvailEventFlag:!0,checkAvailServiceURL:"/apis/personalization/goldeneye/event/saveca",cartModifiedEventFlag:!0,goldolamURL:"/scripts/goldeneye/scripts/goldolam.js",goldolamFlag:!0,mcmidServiceUrl:"/apis/personalization/goldeneye/profileservice/saveinfo",anonymousMCMIDFlag:!1,edgeConfig:{url:"https://www.att.com/msapi/personalization/v1/experienceinfo",searchAnonymous:!0,searchTermFlag:!0,pageVisitFlag:!0},releaseDate:"$Date: 2021-07-20 10:41:49 -0700 (Tue, 20 Jul 2021) $"},dom=document.location.origin,domainRegexes=prodconfig.domainRegexes;prodconfig.attLoad=domainRegexes.attRegexDomain.test(dom);var domXDIndex=prodconfig.xddomains.indexOf(dom);for(domXDIndex>-1&&prodconfig.xddomains.splice(domXDIndex,1),prodconfig.gedebug&&console.log("goldeneye::xddomains to check would be: ",prodconfig.xddomains),z=0;z<prodconfig.loginPages.length;z++)acctOverviewSlid[z]=dom+prodconfig.loginPages[z];var GoldenEye=GoldenEye||null,globalUUIDPromise=globalUUIDPromise||new Promise(function(e,o){prodconfig.loadAtBottom&&"complete"!==document.readyState?(prodconfig.gedebug&&console.log("goldeneye:: DOM is "+document.readyState),document.onreadystatechange=function(){"complete"===document.readyState&&(prodconfig.geLoadingInitiated?prodconfig.gedebug&&console.log("goldeneye:: already loaded thru the setTimeout"):(prodconfig.gedebug&&console.log("goldeneye:: DOM is now complete and loading GE"),golden(e,o,prodconfig)))}):(prodconfig.gedebug&&console.log("goldeneye::DOM Completed for load testing check or Flag off"),golden(e,o,prodconfig)),setTimeout(function(){(!prodconfig.geLoadingInitiated&&null===GoldenEye||"null"===GoldenEye||void 0===GoldenEye||"undefined"===GoldenEye)&&(prodconfig.gedebug&&console.log("goldeneye::goldeneye still not loaded after 5000ms, load now"),golden(e,o,prodconfig))},5e3)});function golden(e,o,t){prodconfig.geLoadingInitiated||(prodconfig.gedebug&&console.log("goldeneye::goldeneye initiating"),prodconfig.geLoadingInitiated=!0,GoldenEye=GoldenEye||function(t){var n={};if(!t)throw"goldeneye::Configuration missing";var i=t,r=t.gedebug,a=t.timeoutval,s=t.retryCount,l=t.xddomains,c=t.attDomain,d=t.attLoad,u=t.moonrakerPath,g=t.eventsFlag,f=t.eventsServiceURL,m=t.pushNotifyEventsFlag,v=t.userEnteredZipEventFlag,p=t.checkAvailEventFlag,y=(t.checkAvailServiceURL,t.goldolamURL),h=t.goldolamFlag,w=t.mcmidServiceUrl,k=t.anonymousMCMIDFlag,U=t.edgeConfig;_("goldeneye::total-time-for-goldeneye"),void 0===location.origin&&(location.origin=location.protocol+"//"+location.host);var S=location.origin;function _(e){r&&console.time(e)}function b(e){r&&console.timeEnd(e)}"undefined"==typeof console&&(console={log:function(){},debug:function(){},info:function(){},error:function(){}}),n.getDebug=function(){console.log("goldeneye::Debug is "+r+" config.gedebug = "+i.gedebug)},n.showConfig=function(){return r&&console.log("goldeneye::config: "+i),i};var T={alluuids:{},countRestCalls:0};function D(e){return"undefined"!==e&&void 0!==e&&"null"!==e&&null!==e}function I(e){return""===e}function x(e){return new Promise(function(o,t){if(r&&console.log("goldeneye::postXhr ",e),D(e)&&D(e.serviceUrl)&&""!=e.serviceUrl){var n=new XMLHttpRequest;n.open("POST",e.serviceUrl,!0),n.timeout=a,n.ontimeout=function(){t("timeout")},e.withCredentials&&(n.withCredentials=!0),e.contentType&&n.setRequestHeader("Content-type",e.contentType),n.onreadystatechange=function(){4===n.readyState&&(200===n.status?o(n.responseText):t("error: post xhr failed"))},n.send(e.payload),T.countRestCalls++}else t("error: post configuration missing required parameters")})}n.geGetXhr=function(e,o){return new Promise(function(t,n){var i=new XMLHttpRequest;i.withCredentials=!0,i.open("GET",e,!0),i.timeout=o||a,i.ontimeout=function(){n("timeout")},i.onreadystatechange=function(){4===i.readyState&&(200===i.status?t(i.responseText):n("error: Network Error during xhr get call ("+i.status+")"))},r&&console.log("goldeneye::geGetXhr to "+e),i.send(),T.countRestCalls++})},n.gePostXhr=x;var P=function(e){return/^[0-9]+$/.test(e)||/^([0-9a-f])+\-([0-9a-f])+\-([0-9a-f])+\-([0-9a-f])+\-([0-9a-f])+$/.test(e)||/^DTV/.test(e)||/^[A-Fa-f0-9]{65}$/.test(e)};n.verifyUUIDFormat=P,n.checkForUUIDCookie=function(){for(var o=/UUID/,t=document.cookie.split(";"),n=0;n<t.length;n++)t[n].match(o)&&(uuidval=t[n].split("=")[1],T.alluuids[uuidval]=(new Date).getTime(),e("goldeneye::UUID cookie found in browser"))};var C=function(e){var o=[];if(D(e="; "+e)){var t=e.split("; UUID=");if(D(t)&&t.length>=2){t.shift();for(var n=0;n<t.length;n++){var i=t[n].split(";").shift();o.push(i)}}}return o},E=function(e){var o,t=C(document.cookie),n=function(e){if(!D(e))return r&&console.log("goldeneye::there are no valid UUID cookies"),null;for(var o=0;o<e.length;o++)if(D(e[o])&&P(e[o]))return e[o]}(t)||"";return o=function(e){document.cookie="UUID="+n+"; path=/; domain="+e+"; expires=Thu, 01 Jan 1973 00:00:01 GMT; max-age=-9999; secure";var o=C(document.cookie),i=function(e,o){for(var t=[],n=0;n<e.length;n++)o.indexOf(e[n])<0&&t.push(e[n]);return t}(t,o);return i.length?i[0]:null}(e),r&&console.log("goldeneye::deleting all known subdomain cookies"),document.cookie="UUID="+n+"; path=/; domain=.att.com; expires=Thu, 01 Jan 1973 00:00:01 GMT; max-age=-9999; secure",document.cookie="UUID="+n+"; path=/; domain=www.att.com; expires=Thu, 01 Jan 1973 00:00:01 GMT; max-age=-9999; secure",r&&console.log("goldeneye::.www.att.com cookies is ",o),o};n.cookieValueInDomain=E;var R=function(){var e=("; "+document.cookie).split("; UUID=");if(2==e.length){var o=e.pop().split(";").shift();if(D(o)&&P(o))return r&&console.log("goldeneye::there is a valid uuid cookie"),o;r&&console.log("goldeneye::there is an invalid UUID cookie ("+o+")")}else if(e.length>2){r&&console.log("goldeneye::there is more than 1 UUID cookie");var t=E("www.att.com");if(D(t)&&P(t))return document.cookie="UUID="+t+";"+A()+";path=/;secure",t;r&&console.log("goldeneye::the authoratative domain cookie is not valid, should be deleted instead")}return null}();function O(e,o){(_("goldeneye::time-for-cookieExists"),r&&console.log("goldeneye::cookie::1a::Entered into cookieExist() function to check for UUID cookie"),D(R)&&P(R))?(r&&console.log("goldeneye::cookie::COMPLETE::UUID cookie::"+R+" already existed in "+S+", do nothing"),e("goldeneye::UUID cookie found in browser")):(r&&console.log("goldeneye::cookie::1b::No UUID cookie exists in "+S+" domain, so making crossdomain call to att domain"),new Promise(function(e,o){!function e(o,t,n,i,a){var s=n[t];var l={remoteUrl:s+"/scripts/goldeneye/cookieCheck.html",type:o,xddomain:s,count:t};try{r&&console.log("goldeneye::cookie::1::setting up cross domain for "+s);var c=new V(l);c.messageReceived.then(function(l){c.stop(),r&&console.log("goldeneye::cookie::3::message is received from "+s+"!");var d=j(l);r&&console.log("goldeneye::cookie::3b::validated message: ",d),""===d[o]&&t<n.length-1?(r&&console.log("goldeneye::cookie::5a::no cookie ("+o+") was found, going to check next domain"),e(o,t+1,n,i,a)):""!==d[o]?(r&&console.log("goldeneye::cookie::6::COMPLETE::Cookie ("+o+") is found from "+s+"!"),i(d)):(r&&console.log("goldeneye::cookie::6::COMPLETE::tried searching all domains, no cookie was found"),a(d))})}catch(l){t<n.length-1?(r&&console.log("goldeneye::cookie::5::error occurred trying to call cross domain for "+s),e(o,t+1,n,i,a)):(r&&console.log("goldeneye::cookie::6::COMPLETE::tried searching all domains, error occurred and no cookie was found"),a({uuid:""}))}}("uuid",0,l,e,o)}).then(function(o){r&&console.log("goldeneye::cookie::7::successfully completed checking xdomain and found a cookie!"),L(o.uuid),e("goldeneye::UUID cookie was found from xddomain, set into current domain"),b("goldeneye::time-for-cookieExists")},function(t){t&&r&&console.log("goldeneye::cookie::7::error occurred trying to retrieve UUID from xddomain: ",t),new Promise(function(e,o){M(e,o)}).then(function(o){e("goldeneye::UUID cookie set after xdomain and Ajax call"),d&&B()},function(){o("goldeneye::cookie not found after xdomain and Ajax (att)")}),b("goldeneye::time-for-cookieExists")}));b("goldeneye::time-for-cookieExists")}n.cookieExists=O,n.getRestCallCount=function(){return T.countRestCalls},n.showStats=function(){console.log("show stats collection: "+T)},n.deleteCookie=function(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"};var F=function(e){var o="",t=("; "+document.cookie).split("; "+e+"=");return t.length>1&&(o=t.pop().split(";").shift()),o};function A(){var e=new Date;return e.setTime(e.getTime()+2147472e6),r&&console.log("goldeneye::Setting the cookie expiration to:"+e.toUTCString()),"expires="+e.toUTCString()}function L(e){D(e)&&P(e)&&(document.cookie="UUID="+e+";"+A()+";path=/;secure")}n.getCookie=F,n.getCookieExpire=A,n.setCookie=L;var N=0;function M(e,o){_("goldeneye::time-for-createCookieRest"),T.countRestCalls++,r&&console.log("goldeneye::Servicecall started..!");var t=c+u,n=new XMLHttpRequest;n.withCredentials=!0,n.open("GET",t,!0),n.timeout=a,n.ontimeout=function(){r&&console.error("goldeneye:: The request (#"+N+") for Service call "+t+" timed out. So do retry"),_("goldeneye::time-for-createCookieRestRetry"),N<s?(M(e,o),N++):(r&&console.log("goldeneye::Servicecall completed all retries::"+s),o("goldeneye::Servicecall failed all retries")),b("goldeneye::time-for-createCookieRestRetry")},n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){if(null!==n.responseText&&""!==n.responseText){var t=JSON.parse(n.responseText);D(t)&&D(t.uuid)&&P(t.uuid)?(dom!==c?(r&&console.log("Got the UUID cookie value: "+t.uuid+" from the service call..So setting it into "+S+" domain."),L(t.uuid)):r&&console.log("goldeneye::Got the UUID cookie value, but not setting client side"),e("goldeneye::UUID cookie received from the ajax call and set into domain")):(r&&console.error("goldeneye::Got invalid  UUID cookie value/response from the service call..So not setting to cookie."),o("goldeneye::Not a valid UUID Cookie from ajax call"))}}else o("goldeneye::Network Error during UUID cookie ajax call")},n.send(null),b("goldeneye::time-for-createCookieRest")}function V(e){var o,t,n,i,a,s=!1,l=!1,c=location.origin.replace(/http(s)?:\/\//,""),d={remote:e.remoteUrl,props:{src_parameters:"xdm_ge="+encodeURIComponent(c)},iframe_prefix:"gexd"};if(!d.remote||!/.html/.test(d.remote))return console.error("goldeneye::xdMessageHandler requires remote html url"),!1;window.addEventListener?(o=function(e,o,t){e.addEventListener(o,t,!1)},t=function(e,o,t){e.removeEventListener(o,t,!1)}):window.attachEvent&&(o=function(e,o,t){e.attachEvent("on"+o,t)},t=function(e,o,t){e.detachEvent("on"+o,t)});var u=function(o){l=!0;var t=o.origin||o.domain;if(r&&console.log("goldeneye::cookie::2d::received message '"+o.data+"' from "+t),"string"==typeof o.data&&t===e.xddomain&&o.source===frame.contentWindow){var n={message:o.data,origin:t,frameWindow:a};i(n)}else r&&console.log("crossDomain::message from this source ("+t+") is not allowed")},g=function(n){if("gexd-ready"==n.data&&n.origin===e.xddomain){r&&console.log("goldeneye::cookie::2b::child iframe is ready"),a="postMessage"in frame.contentWindow?frame.contentWindow:frame.contentWindow.document,t(window,"message",g),r&&console.log("goldeneye::cookie::2c::adding receiveMessage event listener"),o(window,"message",u);a.postMessage("gexd calling att domain",e.xddomain)}},f=function(){l||(r&&console.log("goldeneye::cookie::2e::too long waiting for iframe, resolve with no UUID"),t(window,"message",g),i(""))};return o(window,"message",g),n=new Promise(function(e,o){i=e,o}),frame=function(){r&&console.log("goldeneye::cookie::2a::setting up iframe"),d.props.src=d.remote+(-1==d.remote.indexOf("?")?"?":"&")+d.props.src_parameters,d.props.name=d.iframe_prefix+"_provider_"+e.count;var o=document.createElement("IFRAME");return o.id=o.name=d.props.name,o.src=d.props.src,o.style="position:absolute,top:-2000px,left:0px;display:none",o.setAttribute("aria-hidden","true"),o.border=o.frameBorder=0,o.allowTransparency=!0,o.title="goldeneye_internal",o}(),new Promise(function(e,o){var t=!1;"readyState"in document?(document.readyState,t="complete"==document.readyState||"interactive"==document.readyState||"loaded"==document.readyState):t=!!document.body,t?(r&&console.log("goldeneye::cookie::DOM content is already done, continue"),e()):(r&&console.log("goldeneye::windowLoad::DOM content is not ready yet"),document.addEventListener("DOMContentLoaded",function(){r&&console.log("goldeneye::windowLoad::DOM content is now ready continue"),e()}))}).then(function(){s||(document.body.appendChild(frame),setTimeout(f,1e3)),s=!0}),{messageReceived:n,stop:function(){t(window,"message",u)}}}n.createCookieRest=M;var j=function(e){var o=e.message,t=e.origin,n=dom===c;sessionStorage.setItem("goldeneye_xdchk","chkd"),r&&console.log("goldeneye::cookie::4a::cross domain received message: ",o);var i=function(e){var o="";return D(e)&&(r&&console.log("goldeneye::messages: ",e),0===e.indexOf("goldeneye u")&&(o=e.substring(12))),{uuid:o}}(o);r&&console.log("goldeneye::cookie::4ai::values from xd: ",i);var a=i.uuid||"";return D(a)&&(!n&&P(a)||n&&/^([0-9a-f])+\-([0-9a-f])+\-([0-9a-f])+\-([0-9a-f])+\-([0-9a-f])+$/.test(a))?r&&console.log("goldeneye::cookie::4b::Got the UUID cookie "+a+" from "+t+"."):(r&&console.log("goldeneye::cookie::4c::No valid UUID cookie available"),a=""),{uuid:a}};r&&console.log("goldeneye::Now Main"),new Promise(function(e,o){O(e,o)}).then(function(){e("goldeneye::UUID cookie found")},function(){o("goldeneye::UUID cookie not found")});var G=function(){if(g)var e=document.getElementsByTagName("head")[0],o=[],t=0,n=function(e,o){for(var t=!0,n=function(t){for(var n=o[t],i=e[t],r=!1,a=0;a<n.length;a++)if(n[a]===i)return r=!0,!0;return r},i=Object.keys(o),r=0;r<i.length;r++){var a=i[r],s=o[a];if("object"==typeof s){if(!n(a))return t=!1,!1}else if("function"==typeof s){if(!(t=s(e)))return!1}else if(e[a]!==s)return t=!1,!1}return t},i=function(e,o){for(var t=0;t<o.length;t++){var i=o[t];if(satisfies=n(e,i.conditions),satisfies)return i.customEventName?i.customEventName:e.eventAction}return""},a=function(e){if(D(e))for(t=0;t<o.length;t++){var n="",r=o[t].events[e.eventAction];r&&(n=r.filters?i(e,r.filters):e.eventAction),""!==n&&o[t].callback(n,e)}},s=function(){if(e.addEventListener("DM_Event",function(e){D(e.detail)&&D(e.detail.data)&&a(e.detail.data)}),window.ddo&&ddo.getVar("events"))for(var o=ddo.getVar("events"),t=o.length,n=0;n<t;n++)a(o[n])};else s=function(){r&&console.log("goldeneye::events::init:: events flag is turned off")};return{startListening:s,track:function(e){e&&e.events&&e.callback&&o&&o.push(e)},listeners:o}};function B(){var e="; "+document.cookie;if(D(e)){var o=e.split("; UUID=");if(D(o)&&o.length>2){var t;r&&console.log("goldeneye::deleting .att.com cookie"),o.shift();for(var n=0;n<o.length;n++){var i=o[n].split(";").shift();/^\d+$/.test(i)&&(t=i)}t&&L(t),document.cookie="UUID=; path=/; domain=.att.com; expires=Thu, 01 Jan 1973 00:00:01 GMT; secure"}}}!function(){if(d&&g){var e={events:(s=[{conditions:{_evtFriendlyPageName:["DS Cart Summary Pg","DS Upgrade Cart Summary Pg","Mbl-HRock Wireless Cart Summary Pg"],_evtFlowCode:["DSUP","HRUP~W","HRUPX~W"]},customEventName:"CSVEVT"},{conditions:{_evtPageURL:["/checkout/onepagecheckout.html","/cart/onepagecheckoutcart.html"],_evtLineOfBusiness:"Wireless",_evtFlowCode:["HRUP~W","DSUP","HRUPX"]},customEventName:"CSVEVT"},{conditions:{_evtPageURL:["/checkout/onepagecheckout.html","/cart/onepagecheckoutcart.html"],_evtFriendlyPageName:["DS Upgrade Cart Summary Pg","DS Upgrade Order Review Pg"]},customEventName:"CSVEVT"},{conditions:{_evtPageURL:["/shop/xpress/upgrade-eligibility.html","/buy/wireless/upgrade-eligibility"],_evtLineOfBusiness:"Wireless"},customEventName:"UEEVT"},{conditions:{_evtFriendlyPageName:["DS Upgrade Device Recommender Pg","DS Wireless Device List Pg"],_evtFlowCode:"DSUP"},customEventName:"UEEVT"}],{pageLoad:{filters:s},Page_Load:{filters:s},formResponse:{filters:[{conditions:{eventCode:["DS_Add_To_Cart_Submit","Mbl-HRock_Cart_Add_Submit","DS_Upgrade_Cart_Add_Submit","DS_Upgrade_Cart_Preorder_Submit"],_evtLineOfBusiness:"Wireless",_evtFlowCode:["DSUP","HRUP~W","HRUPX"],ContractType:function(e){return null!==e.contractType&&void 0!==e.contractType||null!==e.ContractType&&void 0!==e.ContractType}},customEventName:"CAEVT"}]}}),callback:function(e,o){var t={evt:e,ban:function(){var e="";if(ddo){var o=ddo.getVar("user.account.wirelessAccountNumber"),t=ddo.getVar("user.account.ban");o&&"Default"!==o?e=o:t&&"Default"!==t&&(e=t)}if(""===e){var n=JSON.parse(sessionStorage.getItem("exUpProfile"));n&&n.ProfileInfo&&n.ProfileInfo.billingAccountNumber&&(e=n.ProfileInfo.billingAccountNumber)}return e}()};r&&console.log("goldeneye::Will POST this event data:",JSON.stringify(t));var n={serviceUrl:c+f,payload:JSON.stringify(t),contentType:"application/json",withCredentials:!0};x(n).then(function(e){r&&console.log(e)},function(e){r&&console.error("goldeneye::event listener post ",e)})}},o={events:{formResponse:{filters:[{conditions:{eventCode:"DS_Check_Avail_Submit"}}]}},callback:function(e,o){for(var t=["dwellingType","dtvAvailResult","qualCriteria","eligResult","connectedComm","dtvConnectedComm","userResp","addressId","eluid","newCoEligFlag","jointBillDiscountInfo","customerGigapowerIntentFlag","singleDispatchFlag","statusCode","successFlag","errorType","gigaAvailResult","iptvAvailResult","voipAvailResult","hsiaAvailResult","wirelessAvailResult","uverseTransportType","existingServiceSummary","addressType","wlHpAvailResult","ckavBundleIntent","dslAvailResult","businessFiberAvailResult","potsAvailResult","wllInternetAvailResult","cAFIIIndicator"],n=t.slice(),i=Object.keys(o),a={},s=0;s<i.length;s++){var l=i[s];t.indexOf(l)>-1&&(a[l]=o[l],r&&n.splice(n.indexOf(l),1))}var c=window.location.href;if(D(a)&&D(a.addressId)){r&&Object.keys(a).length!==t.length&&console.log("goldeneye::events::missing attributes: "+n);var d={evtPayload:{evtName:"CAADRSID",addressid:a.addressId},evtType:"online"},u={serviceUrl:U.url,payload:JSON.stringify(d),contentType:"application/json",withCredentials:!0};"www.att.com/buy/bundles/"!==c&&x(u).then(function(e){r&&console.log("goldeneye::events::checkavailability::Successful response: ",e)},function(e){r&&console.log("goldeneye::events::checkavailability::error sending to service: ",e)})}else r&&console.log("goldeneye::events::checkavailability:: there are no attributes to send or required not present")}},n={events:{virtualPageLoad:{filters:[{conditions:{_evtFriendlyPageName:"HRUverse Shop Bundle Pg",_evtFlowCode:"DSPRO"},customEventName:"USPRZIP"}]},formResponse:{filters:[{conditions:{eventCode:"DS_Check_Avail_Submit"},customEventName:"USPRZIP"}]}},callback:function(e,o){var t,n,i;if(o&&o.userResp&&o.userResp.length>0?t=o.userResp.slice(-5):o&&o._evtZipCode&&(t=o._evtZipCode),window.localStorage&&window.localStorage.getItem("zippyFlow")&&(n=JSON.parse(window.localStorage.getItem("zippyFlow")).county,i=JSON.parse(window.localStorage.getItem("zippyFlow")).countycode),r&&console.log("goldeneye::events::eligResult is : ",o.eligResult),D(t)&&t.length>0&&!isNaN(t)&&o.eligResult&&-1===["Multiple Counties","Out of Footprint"].indexOf(o.eligResult)){r&&console.log("goldeneye::events::userEnteredZip is : ",t),r&&console.log("goldeneye::events::userEnteredCountyCode is : ",i);var a={evtPayload:{evtName:e,zip:t},evtType:"online"};D(i)&&i.length>0&&(a.evtPayload.countyCode=i),D(n)&&n.length>0&&"SINGLE_COUNTY"!==n&&(a.evtPayload.county=n);var s={serviceUrl:U.url,payload:JSON.stringify(a),contentType:"application/json",withCredentials:!0};x(s).then(function(e){r&&console.log("goldeneye::events::userEnteredZip::Successful response: ",e)},function(e){r&&console.log("goldeneye::events::userEnteredZip::error sending to service: ",e)})}else r&&console.log("goldeneye::events::userEnteredZip:: there are no attributes to send or required not present")}},i={events:{pageLoad:{filters:[{conditions:{_evtPageURL:["/buy/cart"]},customEventName:"IDPAREVT"}]},formResponse:{filters:[{conditions:{eventCode:["DS_Add_To_Cart_Submit","DS_Cart_Update_Submit","DS_Remove_Cart_Submit","DS_Upgrade_Plan_Submit","DS_Upgrade_Cart_Add_Submit","DS_Upgrade_Cart_Preorder_Submit"],_evtLineOfBusiness:"Wireless"},customEventName:"IDPAREVT"}]}},callback:function(e,o){sessionStorage.setItem("p13n_crt_modify","true")}},a=new G;m&&a.track(e),p&&P(R)&&a.track(o),v&&a.track(n),t.cartModifiedEventFlag&&"true"!==sessionStorage.getItem("p13n_crt_modify")&&a.track(i),a.startListening()}var s}(),n.checkForDoubleUUID=B,h&&document.getElementsByTagName("head")[0].addEventListener("DM_Event",function(e){if(function(e){return D(e.detail)&&D(e.detail.data)&&"pageLoad"===e.detail.data.eventAction&&(acctOverviewSlid.indexOf(e.detail.data._evtAddressBarFullURL)>-1||acctOverviewSlid.indexOf(dom+e.detail.data._evtPageURL)>-1)&&["myATT Account Overview Pg","myATT CBO Welcome Pg"].indexOf(e.detail.data._evtFriendlyPageName)>-1}(e)){var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=c+y,document.getElementsByTagName("head")[0].appendChild(o),r&&console.log("goldeneye::calling goldolam.js...")}});var H=function(e){if(D(e)&&""!==e){var o={evtPayload:e,evtType:"online"};r&&console.log("associate::the payload is ",JSON.stringify(o));var t=new XMLHttpRequest;t.open("POST",U.url,!0),t.timeout=2e3,t.ontimeout=function(){r&&console.log("associate::timed out")},t.withCredentials=!0,t.onreadystatechange=function(){4===t.readyState&&(200===t.status?r&&console.log("associate::success::"+t.responseText):r&&console.log("associate::failure::"+t.responseText))},t.setRequestHeader("Content-type","application/json"),t.send(JSON.stringify(o))}else r&&console.log("associate::not sending to API as no search terms found")};n.checkAnonAdobeId=function(){if(k&&d){var e=F("UUID");if(""!==e&&!D(sessionStorage.getItem("goldeneye_anonsent"))&&""===F("TATS-SS-TokenID")&&!/^\d+$/.test(e)&&P(e)){var o=F("AMCV_55633F7A534535110A490D44%40AdobeOrg");""!==o&&(o=decodeURIComponent(o)).split("MCMID").length>1&&x({serviceUrl:w,withCredentials:!0}).then(function(e){r&&console.log("goldeneye::anonymousAdobeId:: successful",e),sessionStorage.setItem("goldeneye_anonsent","success")},function(e){r&&console.log("goldeneye::anonymousAdobeId:: failure",e),sessionStorage.setItem("goldeneye_anonsent","failure")})}}};n.trackSearchTerms=function(){if(U.searchTermFlag){r&&console.log("goldeneye::search::trackSearchTerms()");var e,o,t=sessionStorage.getItem("goldeneye_search")||0,n=F("UUID");!D(n)||""===n||!U.searchAnonymous&&isNaN(n)?r&&console.log("goldeneye::search::not tracking for anonymous visitors OR UUID is undefined ("+(D(n)&&""!==n)+")"):t<10?new Promise(function(t,n){var i=function(){r&&console.log("goldeneye::search::a submission occurred"),t(e.value)};new Promise(function(t,n){o=document.getElementById("searchForm"),e=document.getElementById("z1-searchfield");var i=function(){o&&e&&t("search elements are ready");var i=0,r=setInterval(function(){o=document.getElementById("searchForm"),(e=document.getElementById("z1-searchfield"))&&o?(clearInterval(r),t("search elements are ready")):i>15&&(clearInterval(r),n("search elements taking too long to load")),i++},1e3)};if(prodconfig.loadAtBottom&&"complete"===document.readyState)r&&console.log("goldeneye::search::page has already loaded"),i();else{var a=!1;document.addEventListener("readystatechange",function(){"complete"!==document.readyState||a||(a=!0,r&&console.log("goldeneye::search::page is now ready"),i())}),setTimeout(function(){a||(a=!0,i())},2e3)}}).then(function(){o.addEventListener?o.addEventListener("submit",i,!1):ele.attachEvent?o.attachEvent("onsubmit",i):(r&&console.log("goldeneye::search::no js event listeners in this browser"),n("no event listener")),D(document.querySelector("#z1-search-input #z1-hidden-filter"))&&document.querySelector("#z1-search-input #z1-hidden-filter").addEventListener("click",function(e){r&&console.log("goldeneye::search::autosuggestion clicked!"),i()}),r&&console.log("goldeneye::search::now tracking for search submissions")},function(e){n(e)})}).then(function(e){var o,n=(o=e)&&""!==o?o.replace(/[^\.?+\w\s@':;#$&Ã©Ã±Ã¡Ãƒï¿½Ã³ÃºÃ¼Ã­Â¿Â¡-]/gi,"").trim():o;H({evtName:"ST",searchTerm:n,searchContext:window.location.href}),sessionStorage.setItem("goldeneye_search",parseInt(t)+1)},function(e){r&&console.log("goldeneye::search::no search terms could be found: ",e)}):r&&console.log("goldeneye::search::already collected the max (10) search terms")}else r&&console.log("goldeneye::search::search flag is off or not on same domain")};n.trackFaviconHeart=function(){var e=window.location.href;if(U.pageVisitFlag&&(X(e)||z(e)||W(e)||J(e)||q(e))){var o=F("UUID"),t=JSON.parse(window.localStorage.getItem("plp_myfavorites")),n=Object.keys(t.savedObjects).toString();if(document.querySelector('[title="Add to Favorites"]'),D(o)&&!I(o)&&P(o)){if(window.ddo&&ddo.getVar("events"))for(var i=ddo.getVar("events"),r=i.length,a=0;a<r;a++)"Add to Favorites"==i[a].linkName&&H({evtPayload:{skuId:n,evtName:"HEART"},evtType:"online"})}else console.log("goldeneye::pgvst::uuid is empty")}};var z=function(e){return e.indexOf("/buy/prepaid-phones/")>-1};n.isTargetBuyPrepaid=z;var W=function(e){return e.indexOf("/buy/tablets/")>-1};n.isTargetBuyTablets=W;var J=function(e){return e.indexOf("/buy/wearables/")>-1};n.isTargetBuyWearables=J;var q=function(e){return e.indexOf("/buy/connected-devices-and-more/")>-1};n.isTargetBuyConnectedDevices=q;var X=function(e){return e.indexOf("/buy/phones/")>-1};n.isTargetBuyPhone=X;n.trackFiberPurchase=function(){var e=window.location.href;if(U.pageVisitFlag&&(Z(e)||$(e))){var o=F("UUID");if(D(o)&&!I(o)&&P(o)){if(window.ddo&&ddo.getVar("events"))for(var t=ddo.getVar("events"),n=t.length,i=(new Date).toUTCString(),r=0;r<n;r++)"DS Checkout Personal and Billing Info Pg"==t[r]._evtFriendlyPageName&&H({evtName:"PGVST",pageVisit:window.location.href,timeStamp:i})}else console.log("goldeneye::pgvst::uuid is empty")}};var Z=function(e){return e.indexOf("/buy/cart")>-1};n.isTargetBuyCartPage=Z;var $=function(e){return e.indexOf("/buy/checkout/checkoutview")>-1};n.isTargetCheckOutViewPage=$;n.trackPageVisit=function(){var e=window.location.href;if(U.pageVisitFlag&&(K(e)||Y(e)||Q(e)||ee(e)||oe(e)||ne(e)||ie(e)||re(e)||se(e)||ae(e)||te(e))){var o=F("UUID");D(o)&&!I(o)&&P(o)?H({evtName:"PGVST",pageVisit:e.split("?")[0]}):console.log("goldeneye::pgvst::uuid is empty")}};var K=function(e){return e.indexOf("https://www.att.com/support/article/")>-1&&/\/KM[0-9]+$/.test(e)};n.isTargetWirelessPage=K;var Y=function(e){for(var o=["/support/contact-us/directv","/acctmgmt/directv/service-and-support","/support/topic/my-account/topic_billingpayments1-topic_viewpaybill-topic_viewbill0","/support/article/faq/esupport/article.html"],t=0;t<o.length;t++)if(e.indexOf(o[t])>-1)return!0;return!1};n.isTargetDTVPage=Y;var Q=function(e){return e.indexOf("esupport/article.html#!/u-verse-tv/KM1009540")>-1||e.indexOf("esupport/article.html#!/u-verse-tv/KM1009500")>-1||e.indexOf("esupport/article.html#!/u-verse-tv/KM1065646")>-1};n.isTargetUversePage=Q;var ee=function(e){return e.indexOf("/deviceunlock/#/")>-1};n.isTargetUnlockPhonePage=ee;var oe=function(e){return e.indexOf("https://www.business.att.com/small-business.html")>-1};n.isTargetSmallBusinessPage=oe;var te=function(e){return e.indexOf("https://www.business.att.com/small-business/internet/wireless.html")>-1};n.isTargetSmallBusinessWirelessPage=te;var ne=function(e){return e.indexOf("https://myhomenetwork.att.com/#/login/")>-1};n.isTargetMyHomeNetwork=ne;var ie=function(e){return e.indexOf("/support/topic/u-verse-high-speed-internet")>-1};n.isTargetUverseInternetSupportPage=ie;var re=function(e){return e.indexOf("/support/topic/u-verse-tv")>-1};n.isTargetUverseTVSupportPage=re;var ae=function(e){return e.indexOf("/acctmgmt/fid/lander")>-1};n.isTargetForgotPasswordPage=ae;var se=function(e){return e.indexOf("/buy/thankyou")>-1};return n.isTargetThankYouPage=se,b("goldeneye::total-time-for-goldeneye"),n}(t))}1===prodconfig.geTimesLoaded?globalUUIDPromise.then(function(e){prodconfig.gedebug&&console.log("goldeneye::Goldeneye promise fulfilled"),setTimeout(function(){GoldenEye.checkAnonAdobeId()},2500),GoldenEye.trackSearchTerms(),GoldenEye.trackPageVisit(),GoldenEye.trackFaviconHeart(),GoldenEye.trackFiberPurchase()},function(e){prodconfig.gedebug&&console.log("goldeneye::Goldeneye promise rejected")}):prodconfig.gedebug&&console.log("goldeneye::Already loaded goldeneye, try #"+prodconfig.geTimesLoaded);