!function(){function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequirecbf3;r.register("78xpv",(function(t,n){e(t.exports,"MediaStore",(function(){return r("hRAeJ").MediaStore})),e(t.exports,"MediaStoreError",(function(){return r("1C8SG").MediaStoreError})),e(t.exports,"isMediaStoreError",(function(){return r("1C8SG").isMediaStoreError})),e(t.exports,"UploadController",(function(){return r("12EjM").UploadController})),e(t.exports,"isPreviewableType",(function(){return r("kxIOh").isPreviewableType})),e(t.exports,"isMediaCollectionItemFullDetails",(function(){return r("kxIOh").isMediaCollectionItemFullDetails})),e(t.exports,"getArtifactUrl",(function(){return r("7bwtU").getArtifactUrl})),e(t.exports,"isMediaClientError",(function(){return r("iAPl7").isMediaClientError})),e(t.exports,"getMediaClientErrorReason",(function(){return r("iAPl7").getMediaClientErrorReason})),e(t.exports,"isUploadingFileState",(function(){return r("5qT7v").isUploadingFileState})),e(t.exports,"isProcessingFileState",(function(){return r("5qT7v").isProcessingFileState})),e(t.exports,"isProcessedFileState",(function(){return r("5qT7v").isProcessedFileState})),e(t.exports,"isErrorFileState",(function(){return r("5qT7v").isErrorFileState})),e(t.exports,"isPreviewableFileState",(function(){return r("5qT7v").isPreviewableFileState})),e(t.exports,"isFinalFileState",(function(){return r("5qT7v").isFinalFileState})),e(t.exports,"isImageRepresentationReady",(function(){return r("5qT7v").isImageRepresentationReady})),e(t.exports,"mapMediaFileToFileState",(function(){return r("5qT7v").mapMediaFileToFileState})),e(t.exports,"mapMediaItemToFileState",(function(){return r("5qT7v").mapMediaItemToFileState})),e(t.exports,"getFileStreamsCache",(function(){return r("lvJTv").getFileStreamsCache})),e(t.exports,"StreamsCache",(function(){return r("lvJTv").StreamsCache})),e(t.exports,"uploadFile",(function(){return r("7Lt7J").uploadFile})),e(t.exports,"request",(function(){return r("aFFZa").request})),e(t.exports,"RequestError",(function(){return r("XeEm5").RequestError})),e(t.exports,"isRequestError",(function(){return r("XeEm5").isRequestError})),e(t.exports,"isRateLimitedError",(function(){return r("ApfW3").isRateLimitedError})),e(t.exports,"isAbortedRequestError",(function(){return r("ApfW3").isAbortedRequestError})),e(t.exports,"mapResponseToJson",(function(){return r("ApfW3").mapResponseToJson})),e(t.exports,"mapResponseToBlob",(function(){return r("ApfW3").mapResponseToBlob})),e(t.exports,"mapResponseToVoid",(function(){return r("ApfW3").mapResponseToVoid})),e(t.exports,"createUrl",(function(){return r("ApfW3").createUrl})),e(t.exports,"PollingFunction",(function(){return r("bDnO8").PollingFunction})),e(t.exports,"isPollingError",(function(){return r("9Zkoa").isPollingError})),e(t.exports,"PollingError",(function(){return r("9Zkoa").PollingError})),e(t.exports,"FileFetcherImpl",(function(){return r("dWzwy").FileFetcherImpl})),e(t.exports,"FileFetcherError",(function(){return r("bADUQ").FileFetcherError})),e(t.exports,"isFileFetcherError",(function(){return r("bADUQ").isFileFetcherError})),e(t.exports,"CollectionFetcher",(function(){return r("8190B").CollectionFetcher})),e(t.exports,"MediaClient",(function(){return r("hRnd3").MediaClient})),e(t.exports,"StargateClient",(function(){return r("4KjvQ").StargateClient})),e(t.exports,"isImageRemote",(function(){return r("kJdUD").isImageRemote})),e(t.exports,"checkWebpSupport",(function(){return r("8swuG").checkWebpSupport})),e(t.exports,"observableToPromise",(function(){return r("75Jol").observableToPromise})),e(t.exports,"getMediaTypeFromMimeType",(function(){return r("8WkbS").getMediaTypeFromMimeType})),e(t.exports,"getDimensionsFromBlob",(function(){return r("fAIAn").getDimensionsFromBlob})),e(t.exports,"isImageMimeTypeSupportedByBrowser",(function(){return r("lFZVg").isImageMimeTypeSupportedByBrowser})),e(t.exports,"isDocumentMimeTypeSupportedByBrowser",(function(){return r("lFZVg").isDocumentMimeTypeSupportedByBrowser})),e(t.exports,"isMimeTypeSupportedByBrowser",(function(){return r("lFZVg").isMimeTypeSupportedByBrowser})),e(t.exports,"isImageMimeTypeSupportedByServer",(function(){return r("0oxuu").isImageMimeTypeSupportedByServer})),e(t.exports,"isDocumentMimeTypeSupportedByServer",(function(){return r("0oxuu").isDocumentMimeTypeSupportedByServer})),e(t.exports,"isAudioMimeTypeSupportedByServer",(function(){return r("0oxuu").isAudioMimeTypeSupportedByServer})),e(t.exports,"isVideoMimeTypeSupportedByServer",(function(){return r("0oxuu").isVideoMimeTypeSupportedByServer})),e(t.exports,"isUnknownMimeTypeSupportedByServer",(function(){return r("0oxuu").isUnknownMimeTypeSupportedByServer})),e(t.exports,"isMimeTypeSupportedByServer",(function(){return r("0oxuu").isMimeTypeSupportedByServer})),e(t.exports,"createFileStateSubject",(function(){return r("1ynVu").createFileStateSubject})),e(t.exports,"safeUnsubscribe",(function(){return r("jwxNO").safeUnsubscribe})),e(t.exports,"isFileIdentifier",(function(){return r("6iNqK").isFileIdentifier})),e(t.exports,"isExternalImageIdentifier",(function(){return r("6iNqK").isExternalImageIdentifier})),e(t.exports,"isDifferentIdentifier",(function(){return r("6iNqK").isDifferentIdentifier})),e(t.exports,"withMediaClient",(function(){return r("kOI3I").withMediaClient})),e(t.exports,"getMediaClient",(function(){return r("kOI3I").getMediaClient})),e(t.exports,"globalMediaEventEmitter",(function(){return r("htC9b").globalMediaEventEmitter})),e(t.exports,"isMediaBlobUrl",(function(){return r("f7SFO").isMediaBlobUrl})),e(t.exports,"getAttrsFromUrl",(function(){return r("f7SFO").getAttrsFromUrl})),e(t.exports,"addFileAttrsToUrl",(function(){return r("f7SFO").addFileAttrsToUrl})),e(t.exports,"objectToQueryString",(function(){return r("f7SFO").objectToQueryString})),e(t.exports,"RECENTS_COLLECTION",(function(){return r("d2lcG").RECENTS_COLLECTION})),e(t.exports,"MAX_RESOLUTION",(function(){return r("d2lcG").MAX_RESOLUTION}));r("hRAeJ"),r("1C8SG"),r("12EjM"),r("kxIOh"),r("7bwtU");r("kBKOq");r("iAPl7"),r("5qT7v"),r("lvJTv"),r("7Lt7J"),r("aFFZa"),r("XeEm5"),r("ApfW3"),r("ApfW3"),r("bDnO8"),r("9Zkoa"),r("dWzwy"),r("bADUQ"),r("8190B"),r("hRnd3"),r("4KjvQ"),r("kJdUD"),r("8swuG"),r("75Jol"),r("8WkbS"),r("fAIAn"),r("lFZVg"),r("0oxuu"),r("1ynVu"),r("jwxNO"),r("6iNqK"),r("kOI3I"),r("htC9b"),r("f7SFO"),r("d2lcG")})),r.register("hRAeJ",(function(n,o){e(n.exports,"MediaStore",(function(){return w})),e(n.exports,"MediaStoreError",(function(){return r("1C8SG").MediaStoreError})),e(n.exports,"isMediaStoreError",(function(){return r("1C8SG").isMediaStoreError}));var i=r("9ePZF"),a=r("cNgp7"),c=r("go2dD"),u=r("4NDMl"),s=r("l15hj"),p=r("d2lcG"),l=r("7bwtU"),f=r("aFFZa"),d=r("ApfW3"),m=r("8PLzt");r("1C8SG");function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?h(Object(n),!0).forEach((function(r){t(s)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x={"max-age":p.FILE_CACHE_MAX_AGE,allowAnimated:!0,mode:"crop"},g={limit:30,sortDirection:"desc"},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return v(v(v({},x),e),t?{width:p.MAX_RESOLUTION,height:p.MAX_RESOLUTION}:{})},b={Accept:"application/json","Content-Type":"application/json"},w=function(){function e(r,n){var o=this;t(c)(this,e),t(s)(this,"resolveAuth",(function(e){return m.default(o.config.authProvider,e)})),this.config=r,this.featureFlags=n}var r,n,o,h,x,w,S,k,O,E,T;return t(u)(e,[{key:"getCollectionItems",value:(T=t(a)(t(i).mark((function e(r,n){var o,a,c,u,s,p,l,f;return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v(v({},o={method:"GET",endpoint:"/collection/{collectionName}/items"}),{},{authContext:{collectionName:r},params:v(v({},g),n),headers:{Accept:"application/json"}}),e.next=4,this.request("/collection/".concat(r,"/items"),a);case 4:return c=e.sent,e.next=7,d.createMapResponseToJson(o)(c);case 7:return u=e.sent,s=u.data,p=s.contents,l=s.nextInclusiveStartKey,f=p.filter((function(e){return e.details.size&&e.details.size>0})),e.abrupt("return",{data:{contents:f,nextInclusiveStartKey:l}});case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return T.apply(this,arguments)})},{key:"removeCollectionFile",value:(E=t(a)(t(i).mark((function e(r,n,o){var a,c;return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={actions:[{action:"remove",item:{type:"file",id:r,occurrenceKey:o}}]},c=v(v({},{method:"PUT",endpoint:"/collection/{collectionName}"}),{},{authContext:{collectionName:n},headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)}),e.next=5,this.request("/collection/".concat(n),c);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return E.apply(this,arguments)})},{key:"createUpload",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0,r={method:"POST",endpoint:"/upload"},n=v(v({},r),{},{authContext:{collectionName:t},params:{createUpTo:e},headers:{Accept:"application/json"}});return this.request("/upload",n).then(d.createMapResponseToJson(r))}},{key:"uploadChunk",value:(O=t(a)(t(i).mark((function e(r,n,o){var a;return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v(v({},{method:"PUT",endpoint:"/chunk/{etag}"}),{},{authContext:{collectionName:o},body:n}),e.next=4,this.request("/chunk/".concat(r),a);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return O.apply(this,arguments)})},{key:"probeChunks",value:function(e,t){var r={method:"POST",endpoint:"/chunk/probe"},n=v(v({},r),{},{authContext:{collectionName:t},headers:b,body:JSON.stringify({chunks:e})});return this.request("/chunk/probe",n).then(d.createMapResponseToJson(r))}},{key:"createFileFromUpload",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={method:"POST",endpoint:"/file/upload"},n=v(v({},r),{},{authContext:{collectionName:t.collection},params:t,headers:b,body:JSON.stringify(e)});return this.request("/file/upload",n).then(d.createMapResponseToJson(r))}},{key:"touchFiles",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={method:"POST",endpoint:"/upload/createWithFiles"},n=v(v({},r),{},{authContext:{collectionName:t.collection},headers:b,body:JSON.stringify(e)});return this.request("/upload/createWithFiles",n).then(d.createMapResponseToJson(r))}},{key:"getFile",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={method:"GET",endpoint:"/file/{fileId}"},n=v(v({},r),{},{authContext:{collectionName:t.collection},params:t});return this.request("/file/".concat(e),n).then(d.createMapResponseToJson(r))}},{key:"getFileImageURL",value:(k=t(a)(t(i).mark((function e(r,n){var o,a,c;return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(n||{}).collection,e.next=3,this.resolveAuth({collectionName:o});case 3:return a=e.sent,c={params:y(n),auth:a},e.abrupt("return",d.createUrl("".concat(a.baseUrl,"/file/").concat(r,"/image"),c));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return k.apply(this,arguments)})},{key:"getFileBinaryURL",value:(S=t(a)(t(i).mark((function e(r,n){var o,a;return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.resolveAuth({collectionName:n});case 2:return o=e.sent,a={params:{dl:!0,collection:n,"max-age":p.FILE_CACHE_MAX_AGE},auth:o},e.abrupt("return",d.createUrl("".concat(o.baseUrl,"/file/").concat(r,"/binary"),a));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return S.apply(this,arguments)})},{key:"getArtifactURL",value:(w=t(a)(t(i).mark((function e(r,n,o){var a,c,u;return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=l.getArtifactUrl(r,n)){e.next=3;break}throw new Error("artifact ".concat(n," not found"));case 3:return e.next=5,this.resolveAuth({collectionName:o});case 5:return c=e.sent,u={params:{collection:o,"max-age":p.FILE_CACHE_MAX_AGE},auth:c},e.abrupt("return",d.createUrl("".concat(c.baseUrl).concat(a),u));case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return w.apply(this,arguments)})},{key:"getImage",value:(x=t(a)(t(i).mark((function e(r,n,o,a){var c,u,s;return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=v(v({},u={method:"GET",endpoint:"/file/{fileId}/image"}),{},{authContext:{collectionName:n&&n.collection},params:y(n,a),headers:c}),e.abrupt("return",this.request("/file/".concat(r,"/image"),s,o).then(d.createMapResponseToBlob(u)));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return x.apply(this,arguments)})},{key:"getItems",value:(h=t(a)(t(i).mark((function e(r,n){var o,a,c;return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.map((function(e){return{type:"file",id:e,collection:n}})),c=v(v({},a={method:"POST",endpoint:"/items"}),{},{authContext:{collectionName:n},headers:b,body:JSON.stringify({descriptors:o})}),e.abrupt("return",this.request("/items",c).then(d.createMapResponseToJson(a)));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"getImageMetadata",value:(o=t(a)(t(i).mark((function e(r,n){var o,a;return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v(v({},o={method:"GET",endpoint:"/file/{fileId}/image/metadata"}),{},{authContext:{collectionName:n&&n.collection},params:n}),e.abrupt("return",this.request("/file/".concat(r,"/image/metadata"),a).then(d.createMapResponseToJson(o)));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"appendChunksToUpload",value:(n=t(a)(t(i).mark((function e(r,n,o){var a;return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v(v({},{method:"PUT",endpoint:"/upload/{uploadId}/chunks"}),{},{authContext:{collectionName:o},headers:b,body:JSON.stringify(n)}),e.next=4,this.request("/upload/".concat(r,"/chunks"),a);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"copyFileWithToken",value:function(e,t){var r={method:"POST",endpoint:"/file/copy/withToken"},n=v(v({},r),{},{authContext:{collectionName:t.collection},params:t,headers:b,body:JSON.stringify(e)});return this.request("/file/copy/withToken",n).then(d.createMapResponseToJson(r))}},{key:"request",value:(r=t(a)(t(i).mark((function e(r){var n,o,a,c,u,s,p,l,d,m,h,v=arguments;return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.length>1&&void 0!==v[1]?v[1]:{method:"GET",endpoint:void 0,authContext:{}},o=v.length>2?v[2]:void 0,a=n.method,c=n.endpoint,u=n.authContext,s=n.params,p=n.headers,l=n.body,d=n.clientOptions,e.next=5,this.resolveAuth(u);case 5:return m=e.sent,e.next=8,f.request("".concat(m.baseUrl).concat(r),{method:a,endpoint:c,auth:m,params:s,headers:p,body:l,clientOptions:d},o);case 8:return F((h=e.sent).headers.get("x-media-region")),e.abrupt("return",h);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})}]),e}();function F(e){e&&window&&window.sessionStorage&&(window.sessionStorage.getItem("media-api-region")!==e&&window.sessionStorage.setItem("media-api-region",e))}})),r.register("d2lcG",(function(t,r){e(t.exports,"RECENTS_COLLECTION",(function(){return n})),e(t.exports,"FILE_CACHE_MAX_AGE",(function(){return o})),e(t.exports,"MAX_RESOLUTION",(function(){return i}));var n="recents",o=2592e3,i=4096})),r.register("7bwtU",(function(t,r){e(t.exports,"getArtifactUrl",(function(){return n}));var n=function(e,t){var r=e[t];if(r&&r.url)return r.url}})),r.register("aFFZa",(function(n,o){e(n.exports,"request",(function(){return u})),e(n.exports,"RequestError",(function(){return r("XeEm5").RequestError})),e(n.exports,"isRequestError",(function(){return r("XeEm5").isRequestError})),e(n.exports,"isRateLimitedError",(function(){return r("ApfW3").isRateLimitedError}));var i=r("9ePZF"),a=r("cNgp7"),c=(r("XeEm5"),r("ApfW3"));c=r("ApfW3");function u(e){return s.apply(this,arguments)}function s(){return s=t(a)(t(i).mark((function e(r){var n,o,a,u,s,p,l,f,d,m,h,v,x,g=arguments;return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g.length>1&&void 0!==g[1]?g[1]:{},o=g.length>2?g[2]:void 0,a=n.method,u=void 0===a?"GET":a,s=n.endpoint,p=n.auth,l=n.params,f=n.headers,d=n.body,m=n.clientOptions,h=(void 0===m?{}:m).retryOptions,v={method:u,endpoint:s},x=function(){return fetch(c.createUrl(r,{params:l}),{method:u,body:d,headers:c.withAuth(p)(f),signal:o&&o.signal}).then(c.createProcessFetchResponse(v))},e.abrupt("return",c.fetchRetry(x,v,h));case 7:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}})),r.register("XeEm5",(function(n,o){e(n.exports,"RequestError",(function(){return l})),e(n.exports,"isRequestError",(function(){return f}));var i=r("go2dD"),a=r("4NDMl"),c=r("9OLyr"),u=r("89Kz4"),s=r("eP3fJ");function p(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=t(s)(e);if(r){var i=t(s)(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return t(u)(this,n)}}var l=function(e){t(c)(n,e);var r=p(n);function n(e,o,a){var c;return t(i)(this,n),(c=r.call(this,e)).reason=e,c.metadata=o,c.innerError=a,c}return t(a)(n,[{key:"attributes",get:function(){var e=this.reason,t=this.metadata;return{reason:e,method:(t=void 0===t?{}:t).method,endpoint:t.endpoint,attempts:t.attempts,clientExhaustedRetries:t.clientExhaustedRetries,statusCode:t.statusCode,innerError:this.innerError}}}]),n}(r("kBKOq").BaseMediaClientError);function f(e){return e instanceof l}})),r.register("kBKOq",(function(n,o){e(n.exports,"BaseMediaClientError",(function(){return f})),e(n.exports,"isMediaClientError",(function(){return r("iAPl7").isMediaClientError})),e(n.exports,"getMediaClientErrorReason",(function(){return r("iAPl7").getMediaClientErrorReason}));var i=r("go2dD"),a=r("47NZN"),c=r("9OLyr"),u=r("89Kz4"),s=r("eP3fJ"),p=r("7XnVF");r("iAPl7");function l(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=t(s)(e);if(r){var i=t(s)(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return t(u)(this,n)}}var f=function(e){t(c)(n,e);var r=l(n);function n(e){var o;return t(i)(this,n),(o=r.call(this,e)).message=e,Object.setPrototypeOf(t(a)(o),(this instanceof n?this.constructor:void 0).prototype),"captureStackTrace"in Error&&Error.captureStackTrace(t(a)(o),this instanceof n?this.constructor:void 0),o}return n}(t(p)(Error))})),r.register("iAPl7",(function(t,r){function n(e){return e instanceof Object&&"attributes"in e&&e.attributes instanceof Object&&"reason"in e.attributes&&e instanceof Error}function o(e){return n(e)?e.attributes.reason:"unknown"}e(t.exports,"isMediaClientError",(function(){return n})),e(t.exports,"getMediaClientErrorReason",(function(){return o}))})),r.register("ApfW3",(function(n,o){e(n.exports,"isAbortedRequestError",(function(){return h})),e(n.exports,"isRateLimitedError",(function(){return x})),e(n.exports,"createUrl",(function(){return g})),e(n.exports,"withAuth",(function(){return y})),e(n.exports,"mapResponseToJson",(function(){return b})),e(n.exports,"mapResponseToBlob",(function(){return F})),e(n.exports,"mapResponseToVoid",(function(){return k})),e(n.exports,"createMapResponseToJson",(function(){return O})),e(n.exports,"createMapResponseToBlob",(function(){return E})),e(n.exports,"fetchRetry",(function(){return P})),e(n.exports,"createProcessFetchResponse",(function(){return C}));var i=r("9ePZF"),a=r("cNgp7"),c=r("l15hj"),u=r("dZ2WP"),s=r("kEtHW"),p=r("h063e"),l=r("XeEm5");function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?f(Object(n),!0).forEach((function(r){t(c)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e){return new Promise((function(t){return setTimeout(t,e)}))}function h(e){return e instanceof Error&&"request_cancelled"===e.message||!!e&&"AbortError"===e.name}function v(e){return e instanceof TypeError}function x(e){return!!e&&l.isRequestError(e)&&429===e.attributes.statusCode||!!e&&!!e.message&&e.message.includes("429")}function g(e,t){var r=t.params,n=t.auth,o=function(e){var t=e.indexOf("?");return t>0?{baseUrl:e.substring(0,t),queryParams:s.parse(e.substring(t+1,e.length))}:{baseUrl:e}}(e),i=o.baseUrl,a=o.queryParams,c=n&&p.mapAuthToQueryParameters(n),u=s.stringify(d(d(d({},a),r),c)),l=u.length>0;return"".concat(i).concat(l?"?".concat(u):"")}function y(e){return function(t){return e?d(d({},t||{}),function(e){return u.isClientBasedAuth(e)?{"X-Client-Id":e.clientId,Authorization:"Bearer ".concat(e.token)}:{"X-Issuer":e.asapIssuer,Authorization:"Bearer ".concat(e.token)}}(e)):t}}function b(e){return w.apply(this,arguments)}function w(){return(w=t(a)(t(i).mark((function e(r){return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.warn("Helper is deprecated and will be remove in the next major version"),e.prev=1,e.next=4,r.json();case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),new l.RequestError("serverInvalidBody",{statusCode:r.status},e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function F(e){return S.apply(this,arguments)}function S(){return(S=t(a)(t(i).mark((function e(r){return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.warn("Helper is deprecated and will be remove in the next major version"),e.prev=1,e.next=4,r.blob();case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),new l.RequestError("serverInvalidBody",{statusCode:r.status},e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function k(){return console.warn("Helper is deprecated and will be remove in the next major version"),Promise.resolve()}function O(e){return function(){var r=t(a)(t(i).mark((function r(n){return t(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.json();case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),new l.RequestError("serverInvalidBody",d(d({},e),{},{statusCode:n.status}),t.t0);case 9:case"end":return t.stop()}}),r,null,[[0,6]])})));return function(e){return r.apply(this,arguments)}}()}function E(e){return function(){var r=t(a)(t(i).mark((function r(n){return t(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.blob();case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),new l.RequestError("serverInvalidBody",d(d({},e),{},{statusCode:n.status}),t.t0);case 9:case"end":return t.stop()}}),r,null,[[0,6]])})));return function(e){return r.apply(this,arguments)}}()}var T={startTimeoutInMs:1e3,maxAttempts:5,factor:2};function M(e,t){var r=e.reason,n=e.metadata,o=e.innerError;return new l.RequestError(r,d(d({},n),t),o)}function P(e,t){return I.apply(this,arguments)}function I(){return I=t(a)(t(i).mark((function e(r,n){var o,c,u,s,p,f,x,g,y,b=arguments;return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=b.length>2&&void 0!==b[2]?b[2]:{},c=d(d({},T),o),u=c.startTimeoutInMs,s=c.maxAttempts,p=c.factor,f=0,x=u,y=function(){var e=t(a)(t(i).mark((function e(){return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(x);case 2:x*=p,f+=1;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();case 6:if(!(f<s)){e.next=24;break}return e.prev=7,e.next=10,r();case 10:return e.abrupt("return",e.sent);case 13:if(e.prev=13,e.t0=e.catch(7),g=e.t0,!h(e.t0)){e.next=18;break}throw new l.RequestError("clientAbortedRequest",n,e.t0);case 18:if((v(e.t0)||l.isRequestError(e.t0))&&(!l.isRequestError(e.t0)||e.t0.metadata&&e.t0.metadata.statusCode&&!(e.t0.metadata.statusCode<500))){e.next=20;break}throw e.t0;case 20:return e.next=22,y();case 22:e.next=6;break;case 24:if(!l.isRequestError(g)){e.next=26;break}throw M(g,{attempts:f,clientExhaustedRetries:!0});case 26:throw new l.RequestError("serverUnexpectedError",d(d({},n),{},{attempts:f,clientExhaustedRetries:!0}),g);case 27:case"end":return e.stop()}}),e,null,[[7,13]])}))),I.apply(this,arguments)}function C(e){return function(t){if(t.ok||t.status<400)return t;var r=function(e,t){var r=t.status,n=function(e){switch(e){case 400:return"serverBadRequest";case 401:return"serverUnauthorized";case 403:return"serverForbidden";case 404:return"serverNotFound";case 429:return"serverRateLimited";case 500:return"serverInternalError";case 502:return"serverBadGateway";default:return"serverUnexpectedError"}}(r);return new l.RequestError(n,d(d({},e),{},{statusCode:r}))}(e,t);throw r}}})),r.register("h063e",(function(t,n){e(t.exports,"mapAuthToQueryParameters",(function(){return i}));var o=r("dZ2WP");function i(e){return o.isClientBasedAuth(e)?{client:e.clientId,token:e.token}:{issuer:e.asapIssuer,token:e.token}}})),r.register("8PLzt",(function(n,o){e(n.exports,"default",(function(){return p}));var i=r("9ePZF"),a=r("cNgp7"),c=r("1C8SG"),u=r("Va8uC"),s=function(e){return e instanceof Object&&"exp"in e&&"number"==typeof e.exp},p=function(){var e=t(a)(t(i).mark((function e(r,n){var o,a,p,l,f,d=arguments;return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=d.length>2&&void 0!==d[2]?d[2]:Date.now(),e.prev=1,e.next=4,r(n);case 4:a=e.sent,e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),new c.MediaStoreError("failedAuthProvider",e.t0);case 10:p=0;try{l=u.default(a.token),s(l)&&(f=l.exp,p=1e3*f)}catch(e){}if(!(p&&p-1e4<=o)){e.next=14;break}throw new c.MediaStoreError("tokenExpired");case 14:return e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,r){return e.apply(this,arguments)}}()})),r.register("1C8SG",(function(n,o){e(n.exports,"MediaStoreError",(function(){return l})),e(n.exports,"isMediaStoreError",(function(){return f}));var i=r("go2dD"),a=r("4NDMl"),c=r("9OLyr"),u=r("89Kz4"),s=r("eP3fJ");function p(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=t(s)(e);if(r){var i=t(s)(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return t(u)(this,n)}}var l=function(e){t(c)(n,e);var r=p(n);function n(e,o){var a;return t(i)(this,n),(a=r.call(this,e)).reason=e,a.innerError=o,a}return t(a)(n,[{key:"attributes",get:function(){return{reason:this.reason,innerError:this.innerError}}}]),n}(r("kBKOq").BaseMediaClientError);function f(e){return e instanceof l}})),r.register("Va8uC",(function(t,r){e(t.exports,"default",(function(){return o}));var n=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("Illegal base64url string!")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return atob(t)}};function o(e){try{var t=e.split(".")[1];return JSON.parse(n(t))}catch(e){throw new Error("Invalid token specified: "+e.message)}}})),r.register("12EjM",(function(n,o){e(n.exports,"UploadController",(function(){return c}));var i=r("go2dD"),a=r("4NDMl"),c=function(){function e(){t(i)(this,e)}return t(a)(e,[{key:"setAbort",value:function(e){this.abortFunction=e}},{key:"abort",value:function(){this.abortFunction&&this.abortFunction()}}]),e}()})),r.register("kxIOh",(function(t,n){e(t.exports,"isPreviewableType",(function(){return i})),e(t.exports,"isMediaCollectionItemFullDetails",(function(){return a}));var o=r("2qBZt"),i=function(e,t){var r=["audio","video","image"];return o.getMediaFeatureFlag("newCardExperience",t)?[].concat(r,["doc"]).indexOf(e)>-1:r.indexOf(e)>-1},a=function(e){return!!e.mediaType&&!!e.mimeType&&!!e.processingStatus}})),r.register("5qT7v",(function(n,o){e(n.exports,"isUploadingFileState",(function(){return u})),e(n.exports,"isProcessingFileState",(function(){return s})),e(n.exports,"isProcessedFileState",(function(){return p})),e(n.exports,"isErrorFileState",(function(){return l})),e(n.exports,"isPreviewableFileState",(function(){return f})),e(n.exports,"isFinalFileState",(function(){return d})),e(n.exports,"isImageRepresentationReady",(function(){return m})),e(n.exports,"mapMediaFileToFileState",(function(){return h})),e(n.exports,"mapMediaItemToFileState",(function(){return v}));var i=r("l15hj");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?a(Object(n),!0).forEach((function(r){t(i)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e){return"uploading"===e.status},s=function(e){return"processing"===e.status},p=function(e){return"processed"===e.status},l=function(e){return"error"===e.status},f=function(e){return!l(e)&&!!e.preview},d=function(e){return["processed","failed-processing","error"].includes(e.status)},m=function(e){switch(e.status){case"processing":case"processed":case"failed-processing":return!(!e.representations||!e.representations.image);default:return!1}},h=function(e){var t=e.data,r=t.id,n=t.name,o=t.size,i=t.processingStatus,a=t.artifacts,u={id:r,name:n,size:o,mediaType:t.mediaType,mimeType:t.mimeType,artifacts:a,representations:t.representations,createdAt:t.createdAt};switch(i){case"pending":case void 0:return c(c({},u),{},{status:"processing"});case"succeeded":return c(c({},u),{},{status:"processed"});case"failed":return c(c({},u),{},{status:"failed-processing"})}},v=function(e,t){return h({data:c({id:e},t)})}})),r.register("lvJTv",(function(n,o){e(n.exports,"StreamsCache",(function(){return u})),e(n.exports,"getFileStreamsCache",(function(){return s}));var i,a=r("go2dD"),c=r("4NDMl"),u=function(){function e(r){t(a)(this,e),this.streams=r}return t(c)(e,[{key:"has",value:function(e){return!!this.streams.find(e)}},{key:"set",value:function(e,t){this.streams.set(e,t)}},{key:"get",value:function(e){return this.streams.get(e)}},{key:"getOrInsert",value:function(e,t){return this.has(e)||this.set(e,t()),this.get(e)}},{key:"removeAll",value:function(){this.streams.removeAll()}},{key:"remove",value:function(e){this.streams.remove(e)}},{key:"size",get:function(){return this.streams.size}}]),e}(),s=function(){if(!i){var e=r("dZ2WP").mediaState;i=new u(e.streams)}return i}})),r.register("7Lt7J",(function(n,o){e(n.exports,"uploadFile",(function(){return v}));var i=r("9ePZF"),a=r("cNgp7"),c=r("f4thX"),u=r("8mYKC"),s=r("8Abgr"),p=r("iyWDv"),l=function(){var e=t(a)(t(i).mark((function e(r){var n;return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.createHasher();case 2:return n=e.sent,e.abrupt("return",n.hash(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e,r){return function(){var n=t(a)(t(i).mark((function n(o){var a,c;return t(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.probeChunks(x(o),r);case 2:return a=t.sent,c=a.data.results,t.abrupt("return",Object.values(c).map((function(e){return e.exists})));case 5:case"end":return t.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},d=function(e,t){return function(r){return e.uploadChunk(r.hash,r.blob,t)}},m=function(e,r,n){var o=0;return function(){var c=t(a)(t(i).mark((function a(c){return t(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,r;case 3:return t.t1=t.sent,t.t2={chunks:x(c),offset:o},t.t3=n,t.next=8,t.t0.appendChunksToUpload.call(t.t0,t.t1,t.t2,t.t3);case 8:o+=c.length;case 9:case"end":return t.stop()}}),a)})));return function(e){return c.apply(this,arguments)}}()},h=function(){var e=t(a)(t(i).mark((function e(r,n,o,a){var c,u,s,p,l;return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.collection,u=r.name,s=r.mimeType,p=o.id,l=o.occurrenceKey,e.abrupt("return",n.createFileFromUpload({uploadId:a,name:u,mimeType:s},{occurrenceKey:l,collection:c,replaceFileId:p}));case 3:case"end":return e.stop()}}),e)})));return function(t,r,n,o){return e.apply(this,arguments)}}(),v=function(e,t,r,n){var o=e.content,i=e.collection,a=r.deferredUploadId,p=c.chunkinator(o,{hashingFunction:l,hashingConcurrency:5,probingBatchSize:100,chunkSize:4194304,uploadingConcurrency:3,uploadingFunction:d(t,i),probingFunction:f(t,i),processingBatchSize:1e3,processingFunction:m(t,a,i)},{onProgress:function(e){n&&n.onProgress(e)}}),v=n&&n.onUploadFinish||function(){},x=u.from(a).pipe(s.concatMap((function(n){return p.pipe(s.concatMap((function(){return u.from(h(e,t,r,n))})))}))).subscribe({error:function(e){return v(e)},complete:function(){return v()}});return{cancel:function(){x.unsubscribe(),v("canceled")}}},x=function(e){return e.map((function(e){return e.hash}))}})),r.register("iyWDv",(function(n,o){e(n.exports,"createHasher",(function(){return u}));var i=r("9ePZF"),a=r("cNgp7"),c=null,u=function(){var e=t(a)(t(i).mark((function e(){var n,o,a,u,s;return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=3,c){e.next=17;break}return e.prev=2,e.next=5,r("hRBBl");case 5:o=e.sent,a=o.WorkerHasher,c=new a(n),e.next=17;break;case 10:return e.prev=10,e.t0=e.catch(2),e.next=14,r("flmyJ");case 14:u=e.sent,s=u.SimpleHasher,c=new s;case 17:return e.abrupt("return",c);case 18:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}()})),r.register("hRBBl",(function(e,t){e.exports=Promise.all([r("1voE5")(r("a28Ji").getBundleURL("iBZQk")+r("l6272").resolve("kKvJH")),r("1voE5")(r("a28Ji").getBundleURL("iBZQk")+r("l6272").resolve("iO809"))]).then((()=>r("17lnh")))})),r.register("flmyJ",(function(e,t){e.exports=Promise.all([r("1voE5")(r("a28Ji").getBundleURL("iBZQk")+r("l6272").resolve("kKvJH")),r("1voE5")(r("a28Ji").getBundleURL("iBZQk")+r("l6272").resolve("8XBYh"))]).then((()=>r("4Uw8n")))})),r.register("bDnO8",(function(n,o){e(n.exports,"PollingFunction",(function(){return h}));var i=r("9ePZF"),a=r("cNgp7"),c=r("go2dD"),u=r("4NDMl"),s=r("l15hj"),p=r("9v9HM"),l=r("9Zkoa");function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?f(Object(n),!0).forEach((function(r){t(s)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m={poll_intervalMs:p.getMediaFeatureFlag("poll_intervalMs"),poll_maxAttempts:p.getMediaFeatureFlag("poll_maxAttempts"),poll_backoffFactor:p.getMediaFeatureFlag("poll_backoffFactor"),poll_maxIntervalMs:p.getMediaFeatureFlag("poll_maxIntervalMs"),poll_maxGlobalFailures:p.getMediaFeatureFlag("poll_maxGlobalFailures")},h=function(){function e(r){t(c)(this,e),t(s)(this,"poll_intervalMs",0),t(s)(this,"attempt",1),t(s)(this,"shouldIterate",!0),t(s)(this,"timeoutId",0),this.options=d(d({},m),r),this.poll_intervalMs=this.options.poll_intervalMs}var r;return t(u)(e,[{key:"execute",value:(r=t(a)(t(i).mark((function r(n){var o,a,c,u=this;return t(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=this.options,a=o.poll_maxAttempts,c=o.poll_maxGlobalFailures,!(e.failures>=c)){t.next=5;break}return t.abrupt("return",this.fail(new l.PollingError("pollingMaxFailuresExceeded",this.attempt)));case 5:if(0!==a){t.next=7;break}return t.abrupt("return",this.fail(new l.PollingError("pollingMaxAttemptsExceeded",this.attempt)));case 7:return t.prev=7,this.shouldIterate=!1,t.next=11,n();case 11:if(this.shouldIterate){t.next=13;break}return t.abrupt("return");case 13:if(!(this.attempt>=a)){t.next=15;break}return t.abrupt("return",this.fail(new l.PollingError("pollingMaxAttemptsExceeded",this.attempt)));case 15:this.poll_intervalMs=this.getIntervalMsForIteration(this.attempt),this.attempt++,this.timeoutId=window.setTimeout((function(){return u.execute(n)}),this.poll_intervalMs),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(7),this.fail(t.t0);case 23:case"end":return t.stop()}}),r,this,[[7,20]])}))),function(e){return r.apply(this,arguments)})},{key:"fail",value:function(t){var r=this.onError;e.failures+=1,this.cancel(),r&&r(t)}},{key:"getIntervalMsForIteration",value:function(e){var t=this.options.poll_intervalMs;if(1===e)return t;for(var r=2;r<=e;r++)t*=this.options.poll_backoffFactor;return Math.min(Math.round(t),this.options.poll_maxIntervalMs)}},{key:"next",value:function(){this.shouldIterate=!0}},{key:"cancel",value:function(){window.clearTimeout(this.timeoutId),this.timeoutId=0}}]),e}();t(s)(h,"failures",0)})),r.register("9Zkoa",(function(n,o){e(n.exports,"PollingError",(function(){return l})),e(n.exports,"isPollingError",(function(){return f}));var i=r("go2dD"),a=r("4NDMl"),c=r("9OLyr"),u=r("89Kz4"),s=r("eP3fJ");function p(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=t(s)(e);if(r){var i=t(s)(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return t(u)(this,n)}}var l=function(e){t(c)(n,e);var r=p(n);function n(e,o){var a;return t(i)(this,n),(a=r.call(this,e)).reason=e,a.attempts=o,a}return t(a)(n,[{key:"attributes",get:function(){return{reason:this.reason,attempts:this.attempts}}}]),n}(r("kBKOq").BaseMediaClientError);function f(e){return e instanceof l}})),r.register("dWzwy",(function(n,o){e(n.exports,"FileFetcherImpl",(function(){return L})),e(n.exports,"isFileFetcherError",(function(){return r("bADUQ").isFileFetcherError})),e(n.exports,"FileFetcherError",(function(){return r("bADUQ").FileFetcherError}));var i=r("9ePZF"),a=r("cNgp7"),c=r("go2dD"),u=r("4NDMl"),s=r("l15hj"),p=r("bBFyf"),l=r("lI4TS"),f=r("75Wcu"),d=r("8Abgr"),m=r("4tbIQ"),h=r("dZ2WP"),v=r("6fIIb"),x=r("hRAeJ"),g=r("5qT7v"),y=r("bADUQ"),b=r("7Lt7J"),w=r("lvJTv"),F=r("htC9b"),S=r("d2lcG"),k=r("6EHwv"),O=r("gvlok"),E=r("d4RIQ"),T=r("265yi"),M=r("iZ8V4"),P=r("75Jol"),I=r("fAIAn"),C=r("8WkbS"),R=r("1ynVu"),j=r("lFZVg"),B=r("4RWH2"),A=r("bDnO8"),U=r("5XRTe"),D=r("9v9HM");y=r("bADUQ");function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?N(Object(n),!0).forEach((function(r){t(s)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=function(){function e(r){var n=this;t(c)(this,e),t(s)(this,"createDownloadFileStream",(function(e,r,o){var c=R.createFileStateSubject(),u=n.mediaStore.featureFlags,s={poll_intervalMs:D.getMediaFeatureFlag("poll_intervalMs",u),poll_maxAttempts:D.getMediaFeatureFlag("poll_maxAttempts",u),poll_backoffFactor:D.getMediaFeatureFlag("poll_backoffFactor",u),poll_maxIntervalMs:D.getMediaFeatureFlag("poll_maxIntervalMs",u),poll_maxGlobalFailures:D.getMediaFeatureFlag("poll_maxGlobalFailures",u)},p=new A.PollingFunction(s);return p.onError=function(e){return c.error(e)},p.execute(t(a)(t(i).mark((function a(){var u,s;return t(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.dataloader.load({id:e,collectionName:r});case 2:if(u=t.sent){t.next=5;break}throw new y.FileFetcherError("emptyItems",e,{collectionName:r,occurrenceKey:o});case 5:if(!U.isEmptyFile(u)){t.next=7;break}throw new y.FileFetcherError("zeroVersionFile",e,{collectionName:r,occurrenceKey:o});case 7:s=g.mapMediaItemToFileState(e,u),c.next(s),t.t0=s.status,t.next="processing"===t.t0?12:"processed"===t.t0?14:16;break;case 12:return p.next(),t.abrupt("break",16);case 14:return c.complete(),t.abrupt("break",16);case 16:case"end":return t.stop()}}),a)})))),c})),this.mediaStore=r,this.dataloader=O.createFileDataloader(r)}var r,n,o;return t(u)(e,[{key:"getFileState",value:function(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.collectionName,i=n.occurrenceKey;if(!t(k)(e)){var a=R.createFileStateSubject();return a.error(new y.FileFetcherError("invalidFileId",e,{collectionName:o,occurrenceKey:i})),a}return w.getFileStreamsCache().getOrInsert(e,(function(){return r.createDownloadFileStream(e,o)}))}},{key:"getCurrentState",value:function(e,t){return P.observableToPromise(this.getFileState(e,t))}},{key:"getArtifactURL",value:function(e,t,r){return this.mediaStore.getArtifactURL(e,t,r)}},{key:"getFileBinaryURL",value:function(e,t){return this.mediaStore.getFileBinaryURL(e,t)}},{key:"touchFiles",value:function(e,t){return this.mediaStore.touchFiles({descriptors:e},{collection:t}).then((function(e){return e.data}))}},{key:"generateUploadableFileUpfrontIds",value:function(e){var r=t(m)(),n=t(m)(),o={fileId:r,occurrenceKey:n,collection:e};return{id:r,occurrenceKey:n,deferredUploadId:this.touchFiles([o],e).then((function(e){return e.created[0].uploadId}))}}},{key:"uploadExternal",value:(o=t(a)(t(i).mark((function e(r,n){var o,c,u,s,p,l,f,d,m=this;return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.generateUploadableFileUpfrontIds(n),c=o.id,u=o.occurrenceKey,s=R.createFileStateSubject(),p=fetch(r).then((function(e){return e.blob()})).catch((function(){})),l=new Promise(function(){var e=t(a)(t(i).mark((function e(r,n){var o;return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p;case 2:(o=e.sent)||n("Could not fetch the blob"),r({value:o,origin:"remote"});case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),f=r.split("/").pop()||"",d={status:"processing",name:f,size:0,mediaType:"unknown",mimeType:"",id:c,occurrenceKey:u,preview:l},s.next(d),w.getFileStreamsCache().set(c,s),e.abrupt("return",new Promise(function(){var e=t(a)(t(i).mark((function e(r,a){var d,h,v,x,g,y;return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p;case 2:if(d=e.sent){e.next=5;break}return e.abrupt("return",a("Could not download remote file"));case 5:return h=d.type,v=d.size,x={content:d,mimeType:h,collection:n,name:f},g=C.getMediaTypeFromMimeType(h),s.next({status:"processing",name:f,size:v,mediaType:g,mimeType:h,id:c,occurrenceKey:u,preview:l}),m.upload(x,void 0,o),e.next=12,I.getDimensionsFromBlob(g,d);case 12:y=e.sent,r({dimensions:y,uploadableFileUpfrontIds:o});case 14:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"upload",value:function(e,t,r){var n=this;"string"==typeof e.content&&(e.content=M.convertBase64ToBlob(e.content));var o=e.content,i=e.name,a=void 0===i?"":i,c=e.collection;r||(r=this.generateUploadableFileUpfrontIds(c));var u,s=r.id,m=r.occurrenceKey,h="",v=0,x=E.getMediaTypeFromUploadableFile(e),g=R.createFileStateSubject(),y=new p.Subscription;o instanceof Blob&&(v=o.size,h=o.type,j.isMimeTypeSupportedByBrowser(o.type)&&(u={value:o,origin:"local"}));var F={id:s,occurrenceKey:m,name:a,size:v,mediaType:x,mimeType:h,preview:u},S=function(e){g.next(q(q({status:"uploading"},F),{},{progress:e}))},k=b.uploadFile(e,this.mediaStore,r,{onUploadFinish:function(e){if(e)return g.error(e);y.add(B.shouldFetchRemoteFileStatesObservable(x,h,u).pipe(d.concatMap((function(e){return e?n.createDownloadFileStream(s,c,m).pipe(f.map((function(e){return q(q(q({},F),e),T.overrideMediaTypeIfUnknown(e,x))}))):l.of(q({status:"processing",representations:{}},F))}))).subscribe(g))},onProgress:S}).cancel;return w.getFileStreamsCache().set(s,g),setTimeout((function(){S(0)}),0),t&&t.setAbort((function(){k(),y.unsubscribe()})),g}},{key:"downloadBinary",value:(n=t(a)(t(i).mark((function e(r){var n,o,a,c=arguments;return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:"download",o=c.length>2?c[2]:void 0,e.next=4,this.mediaStore.getFileBinaryURL(r,o);case 4:a=e.sent,v.downloadUrl(a,{name:n}),F.globalMediaEventEmitter.emit("media-viewed",{fileId:r,isUserCollection:o===S.RECENTS_COLLECTION,viewingLevel:"download"});case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"copyFile",value:(r=t(a)(t(i).mark((function e(r,n){var o,a,c,u,s,p,l,f,d,m,v,y,b,F,S,k,O,E,M,P,I,j,A,U,D,N,L,_=arguments;return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=_.length>2&&void 0!==_[2]?_[2]:{},a=r.authProvider,c=r.collection,u=r.id,s=n.authProvider,p=n.collection,l=n.replaceFileId,f=n.occurrenceKey,d=o.preview,m=o.mimeType,v=n.mediaStore||new x.MediaStore({authProvider:s}),e.t0=h.authToOwner,e.next=8,a({collectionName:c});case 8:return e.t1=e.sent,y=e.t0(e.t1),b={sourceFile:{id:u,collection:c,owner:y}},F={collection:p,replaceFileId:l,occurrenceKey:f},S=w.getFileStreamsCache(),e.prev=13,e.next=16,v.copyFileWithToken(b,F);case 16:if(O=e.sent,E=O.data,M=q(q({},E),m?{mimeType:m}:void 0),P=M.id,I=M.mimeType,j=I?C.getMediaTypeFromMimeType(I):"unknown",A=g.mapMediaFileToFileState({data:M}),U=S.get(P),D=U||R.createFileStateSubject(),N=!g.isErrorFileState(A)&&d?{preview:d}:{},e.t2=!g.isFinalFileState(A)&&I,!e.t2){e.next=30;break}return e.next=29,B.shouldFetchRemoteFileStates(j,I,d);case 29:e.t2=e.sent;case 30:if(!e.t2){e.next=35;break}D.next(q(q(q({},A),T.overrideMediaTypeIfUnknown(A,j)),N)),k=this.createDownloadFileStream(P,p,f).subscribe({next:function(e){return D.next(q(q(q({},e),T.overrideMediaTypeIfUnknown(e,j)),!g.isErrorFileState(e)&&N))},error:function(e){return D.error(e)},complete:function(){return D.complete()}}),e.next=36;break;case 35:g.isProcessingFileState(A)||D.next(q(q({},A),!g.isErrorFileState(A)&&N));case 36:return S.has(P)||w.getFileStreamsCache().set(P,D),e.abrupt("return",E);case 40:throw e.prev=40,e.t3=e.catch(13),k&&k.unsubscribe(),l&&((L=S.get(l))?L.error(e.t3):S.set(u,R.createFileStateSubject(e.t3))),e.t3;case 45:case"end":return e.stop()}}),e,this,[[13,40]])}))),function(e,t){return r.apply(this,arguments)})}]),e}()})),r.register("bADUQ",(function(n,o){e(n.exports,"FileFetcherError",(function(){return l})),e(n.exports,"isFileFetcherError",(function(){return f}));var i=r("go2dD"),a=r("4NDMl"),c=r("9OLyr"),u=r("89Kz4"),s=r("eP3fJ");function p(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=t(s)(e);if(r){var i=t(s)(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return t(u)(this,n)}}var l=function(e){t(c)(n,e);var r=p(n);function n(e,o,a){var c;return t(i)(this,n),(c=r.call(this,e)).reason=e,c.id=o,c.metadata=a,c}return t(a)(n,[{key:"attributes",get:function(){var e=this.reason,t=this.id,r=this.metadata;return{reason:e,id:t,collectionName:(r=void 0===r?{}:r).collectionName,occurrenceKey:r.occurrenceKey}}}]),n}(r("kBKOq").BaseMediaClientError);function f(e){return e instanceof l}})),r.register("htC9b",(function(t,n){e(t.exports,"globalMediaEventEmitter",(function(){return i}));var o=r("dZ2WP"),i={on:function(e,t){o.mediaState.eventEmitter&&o.mediaState.eventEmitter.on(e,t)},off:function(e,t){o.mediaState.eventEmitter&&o.mediaState.eventEmitter.off(e,t)},emit:function(e,t){if(o.mediaState.eventEmitter)return o.mediaState.eventEmitter.emit(e,t)}}})),r.register("gvlok",(function(n,o){e(n.exports,"createFileDataloader",(function(){return l}));var i=r("9ePZF"),a=r("fw3Q6"),c=r("cNgp7"),u=r("gfpNp"),s=function(e,t){return t?"".concat(e,"-").concat(t):e},p=function(e,t){var r=t.reduce((function(e,t){var r=t.id,n=t.collection;return e[s(r,n)]=t.error instanceof Error?t.error:t.details,e}),{});return e.map((function(e){var t=e.id,n=e.collectionName,o=s(t,n);return r[o]||null}))};function l(e){return new(t(u))(function(e){return function(){var r=t(c)(t(i).mark((function r(n){var o,u,s;return t(i).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o="__media-single-file-collection__",u=n.reduce((function(e,t){var r=t.collectionName||o,n=e[r]||[];return-1===n.indexOf(t.id)&&n.push(t.id),e[r]=n,e}),{}),s=[],r.next=5,Promise.all(Object.keys(u).map(function(){var r=t(c)(t(i).mark((function r(n){var c,p,l;return t(i).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=u[n],p=n===o?void 0:n,r.prev=2,r.next=5,e.getItems(c,p);case 5:l=r.sent,s.push.apply(s,t(a)(l.data.items)),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(2),c.forEach((function(e){s.push({id:e,collection:p,error:r.t0})}));case 12:case"end":return r.stop()}}),r,null,[[2,9]])})));return function(e){return r.apply(this,arguments)}}()));case 5:return r.abrupt("return",p(n,s));case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(e),{maxBatchSize:100})}})),r.register("d4RIQ",(function(t,n){e(t.exports,"getMediaTypeFromUploadableFile",(function(){return i}));var o=r("8WkbS"),i=function(e){if(e.content instanceof Blob){var t=e.content.type;return o.getMediaTypeFromMimeType(t)}return"unknown"}})),r.register("8WkbS",(function(t,n){e(t.exports,"getMediaTypeFromMimeType",(function(){return c}));var o=r("grV4H"),i=r("lFZVg"),a=r("0oxuu"),c=function(e){return o.isArchive(e)?"archive":i.isImageMimeTypeSupportedByBrowser(e)||a.isImageMimeTypeSupportedByServer(e)?"image":i.isDocumentMimeTypeSupportedByBrowser(e)||a.isDocumentMimeTypeSupportedByServer(e)?"doc":i.isAudioMimeTypeSupportedByBrowser(e)||a.isAudioMimeTypeSupportedByServer(e)?"audio":i.isVideoMimeTypeSupportedByBrowser(e)||a.isVideoMimeTypeSupportedByServer(e)?"video":"unknown"}})),r.register("grV4H",(function(t,r){e(t.exports,"isArchive",(function(){return n}));var n=function(e){return["application/x-archive","application/x-cpio","application/x-shar","application/x-iso9660-image","application/x-sbx","application/x-tar","application/x-bzip2","application/gzip","application/x-gzip","application/x-lzip","application/x-lzma","application/x-lzop","application/x-snappy-framed","application/x-xz","application/x-compress","application/zstd","application/x-7z-compressed","application/x-ace-compressed","application/x-astrotite-afa","application/x-alz-compressed","application/vnd.android.package-archive","application/x-freearc","application/x-arj","application/x-b1","application/vnd.ms-cab-compressed","application/x-cfs-compressed","application/x-dar","application/x-dgc-compressed","application/x-apple-diskimage","application/x-gca-compressed","application/java-archive","application/x-lzh","application/x-lzx","application/x-rar-compressed","application/x-stuffit","application/x-stuffitx","application/x-gtar","application/x-ms-wim","application/x-xar","application/zip","application/x-zoo","application/x-par2"].indexOf(e.toLowerCase())>-1}})),r.register("lFZVg",(function(t,r){e(t.exports,"isImageMimeTypeSupportedByBrowser",(function(){return n})),e(t.exports,"isDocumentMimeTypeSupportedByBrowser",(function(){return o})),e(t.exports,"isAudioMimeTypeSupportedByBrowser",(function(){return i})),e(t.exports,"isVideoMimeTypeSupportedByBrowser",(function(){return a})),e(t.exports,"isMimeTypeSupportedByBrowser",(function(){return c}));var n=function(e){return["image/apng","image/bmp","image/gif","image/x-icon","image/jpeg","image/png","image/webp"].indexOf(e.toLowerCase())>-1},o=function(e){return"application/pdf"===e.toLowerCase()},i=function(e){return["audio/aac","audio/flac","audio/mp4","audio/mpeg","audio/ogg","audio/x-ogg","audio/wav","audio/x-wav"].indexOf(e.toLowerCase())>-1},a=function(e){return["video/mp4","video/quicktime"].indexOf(e.toLowerCase())>-1},c=function(e){return o(e)||n(e)||i(e)||a(e)}})),r.register("0oxuu",(function(t,r){e(t.exports,"isImageMimeTypeSupportedByServer",(function(){return n})),e(t.exports,"isDocumentMimeTypeSupportedByServer",(function(){return o})),e(t.exports,"isAudioMimeTypeSupportedByServer",(function(){return i})),e(t.exports,"isVideoMimeTypeSupportedByServer",(function(){return a})),e(t.exports,"isUnknownMimeTypeSupportedByServer",(function(){return c})),e(t.exports,"isMimeTypeSupportedByServer",(function(){return u}));var n=function(e){return["image/bmp","image/x-windows-bmp","application/dicom","image/gif","image/jpeg","image/jpg","image/jp_","application/jpg","application/x-jpg","image/png","application/png","application/x-png","application/vnd.adobe.photoshop","image/vnd.adobe.photoshop","image/photoshop","image/x-photoshop","image/psd","application/photoshop","application/psd","zz-application/zz-winassoc-psd","image/tiff","image/x-tif","image/x-tiff","application/tif","application/x-tif","application/tiff","application/x-tiff","image/svg+xml","image/heif","image/heif-sequence","image/heic","image/heic-sequence"].indexOf(e.toLowerCase())>-1},o=function(e){return["application/pdf","application/x-pdf","application/acrobat","applications/vnd.pdf","text/pdf","text/x-pdf","application/vnd.adobe.illustrator","application/vnd.ms-office","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-word.document.macroenabled.12","application/vnd.ms-word.template.macroenabled.12","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.ms-excel.sheet.macroenabled.12","application/vnd.ms-excel.template.macroenabled.12","application/vnd.ms-excel.addin.macroenabled.12","application/vnd.ms-excel.sheet.macroenabled","application/vnd.ms-excel.template.macroenabled","application/vnd.ms-excel.addin.macroenabled","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.ms-powerpoint.presentation.macroenabled.12","application/vnd.ms-powerpoint.template.macroenabled.12","application/vnd.ms-powerpoint.slideshow.macroenabled.12","application/vnd.sun.xml.writer","application/vnd.sun.xml.writer.template","application/vnd.sun.xml.draw","application/vnd.sun.xml.draw.template","application/vnd.oasis.opendocument.graphics","application/vnd.oasis.opendocument.presentation","application/x-vnd.oasis.opendocument.presentation","application/vnd.sun.xml.calc","application/vnd.sun.xml.calc.template","application/vnd.oasis.opendocument.spreadsheet","application/x-vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.spreadsheet-template","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.text-template","application/vnd.oasis.opendocument.text-master","application/x-vnd.oasis.opendocument.text","application/x-vnd.oasis.opendocument.text-template","application/x-vnd.oasis.opendocument.text-master","application/vnd.wordperfect","text/csv","text/x-diff","text/x-perl","text/x-python","text/x-ruby","text/rtf","text/richtext","text/plain","application/txt","application/rtf","application/x-rtf","application/postscript"].indexOf(e.toLowerCase())>-1},i=function(e){return["audio/aac","audio/x-hx-aac-adts","audio/vnd.dolby.dd-raw","audio/aiff","audio/x-aiff","audio/x-monkeys-audio","audio/x-ape","audio/basic","audio/flac","audio/mp4","audio/midi","audio/x-matroska","audio/x-mod","audio/mpeg","audio/ogg","audio/x-ogg","audio/x-pn-realaudio","audio/wav","audio/x-wav","audio/x-ms-wma"].indexOf(e.toLowerCase())>-1},a=function(e){return["video/3gpp","video/3gpp2","video/x-ms-asf","video/avi","video/msvideo","video/x-msvideo","video/x-dv","video/x-flv","video/m2ts","video/x-m4v","video/x-matroska","video/quicktime","video/mp4","video/mpeg","video/ogg","video/x-ogg","video/webm","video/x-ms-wmv"].indexOf(e.toLowerCase())>-1},c=function(e){return["binary/octet-stream"].indexOf(e.toLowerCase())>-1},u=function(e){return n(e)||o(e)||i(e)||a(e)||c(e)}})),r.register("265yi",(function(t,n){e(t.exports,"overrideMediaTypeIfUnknown",(function(){return i}));var o=r("5qT7v"),i=function(e,t){return o.isErrorFileState(e)||"unknown"!==e.mediaType?{}:{mediaType:t}}})),r.register("iZ8V4",(function(t,r){e(t.exports,"convertBase64ToBlob",(function(){return n}));var n=function(e){for(var t=e.split(",")[1],r=atob(t),n=[],o=function(e){var t=r.slice(e,e+512),o=t.split("").map((function(e,r){return t.charCodeAt(r)})),i=new Uint8Array(o);n.push(i)},i=0;i<r.length;i+=512)o(i);return new Blob(n,{type:"image/jpeg"})}})),r.register("75Jol",(function(t,n){e(t.exports,"observableToPromise",(function(){return i}));var o=r("bBFyf"),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new o.Subscription;return new Promise((function(r,n){return t.add(e.subscribe({next:function(e){r(e),t.unsubscribe()},error:function(e){n(e),t.unsubscribe()}}))}))}})),r.register("fAIAn",(function(n,o){e(n.exports,"getDimensionsFromBlob",(function(){return s}));var i=r("9ePZF"),a=r("cNgp7"),c=r("2a8Yb"),u=r("31Kjz"),s=function(){var e=t(a)(t(i).mark((function e(r,n){var o;return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=r,e.next="image"===e.t0?3:"video"===e.t0?11:12;break;case 3:return o=URL.createObjectURL(n),e.prev=4,e.next=7,c.getImageDimensionsFromBlob(o);case 7:return e.abrupt("return",e.sent);case 8:return e.prev=8,URL.revokeObjectURL(o),e.finish(8);case 11:return e.abrupt("return",u.getVideoDimensionsFromBlob(n));case 12:throw new Error("Can't extract dimensions from ".concat(r));case 13:case"end":return e.stop()}}),e,null,[[4,,8,11]])})));return function(t,r){return e.apply(this,arguments)}}()})),r.register("2a8Yb",(function(t,r){e(t.exports,"getImageDimensionsFromBlob",(function(){return n}));var n=function(e){return new Promise((function(t,r){var n=new Image;n.src=e,n.onload=function(){return t({width:n.width,height:n.height})},n.onerror=r}))}})),r.register("31Kjz",(function(n,o){e(n.exports,"getVideoDimensionsFromBlob",(function(){return u}));var i=r("9ePZF"),a=r("cNgp7"),c=r("k1Gik"),u=function(){var e=t(a)(t(i).mark((function e(r){var n,o=arguments;return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:new c.default(r),e.prev=1,e.next=4,n.getDimensions();case 4:return e.abrupt("return",e.sent);case 5:return e.prev=5,n.end(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[1,,5,8]])})));return function(t){return e.apply(this,arguments)}}()})),r.register("1ynVu",(function(t,n){e(t.exports,"createFileStateSubject",(function(){return i}));var o=r("iUHPc"),i=function(e){var t=new o.ReplaySubject(1);return e instanceof Error?t.error(e):e&&t.next(e),t}})),r.register("4RWH2",(function(n,o){e(n.exports,"shouldFetchRemoteFileStates",(function(){return l})),e(n.exports,"shouldFetchRemoteFileStatesObservable",(function(){return d}));var i=r("9ePZF"),a=r("cNgp7"),c=r("8mYKC"),u=r("lFZVg"),s=r("0oxuu"),p=r("31Kjz");function l(e,t,r){return f.apply(this,arguments)}function f(){return(f=t(a)(t(i).mark((function e(r,n,o){var a,c,l,f;return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("doc"!==r&&u.isMimeTypeSupportedByBrowser(n)&&o||!s.isMimeTypeSupportedByServer(n)){e.next=2;break}return e.abrupt("return",!0);case 2:if("video"!==r||!o){e.next=20;break}return e.next=5,o;case 5:if((a=e.sent.value)instanceof Blob){e.next=8;break}return e.abrupt("return",!1);case 8:return e.prev=8,e.next=11,p.getVideoDimensionsFromBlob(a);case 11:return c=e.sent,l=c.width,f=c.height,e.abrupt("return",!l&&!f);case 17:return e.prev=17,e.t0=e.catch(8),e.abrupt("return",!0);case 20:return e.abrupt("return",!1);case 21:case"end":return e.stop()}}),e,null,[[8,17]])})))).apply(this,arguments)}function d(e,t,r){return c.from(l(e,t,r))}})),r.register("5XRTe",(function(t,r){e(t.exports,"isEmptyFile",(function(){return o}));var n=432e5;function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),r=e.artifacts,o=e.mediaType,i=e.mimeType,a=e.name,c=e.processingStatus,u=e.representations,s=e.size,p=e.createdAt;if(!(r||o||i||a||c||u||s||"number"!=typeof p)){var l=t-p;if(l>n)return!0}return!1}})),r.register("8190B",(function(n,o){e(n.exports,"CollectionFetcher",(function(){return x}));var i=r("fw3Q6"),a=r("9ePZF"),c=r("cNgp7"),u=r("l15hj"),s=r("go2dD"),p=r("4NDMl"),l=r("iUHPc"),f=r("lvJTv"),d=r("5qT7v");function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?m(Object(n),!0).forEach((function(r){t(u)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v={},x=function(){function e(r){t(s)(this,e),this.mediaStore=r}var r,n;return t(p)(e,[{key:"createFileStateObserver",value:function(e,t){var r=new l.ReplaySubject(1),n=h({id:e},t),o=d.mapMediaFileToFileState({data:n});return r.next(o),r}},{key:"populateCache",value:function(e){var t=this;e.forEach((function(e){var r=t.createFileStateObserver(e.id,e.details);f.getFileStreamsCache().set(e.id,r)}))}},{key:"removeFromCache",value:function(e,t){var r=v[t].items.findIndex((function(t){return t.id===e}));-1!==r&&(f.getFileStreamsCache().remove(e),v[t].items.splice(r,1))}},{key:"getItems",value:function(e,t){var r=this;v[e]||(v[e]={items:[],subject:new l.ReplaySubject(1),isLoadingNextPage:!1});var n=v[e],o=n.subject;return this.mediaStore.getCollectionItems(e,h(h({},t),{},{details:"full"})).then((function(e){var t=e.data,i=t.contents,a=t.nextInclusiveStartKey;r.populateCache(i),n.items=e.data.contents,n.nextInclusiveStartKey=a,o.next(n.items)})).catch((function(e){return o.error(e)})),o}},{key:"removeFile",value:(n=t(c)(t(a).mark((function e(r,n,o){var i;return t(a).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mediaStore.removeCollectionFile(r,n,o);case 2:this.removeFromCache(r,n),(i=v[n]).subject.next(i.items);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"loadNextPage",value:(r=t(c)(t(a).mark((function e(r,n){var o,c,u,s,p,l,f,d,m,x,g,y;return t(a).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=v[r],c=!!o&&o.isLoadingNextPage,o&&o.nextInclusiveStartKey&&!c){e.next=4;break}return e.abrupt("return");case 4:return o.isLoadingNextPage=!0,u=v[r],s=u.nextInclusiveStartKey,p=u.items,l=u.subject,e.next=8,this.mediaStore.getCollectionItems(r,h(h({},n),{},{inclusiveStartKey:s,details:"full"}));case 8:f=e.sent,d=f.data,m=d.contents,x=d.nextInclusiveStartKey,this.populateCache(m),g=f.data.contents,y=[].concat(t(i)(p),t(i)(g)),l.next(y),v[r]={items:y,nextInclusiveStartKey:x,subject:l,isLoadingNextPage:!1};case 15:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})}]),e}()})),r.register("hRnd3",(function(n,o){e(n.exports,"MediaClient",(function(){return m}));var i=r("9ePZF"),a=r("cNgp7"),c=r("go2dD"),u=r("4NDMl"),s=r("fNcvl"),p=r("hRAeJ"),l=r("8190B"),f=r("dWzwy"),d=r("4KjvQ"),m=function(){function e(r,n){t(c)(this,e),this.mediaClientConfig=r,this.featureFlags=n,this.mediaStore=new p.MediaStore({authProvider:r.authProvider},n),this.config=r,this.collection=new l.CollectionFetcher(this.mediaStore),this.file=new f.FileFetcherImpl(this.mediaStore),this.eventEmitter=new s.EventEmitter2,this.stargate=new d.StargateClient(r.stargateBaseUrl)}var r;return t(u)(e,[{key:"getImage",value:function(e,t,r,n){return this.mediaStore.getImage(e,t,r,n)}},{key:"getImageUrl",value:function(e,t){return this.mediaStore.getFileImageURL(e,t)}},{key:"getImageMetadata",value:(r=t(a)(t(i).mark((function e(r,n){return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mediaStore.getImageMetadata(r,n);case 2:return e.abrupt("return",e.sent.metadata);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"on",value:function(e,t){this.eventEmitter.on(e,t)}},{key:"off",value:function(e,t){this.eventEmitter.off(e,t)}},{key:"emit",value:function(e,t){return this.eventEmitter.emit(e,t)}}]),e}()})),r.register("4KjvQ",(function(n,o){e(n.exports,"StargateClient",(function(){return s}));var i=r("9ePZF"),a=r("cNgp7"),c=r("go2dD"),u=r("4NDMl"),s=function(){function e(r){t(c)(this,e),this.baseUrl=r||"/gateway/api"}var r;return t(u)(e,[{key:"fetchToken",value:(r=t(a)(t(i).mark((function e(r){return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.baseUrl,"/media/auth/smartedge"),{credentials:"include",headers:{"x-client-id":r}});case 2:return e.abrupt("return",e.sent.json());case 3:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"isTokenExpired",value:function(e){var t=(new Date).getTime()/1e3;return e.data.iat+e.data.expiresIn-t<0}}]),e}()})),r.register("kJdUD",(function(t,r){e(t.exports,"isImageRemote",(function(){return n}));var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.origin;if(URL&&URL.prototype){var r=new URL(e);return!!r.host&&r.origin!==t}return!0}})),r.register("8swuG",(function(t,r){var n;e(t.exports,"checkWebpSupport",(function(){return o}));var o=function(){return void 0!==n?Promise.resolve(n):new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA",t.onload=t.onerror=function(){n=2===t.height,e(n)}}))}})),r.register("jwxNO",(function(t,r){e(t.exports,"safeUnsubscribe",(function(){return n}));var n=function(e){console.warn("safeUnsubscribe() is deprecated and will be removed in the next media-client major version"),setTimeout((function(){return e&&e.unsubscribe()}),0)}})),r.register("6iNqK",(function(n,o){e(n.exports,"isFileIdentifier",(function(){return a})),e(n.exports,"isExternalImageIdentifier",(function(){return c})),e(n.exports,"isDifferentIdentifier",(function(){return u}));var i=r("gbWJE"),a=function(e){return"file"===e.mediaItemType},c=function(e){return"external-image"===e.mediaItemType},u=function(e,r){return a(e)&&a(r)?e.id!==r.id||e.collectionName!==r.collectionName||e.occurrenceKey!==r.occurrenceKey:!t(i)(e,r)}})),r.register("kOI3I",(function(n,o){e(n.exports,"getMediaClient",(function(){return v})),e(n.exports,"withMediaClient",(function(){return x}));var i=r("jgze0"),a=r("bRWI2"),c=r("go2dD"),u=r("4NDMl"),s=r("9OLyr"),p=r("89Kz4"),l=r("eP3fJ"),f=r("61szk"),d=r("hRnd3");function m(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=t(l)(e);if(r){var i=t(l)(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return t(p)(this,n)}}var h=new Map,v=function(e,t){var r=h.get(e);return r||(r=new d.MediaClient(e,t),h.set(e,r)),r},x=function(e,r){return function(n){t(s)(p,n);var o=m(p);function p(){return t(c)(this,p),o.apply(this,arguments)}return t(u)(p,[{key:"render",value:function(){var n=this.props,o=n.mediaClientConfig,c=t(a)(n,["mediaClientConfig"]),u=o?v(o,r):function(e){var t={authProvider:function(){return Promise.resolve({clientId:"",token:"",baseUrl:""})}};return new d.MediaClient(t,e)}(r);return t(f).createElement(e,t(i)({},c,{mediaClient:u}))}}]),p}(t(f).Component)}})),r.register("f7SFO",(function(n,o){e(n.exports,"isMediaBlobUrl",(function(){return p})),e(n.exports,"getAttrsFromUrl",(function(){return d})),e(n.exports,"objectToQueryString",(function(){return m})),e(n.exports,"addFileAttrsToUrl",(function(){return h}));var i=r("l15hj"),a=r("7U1dx");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?c(Object(n),!0).forEach((function(r){t(i)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s="media-blob-url",p=function(e){return e.indexOf("".concat(s,"=true"))>-1},l=function(e,t){var r=e.get(t);return"string"!=typeof r||isNaN(parseInt(r))?void 0:parseInt(r)},f=function(e,t){var r=e.get(t);if(r)return decodeURIComponent(r)},d=function(e){var r=new URL(e).hash.replace("#",""),n=new(t(a))(r),o=n.get("id"),i=n.get("contextId");if(o&&i)return{id:o,contextId:i,collection:f(n,"collection"),alt:f(n,"alt"),height:l(n,"height"),width:l(n,"width"),size:l(n,"size"),name:f(n,"name"),mimeType:f(n,"mimeType")}},m=function(e){return Object.keys(e).filter((function(t){return void 0!==e[t]&&null!==e[t]})).map((function(t){var r=e[t];if(null!=r)return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(r.toString()))})).join("&")},h=function(e,r){if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent))return e;var n=u(u({},t(i)({},s,"true")),r),o=m(n);return"".concat(e,"#").concat(o)}}))}();
//# sourceMappingURL=esm.e8ec8135.js.map
